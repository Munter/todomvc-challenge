!function(){function e(){var e;return[/labs/,/\w*-examples/].forEach(function(t){t=location.href.match(t),!e&&t&&(e=location.href.indexOf(t))}),location.href.substr(0,e)}function t(e,n){if(!(this instanceof t))return new t(e,n);var r,i;if("object"!=typeof e)try{e=JSON.parse(e)}catch(o){return}n&&(r=n.template,i=n.framework),!r&&e.templates&&(r=e.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").getAttribute("data-framework")),r&&e[i]&&(this.frameworkJSON=e[i],this.template=r,this.append())}var n=function(e){e.defaults=function(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var i in r)null==e[i]&&(e[i]=r[i])}return e},e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g;return e.template=function(i,o,a){var s,a=e.defaults({},a,e.templateSettings),l=RegExp([(a.escape||t).source,(a.interpolate||t).source,(a.evaluate||t).source].join("|")+"|$","g"),u=0,c="__p+='";i.replace(l,function(e,t,o,a,s){return c+=i.slice(u,s).replace(r,function(e){return"\\"+n[e]}),t&&(c+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),o&&(c+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),a&&(c+="';\n"+a+"\n__p+='"),u=s+e.length,e}),c+="';\n",a.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{s=new Function(a.variable||"obj","_",c)}catch(d){throw d.source=c,d}return o?s(o,e):(o=function(t){return s.call(this,t,e)},o.source="function("+(a.variable||"obj")+"){\n"+c+"}",o)},e}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(e,t){var n=e.createElement(t),r=e.getElementsByTagName(t)[0];n.src="//www.google-analytics.com/ga.js",r.parentNode.insertBefore(n,r)}(document,"script")),t.prototype.append=function(){var t=document.createElement("aside");t.innerHTML=n.template(this.template,this.frameworkJSON),t.className="learn";var r=t.querySelectorAll(".demo-link");Array.prototype.forEach.call(r,function(t){t.setAttribute("href",e()+t.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",t.outerHTML)},"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com")),function(t,n){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var r=new XMLHttpRequest;r.open("GET",e()+t,!0),r.send(),r.onload=function(){200===r.status&&n&&n(r.responseText)}}("learn.json",t)}();var duel=function(e,t,n){function r(e){this.value=e}function i(e){switch(typeof e){case"object":return e?S(e)?2:e instanceof r?5:e instanceof Date?4:3:0;case"function":return 1;case"undefined":return 0;default:return 4}}function o(e){return"function"==typeof e}function a(){this.value=a.FAST?"":[]}function s(e){S(e)||(e=["",e]),this.value=e}function l(e,t){switch(i(t)){case 2:if(""===t[0])for(var n=1,r=t.length;r>n;n++)l(e,t[n]);else e.push(t);break;case 3:if(1===e.length)e.push(t);else if(n=e[1],3===i(n))for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else e.splice(1,0,t);break;case 4:""!==t&&(t=""+t,n=e.length-1,n>0&&4===i(e[n])?e[n]+=t:e.push(t));break;case 0:break;default:e.push(t)}}function u(e,t,n,r,o,a){var s=3===i(e[1]);if(e.length===(s?3:2))return _(e[e.length-1],t,n,r,o,a);for(var u=[""],s=s?2:1,c=e.length;c>s;s++)l(u,_(e[s],t,n,r,o,a));return u}function c(e,t,n,r,a,s){for(var l=1,c=e.length;c>l;l++){var d=e[l],h=d[1].test;if(3!==i(d[1])||!h||(o(h)&&(h=h(t,n,r,a)),h))return u(d,t,n,r,a,s)}return null}function d(e){2!==i(e)&&(e=["",e]);var t=function(t,n,r,i){try{var o=_(e,t,isFinite(n)?n:0,isFinite(r)?r:1,"string"==typeof i?i:null);return new s(o)}catch(a){return new s("["+a+"]")}};return t.getView=function(){return e},t}function h(e){return"string"!=typeof e?e:e.replace(/[&<>]/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return e}})}function f(e){return"string"!=typeof e?e:e.replace(/[&<>"]/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}})}function p(e,t){var n,r=t[0]||"",o=t.length,a=1,s=T[r];if("!"===r.charAt(0))"!DOCTYPE"===t[0]?e.append("<!DOCTYPE ",t[1],">"):e.append("<!--",t[1],"-->");else{if(r){if(e.append("<",r),n=t[a],3===i(n)){for(var l in n)if(n.hasOwnProperty(l)){var u=n[l];if(k[l]){if(!u)continue;u=l}e.append(" ",l),0!==i(u)&&e.append('="',f(u),'"')}a++}s&&e.append(" /"),e.append(">")}for(;o>a;a++)n=t[a],S(n)?p(e,n):e.append(h(n));r&&!s&&e.append("</",r,">")}}function g(t){if(t){if("!"===t.charAt(0))return e.createComment("!"===t?"":t.substr(1)+" ")}else{if(e.createDocumentFragment)return e.createDocumentFragment();t=""}return"style"===t.toLowerCase()&&e.createStyleSheet?e.createStyleSheet():e.createElement(t)}function m(t,n){if(n){var r=(t.tagName||"").toLowerCase();if(8===t.nodeType)3===n.nodeType&&(t.nodeValue+=n.nodeValue);else if("table"===r&&t.tBodies){if(n.tagName)if((r=n.tagName.toLowerCase())&&"tbody"!==r&&"thead"!==r){var i=0<t.tBodies.length?t.tBodies[t.tBodies.length-1]:null;i||(i=g("th"===r?"thead":"tbody"),t.appendChild(i)),i.appendChild(n)}else!1!==t.canHaveChildren&&t.appendChild(n);else if(11===n.nodeType)for(;n.firstChild;)m(t,n.removeChild(n.firstChild))}else if("style"===r&&e.createStyleSheet)t.cssText=n;else if(!1!==t.canHaveChildren)t.appendChild(n);else if("object"===r&&n.tagName&&"param"===n.tagName.toLowerCase()){try{t.appendChild(n)}catch(o){}try{t.object&&(t.object[n.name]=n.value)}catch(a){}}}}function v(e,t,n){switch(typeof n){case"function":e.addEventListener?e.addEventListener("on"===t.substr(0,2)?t.substr(2):t,n,!1):e[t]=n;break;case"string":e[t]=new Function("event",n)}}function y(e){return!(!e||3!==e.nodeType||e.nodeValue&&/\S/.exec(e.nodeValue))}function x(e,t){e&&3===e.nodeType&&t.exec(e.nodeValue)&&(e.nodeValue=e.nodeValue.replace(t,""))}function b(e){if(e){for(;y(e.firstChild);)e.removeChild(e.firstChild);for(x(e.firstChild,N);y(e.lastChild);)e.removeChild(e.lastChild);x(e.lastChild,M)}}function E(e,t){var r=e[t];if(r){try{delete e[t]}catch(i){e[t]=n}if(!o(r))try{r=new Function(""+r)}catch(a){r=null}}return r}function w(e){if(e){var t=E(e,"$init");t&&t.call(e),(t=E(e,"$load"))?setTimeout(function(){t.call(e),t=e=null},0):t=e=null}}function C(t,n){for(var r=1,o=n.length;o>r;r++){var a=n[r];switch(i(a)){case 2:var s=a[0],a=C(g(s),a);if("html"===s)return b(a),w(a),a;m(t,a);break;case 4:""!==a&&m(t,e.createTextNode(""+a));break;case 3:if(1===t.nodeType){var s=t,l=a;if(l.name&&e.attachEvent&&!s.parentNode)try{var u=g("<"+s.tagName+' name="'+l.name+'">');s.tagName===u.tagName&&(s=u)}catch(c){}a=void 0;for(a in l)if(l.hasOwnProperty(a)){var d=l[a],h=i(d);a&&(0===h&&(d="",h=4),a=A[a.toLowerCase()]||a,k[a]?(s[a]=!!d,$[a]&&(s[$[a]]=!!d)):"style"===a?"undefined"!=typeof s.style.cssText?s.style.cssText=d:s.style=d:"class"===a?s.className=d:"on"===a.substr(0,2)?(v(s,a,d),$[a]&&v(s,$[a],d)):4===h&&"$"!==a.charAt(0)?(s.setAttribute(a,d),$[a]&&s.setAttribute($[a],d)):(s[a]=d,$[a]&&(s[$[a]]=d)))}t=s}break;case 5:if(s=m,l=t,d=a,a=g("div"),a.innerHTML=""+d,b(a),1===a.childNodes.length)a=a.firstChild;else{for(d=g("");a.firstChild;)d.appendChild(a.firstChild);a=d}s(l,a)}}return b(t),w(t),11===t.nodeType&&1===t.childNodes.length&&(t=t.firstChild),t}r.prototype.toString=function(){return this.value};var S=Array.isArray||function(e){return e instanceof Array};a.FAST=!(t&&9>t()),a.prototype.append=function(e,t,r){a.FAST?null!==e&&(this.value+=e,null!==t&&t!==n&&(this.value+=t,null!==r&&r!==n&&(this.value+=r))):this.value.push.apply(this.value,arguments)},a.prototype.clear=function(){this.value=a.FAST?"":[]},a.prototype.toString=function(){return a.FAST?this.value:this.value.join("")};var _;_=function(e,t,n,r,a,s){switch(i(e)){case 1:return e(t,n,r,a);case 2:var d=e[0]||"";switch(d){case"$for":e:{var h,f=e[1]||{},d=[""];if(f.hasOwnProperty("count"))for(h=f.count,o(h)&&(h=h(t,n,r,a)),f.hasOwnProperty("data")?(f=f.data,o(f)&&(f=f(t,n,r,a))):f=t,t=0;h>t;t++)l(d,u(e,f,t,h,null,s));else{if(f.hasOwnProperty("in")){var p=f["in"];if(o(p)&&(p=p(t,n,r,a)),3===i(p)){f=[];for(h in p)p.hasOwnProperty(h)&&f.push(h);for(t=0,h=f.length;h>t;t++)l(d,u(e,p[f[t]],t,h,f[t],s));e=d;break e}f=p}else f=f.each,o(f)&&(f=f(t,n,r,a));if(t=i(f),2===t)for(t=0,h=f.length;h>t;t++)l(d,u(e,f[t],t,h,null,s));else 0!==t&&(d=u(e,f,0,1,null,s))}e=d}return e;case"$xor":return c(e,t,n,r,a,s);case"$if":return c(["$xor",e],t,n,r,a,s);case"$call":if(s=e[1]||{},s.view){for(d=_(s.view,t,n,r,a),f=s.hasOwnProperty("data")?_(s.data,t,n,r,a):t,h=s.hasOwnProperty("index")?_(s.index,t,n,r,a):n,p=s.hasOwnProperty("count")?_(s.count,t,n,r,a):r,t=s.hasOwnProperty("key")?_(s.key,t,n,r,a):a,n={},r=e.length-1;r>=2;r--)a=e[r],s=a[1]||{},s.hasOwnProperty("name")&&(n[s.name]=a);e=d&&o(d.getView)?_(d.getView(),f,h,p,t,n):null}else e=null;return e;case"$part":return d=(e[1]||{}).name||"",d=s&&s.hasOwnProperty(d)?s[d]:e,u(d,t,n,r,a)}for(d=[d],f=1,h=e.length;h>f;f++)l(d,_(e[f],t,n,r,a,s));return d;case 3:s={};for(d in e)e.hasOwnProperty(d)&&(s[d]=_(e[d],t,n,r,a));return s}return e},t=function(e){return o(e)&&o(e.getView)?e:d(e)},t.raw=function(e){return new r(e)};var T={area:!0,base:!0,basefont:!0,br:!0,col:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,wbr:!0},k={async:1,checked:1,defer:1,disabled:1,hidden:1,novalidate:1,formnovalidate:1};s.prototype.toString=function(){var e,t=this.value;try{var n=new a;p(n,t),e=n.toString()}catch(r){e="["+r+"]"}return e},s.prototype.write=function(t){(t||e).write(""+this)};var A={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},$={enctype:"encoding",onscroll:"DOMMouseScroll",checked:"defaultChecked"},N=/^[\r\n]+/,M=/[\r\n]+$/;return s.prototype.toDOM=function(t,n){4===i(t)&&(t=e.getElementById(t));var r;try{n&&(r=t,t=null),r=C(r||g(this.value[0]),this.value)}catch(o){r=e.createTextNode("["+o+"]")}return t&&t.parentNode&&t.parentNode.replaceChild(r,t),r},s.prototype.reload=function(){var t=e;try{var n=this.toDOM();if(t.replaceChild(n,t.documentElement),t.createStyleSheet){for(var r=n.firstChild;r&&"HEAD"!==(r.tagName||"");)r=r.nextSibling;for(var i=r&&r.firstChild;i;)"LINK"===(i.tagName||"")&&(i.href=i.href),i=i.nextSibling}}catch(o){t=t.open("text/html"),t.write(this.toString()),t.close()}},t}(document,window.ScriptEngineMajorVersion),todos=todos||{};!function(e,t,n){function r(){var e="undefined"!=typeof JSON?JSON.stringify(i):i;t.setItem(n,e)}var i,t=t||function(){var e={};return{getItem:function(t){return e[t]},setItem:function(t,n){e[t]=n}}}(),o=t.getItem(n);i=o?"undefined"!=typeof JSON?JSON.parse(o):o:[],e.model={tasks:function(){return i},stats:function(){var e={};return e.total=i.length,e.completed=i.filter(function(e){return e.completed}).length,e.active=e.total-e.completed,e},add:function(e){return e={id:((new Date).getTime()+Math.random()).toString(36),title:e,completed:!1},i.push(e),r(),e},edit:function(e,t){i.filter(function(t){return t.id===e})[0].title=t,r()},toggle:function(e,t){i.filter(function(t){return t.id===e})[0].completed=t,r()},toggleAll:function(e){i.forEach(function(t){t.completed=e}),r()},remove:function(e){i.forEach(function(t,n){t.id===e&&i.splice(n,1)}),r()},expunge:function(){i.forEach(function(e,t){e.completed&&i.splice(t,1)}),r()}}}(todos,window.localStorage,"todos-duel");var todos=todos||{};todos.views=todos.views||{},todos.views.Stats=duel([""," ",["$if",{test:function(e){return e.total}},["footer",{id:"footer"}," ",["span",{id:"todo-count"},["strong",function(e){return e.active}]," ",function(e){return 1===e.active?"item":"items"}," left"]," "," ",["$if",{test:function(e){return e.completed}},["button",{id:"clear-completed",onclick:function(){return todos.actions.clear_click}},"Clear completed (",function(e){return e.completed},")"]]]]]);var todos=todos||{};todos.views=todos.views||{},todos.views.Task=duel([""," ",["li",{"class":function(e){return e.completed?"completed":""}}," ",["div",{"class":"view"}," ",["input",{"class":"toggle",type:"checkbox",checked:function(e){return e.completed},onchange:function(e){return todos.actions.completed_change(e.id)}}]," ",["label",{ondblclick:function(e){return todos.actions.content_dblclick(e.id)}},function(e){return e.title}]," ",["button",{"class":"destroy",onclick:function(e){return todos.actions.remove_click(e.id)}}]," "]," ",["input",{"class":"edit",type:"text",value:function(e){return e.title},onblur:function(e){return todos.actions.edit_blur(e.id)},onkeypress:function(e){return todos.actions.edit_keypress(e.id)}}]]]);var todos=todos||{};todos.views=todos.views||{},todos.views.Tasks=duel([""," ",["$if",{test:function(e){return e.tasks.length}},["section",{id:"main"}," ",["input",{id:"toggle-all",type:"checkbox",checked:function(e){return!e.stats.active},onchange:function(){return todos.actions.toggle_change}}]," ",["label",{"for":"toggle-all"},"Mark all as complete"]," ",["ul",{id:"todo-list"}," ",["$for",{each:function(e){return e.tasks}}," ",["$call",{view:function(){return todos.views.Task}}]]," "]]]]);var todos=todos||{};todos.views=todos.views||{},todos.views.TodoApp=duel(["section",{id:"todoapp"}," ",["header",{id:"header"}," ",["h1","todos"]," ",["input",{id:"new-todo",placeholder:"What needs to be done?",autofocus:null,onblur:function(){return todos.actions.add_blur},onkeypress:function(){return todos.actions.add_keypress}}]," "]," ",["$call",{view:function(){return todos.views.Tasks},data:function(e){return e}}]," ",["$call",{view:function(){return todos.views.Stats},data:function(e){return e.stats}}]]);var todos=todos||{};!function(e,t){function n(n){var n=n||e.model.stats(),n=e.views.Stats(n).toDOM(),r=t.getElementById(o);r?r.parentNode.replaceChild(n,r):t.getElementById(a).appendChild(n)}function r(){var r={tasks:e.model.tasks(),stats:e.model.stats()},i=e.views.Tasks(r).toDOM(),o=t.getElementById(s);o?o.parentNode.replaceChild(i,o):t.getElementById(a).appendChild(i),n(r.stats)}function i(i){var o=(i.value||"").trim();i.value="",o&&(i=e.model.add(o),(o=t.getElementById(l))?(o.appendChild(e.views.Task(i).toDOM()),n()):r())}var o="footer",a="todoapp",s="main",l="todo-list";e.actions={addBlur:function(){i(this)},add_keypress:function(e){13===e.keyCode&&i(this)},edit_blur:function(t){return function(){var n=(this.value||"").trim();(this.value=n)?e.model.edit(t,n):e.model.remove(t),r()}},edit_keypress:function(){return function(e){13===e.keyCode&&this.blur()}},remove_click:function(t){return function(){e.model.remove(t),r()}},clear_click:function(){e.model.expunge(),r()},content_dblclick:function(){var e=function(t){return"LI"!==t.tagName?e(t.parentNode):(t.className="editing",t=t.getElementsByTagName("input")[1],t.focus(),t.value=t.value,void 0)};return function(){e(this)}},completed_change:function(t){return function(){e.model.toggle(t,this.checked),r()}},toggle_change:function(){e.model.toggleAll(this.checked),r()}},function(t){var n=e.views.TodoApp({tasks:e.model.tasks(),stats:e.model.stats()}).toDOM();t.insertBefore(n,t.firstChild)}(t.body)}(todos,window.document);