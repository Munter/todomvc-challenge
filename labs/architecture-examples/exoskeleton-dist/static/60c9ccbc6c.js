!function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t;return[/labs/,/\w*-examples/].forEach(function(e){var n=location.href.match(e);!t&&n&&(t=location.href.indexOf(n))}),location.href.substr(0,t)}function n(t,n){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var i=new XMLHttpRequest;i.open("GET",e()+t,!0),i.send(),i.onload=function(){200===i.status&&n&&n(i.responseText)}}function i(t,e){if(!(this instanceof i))return new i(t,e);var n,r;if("object"!=typeof t)try{t=JSON.parse(t)}catch(s){return}e&&(n=e.template,r=e.framework),!n&&t.templates&&(n=t.templates.todomvc),!r&&document.querySelector("[data-framework]")&&(r=document.querySelector("[data-framework]").getAttribute("data-framework")),n&&t[r]&&(this.frameworkJSON=t[r],this.template=n,this.append())}var r=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];if(i)for(var r in i)null==t[r]&&(t[r]=i[r])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(r,s,o){var a;o=t.defaults({},o,t.templateSettings);var c=new RegExp([(o.escape||e).source,(o.interpolate||e).source,(o.evaluate||e).source].join("|")+"|$","g"),l=0,u="__p+='";r.replace(c,function(t,e,s,o,a){return u+=r.slice(l,a).replace(i,function(t){return"\\"+n[t]}),e&&(u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),s&&(u+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(u+="';\n"+o+"\n__p+='"),l=a+t.length,t}),u+="';\n",o.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{a=new Function(o.variable||"obj","_",u)}catch(h){throw h.source=u,h}if(s)return a(s,t);var d=function(e){return a.call(this,e,t)};return d.source="function("+(o.variable||"obj")+"){\n"+u+"}",d},t}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(t,e){var n=t.createElement(e),i=t.getElementsByTagName(e)[0];n.src="//www.google-analytics.com/ga.js",i.parentNode.insertBefore(n,i)}(document,"script")),i.prototype.append=function(){var t=document.createElement("aside");t.innerHTML=r.template(this.template,this.frameworkJSON),t.className="learn";var n=t.querySelectorAll(".demo-link");Array.prototype.forEach.call(n,function(t){t.setAttribute("href",e()+t.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",t.outerHTML)},t(),n("learn.json",i)}(),/*!
 * Exoskeleton.js 0.3.1
 * (c) 2013 Paul Miller <http://paulmillr.com>
 * Based on Backbone.js
 * (c) 2010-2013 Jeremy Ashkenas, DocumentCloud
 * Exoskeleton may be freely distributed under the MIT license.
 * For all details and documentation: <http://exoskel.at>
 */
function(t){"function"==typeof define&&define.amd?define(["underscore","jquery"],t):"object"==typeof exports?t(require("underscore"),require("jquery")):t(this._,this.jQuery||this.Zepto||this.ender||this.$)}(function(t,e){"use strict";var n,i="undefined"==typeof window?exports:window,r=i.Backbone;n="undefined"!=typeof exports?exports:i.Backbone={};var s=t=n.utils=t||{};n.$=e;var o=[];o.push;var a=o.slice;o.splice,n.noConflict=function(){return i.Backbone=r,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.extend=function(e,n){var i,r=this;i=e&&hasOwnProperty.call(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},t.extend(i,r,n);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&t.extend(i.prototype,e),i.__super__=r.prototype,i};var c=function(){throw new Error('A "url" property or function must be specified')},l=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};s.result=function(t,e){var n=t?t[e]:void 0;return"function"==typeof n?t[e]():n},s.defaults=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},s.extend=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in e)t[n]=e[n]}),t};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};s.escape=function(t){return null==t?"":String(t).replace(/[&<>"']/g,function(t){return u[t]})},s.sortedIndex=function(t,e,n,i){n=null==n?Function.prototype:"function"==typeof n?n:function(t){return t[n]};for(var r=n.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;n.call(i,t[a])<r?s=a+1:o=a}return s},s.sortBy=function(t,e,n){var i="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}).map(function(t){return t.value})};var h=0;s.uniqueId=function(t){var e=++h+"";return t?t+e:e};var d=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var r=toString.call(t);if(r!=toString.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!("function"==typeof o&&o instanceof o&&"function"==typeof a&&a instanceof a))return!1;n.push(t),i.push(e);var c=0,l=!0;if("[object Array]"==r){if(c=t.length,l=c==e.length)for(;c--&&(l=d(t[c],e[c],n,i)););}else{for(var u in t)if(hasOwnProperty.call(t,u)&&(c++,!(l=hasOwnProperty.call(e,u)&&d(t[u],e[u],n,i))))break;if(l){for(u in e)if(hasOwnProperty.call(e,u)&&!c--)break;l=!c}}return n.pop(),i.pop(),l};s.isEqual=function(t,e){return d(t,e,[],[])},s.matchesSelector=function(){var t,e="MatchesSelector",n=document.createElement("div");if(["matches","webkit"+e,"moz"+e,"ms"+e].some(function(e){var i=e in n;return t=e,i}),!t)throw new Error("Element#matches is not supported");return function(e,n){return e[t](n)}}();var f=n.Events={on:function(t,e,n){if(!g(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!g(this,"once",t,[e,n])||!e)return this;var i,r=this,s=function(){i||(i=!0,r.off(t,s),e.apply(this,arguments))};return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var i,r,s,o,a,c,l,u;if(!this._events||!g(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(o=t?[t]:Object.keys(this._events),a=0,c=o.length;c>a;a++)if(t=o[a],s=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,u=s.length;u>l;l++)r=s[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!g(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&v(n,e),i&&v(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,n,this),(r||!Object.keys(t._events).length)&&delete this._listeningTo[s];return this}},p=/\s+/,g=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(p.test(n)){for(var s=n.split(p),o=0,a=s.length;a>o;o++)t[e].apply(t,[s[o]].concat(i));return!1}return!0},v=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},m={listenTo:"on",listenToOnce:"once"};Object.keys(m).forEach(function(e){var n=m[e];f[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=t.uniqueId("l"));return s[o]=e,r||"object"!=typeof i||(r=this),e[n](i,r,this),this}}),f.bind=f.on,f.unbind=f.off;var y=n.Model=function(e,n){var i=e||{};n||(n={}),this.cid=t.uniqueId("c"),this.attributes=Object.create(null),n.collection&&(this.collection=n.collection),n.parse&&(i=this.parse(i,n)||{}),i=t.defaults({},i,t.result(this,"defaults")),this.set(i,n),this.changed=Object.create(null),this.initialize.apply(this,arguments)};if(t.extend(y.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return t.extend(Object.create(null),this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(e){return t.escape(this.get(e))},has:function(t){return null!=this.get(t)},set:function(e,n,i){var r,s,o,a,c,l,u,h;if(null==e)return this;if("object"==typeof e?(s=e,i=n):(s={})[e]=n,i||(i={}),!this._validate(s,i))return!1;o=i.unset,c=i.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=t.extend(Object.create(null),this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)n=s[r],t.isEqual(h[r],n)||a.push(r),t.isEqual(u[r],n)?delete this.changed[r]:this.changed[r]=n,o?delete h[r]:h[r]=n;if(!c){a.length&&(this._pending=!0);for(var d=0,f=a.length;f>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,n){return this.set(e,void 0,t.extend({},n,{unset:!0}))},clear:function(e){var n={};for(var i in this.attributes)n[i]=void 0;return this.set(n,t.extend({},e,{unset:!0}))},hasChanged:function(t){return null==t?!!Object.keys(this.changed).length:hasOwnProperty.call(this.changed,t)},changedAttributes:function(e){if(!e)return this.hasChanged()?t.extend(Object.create(null),this.changed):!1;var n,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in e)t.isEqual(r[s],n=e[s])||((i||(i={}))[s]=n);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return t.extend(Object.create(null),this._previousAttributes)},fetch:function(e){e=e?t.extend({},e):{},void 0===e.parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){return n.set(n.parse(t,e),e)?(i&&i(n,t,e),n.trigger("sync",n,t,e),void 0):!1},l(this,e),this.sync("read",this,e)},save:function(e,n,i){var r,s,o,a=this.attributes;if(null==e||"object"==typeof e?(r=e,i=n):(r={})[e]=n,i=t.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=t.extend(Object.create(null),a,r)),void 0===i.parse&&(i.parse=!0);var c=this,u=i.success;return i.success=function(e){c.attributes=a;var n=c.parse(e,i);return i.wait&&(n=t.extend(r||{},n)),n&&"object"==typeof n&&!c.set(n,i)?!1:(u&&u(c,e,i),c.trigger("sync",c,e,i),void 0)},l(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=r),o=this.sync(s,this,i),r&&i.wait&&(this.attributes=a),o},destroy:function(e){e=e?t.extend({},e):{};var n=this,i=e.success,r=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(t){(e.wait||n.isNew())&&r(),i&&i(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;l(this,e);var s=this.sync("delete",this,e);return e.wait||r(),s},url:function(){var e=t.result(this,"urlRoot")||t.result(this.collection,"url")||c();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},t.extend(e||{},{validate:!0}))},_validate:function(e,n){if(!n.validate||!this.validate)return!0;e=t.extend(Object.create(null),this.attributes,e);var i=this.validationError=this.validate(e,n)||null;return i?(this.trigger("invalid",this,i,t.extend(n,{validationError:i})),!1):!0}}),t.keys){var b=["keys","values","pairs","invert","pick","omit"];b.forEach(function(e){y.prototype[e]=function(){var n=a.call(arguments);return n.unshift(this.attributes),t[e].apply(t,n)}})}var _=n.Collection=function(e,n){n||(n={}),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,t.extend({silent:!0},n))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1};if(t.extend(_.prototype,f,{model:"undefined"==typeof y?null:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return n.sync.apply(this,arguments)},add:function(e,n){return this.set(e,t.extend({merge:!1},n,x))},remove:function(t,e){var n=!Array.isArray(t);t=n?[t]:t.slice(),e||(e={});var i,r,s,o;for(i=0,r=t.length;r>i;i++)o=t[i]=this.get(t[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,e.silent||(e.index=s,o.trigger("remove",o,this,e)),this._removeReference(o));return n?t[0]:t},set:function(e,n){n=t.defaults({},n,w),n.parse&&(e=this.parse(e,n));var i=!Array.isArray(e);e=i?e?[e]:[]:e.slice();var r,s,o,a,c,l,u,h=n.at,d=this.model,f=this.comparator&&null==h&&n.sort!==!1,p="string"==typeof this.comparator?this.comparator:null,g=[],v=[],m={},b=n.add,_=n.merge,x=n.remove,E=!f&&b&&x?[]:!1;for(r=0,s=e.length;s>r;r++){if(c=e[r],o=c instanceof y?a=c:c[d.prototype.idAttribute],l=this.get(o))x&&(m[l.cid]=!0),_&&(c=c===a?a.attributes:c,n.parse&&(c=l.parse(c,n)),l.set(c,n),f&&!u&&l.hasChanged(p)&&(u=!0)),e[r]=l;else if(b){if(a=e[r]=this._prepareModel(c,n),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}E&&E.push(l||a)}if(x){for(r=0,s=this.length;s>r;++r)m[(a=this.models[r]).cid]||v.push(a);v.length&&this.remove(v,n)}if(g.length||E&&E.length)if(f&&(u=!0),this.length+=g.length,null!=h)for(r=0,s=g.length;s>r;r++)this.models.splice(h+r,0,g[r]);else{E&&(this.models.length=0);var S=E||g;for(r=0,s=S.length;s>r;r++)this.models.push(S[r])}if(u&&this.sort({silent:!0}),!n.silent){for(r=0,s=g.length;s>r;r++)(a=g[r]).trigger("add",a,this,n);(u||E&&E.length)&&this.trigger("sort",this,n)}return i?e[0]:e},reset:function(e,n){n||(n={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i]);return n.previousModels=this.models,this._reset(),e=this.add(e,t.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),e},push:function(e,n){return this.add(e,t.extend({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(e,n){return this.add(e,t.extend({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return t&&Object.keys(t).length?this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0}):e?void 0:[]},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.models.map(function(e){return e.get(t)})},fetch:function(e){e=e?t.extend({},e):{},void 0===e.parse&&(e.parse=!0);var n=e.success,i=this;return e.success=function(t){var r=e.reset?"reset":"set";i[r](t,e),n&&n(i,t,e),i.trigger("sync",i,t,e)},l(this,e),this.sync("read",this,e)},create:function(e,n){if(n=n?t.extend({},n):{},!(e=this._prepareModel(e,n)))return!1;n.wait||this.add(e,n);var i=this,r=n.success;return n.success=function(t,e,n){n.wait&&i.add(t,n),r&&r(t,e,n)},e.save(null,n),e},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,n){if(e instanceof _.prototype.model)return e.collection||(e.collection=this),e;n=n?t.extend({},n):{},n.collection=this;var i=new this.model(e,n);return i.validationError?(this.trigger("invalid",this,i.validationError,n),!1):i},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),t.each){var E=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];E.forEach(function(e){_.prototype[e]=function(){var n=a.call(arguments);return n.unshift(this.models),t[e].apply(t,n)}});var S=["groupBy","countBy","sortBy"];S.forEach(function(e){_.prototype[e]=function(n,i){var r="function"==typeof n?n:function(t){return t.get(n)};return t[e](this.models,r,i)}})}else["forEach","map","filter","some","every","reduce","reduceRight","indexOf","lastIndexOf"].forEach(function(t){var e=Array.prototype[t];_.prototype[t]=function(t,n){return e.call(this.models,t,n)}}),["sortBy"].forEach(function(e){_.prototype[e]=function(n,i){var r="function"==typeof n?n:function(t){return t.get(n)};return t[e](this.models,r,i)}});var k=/^(\S+)\s*(.*)$/,j=["model","collection","el","id","attributes","className","tagName","events"],T=n.View=function(e){this.cid=t.uniqueId("view"),e&&Object.keys(e).forEach(function(t){-1!==j.indexOf(t)&&(this[t]=e[t])},this),this._handlers=[],this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};t.extend(T.prototype,f,{tagName:"div",$:function(t){return n.$?this.$el.find(t):this.findAll(t)},find:function(t){return this.el.querySelector(t)},findAll:function(t){return a.call(this.el.querySelectorAll(t))},initialize:function(){},render:function(){return this},remove:function(){return n.$?this.$el.remove():this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.stopListening(),this},setElement:function(t,e){if(n.$)this.$el&&this.undelegateEvents(),this.$el=t instanceof n.$?t:n.$(t),this.el=this.$el[0];else{this.el&&this.undelegateEvents();var i="string"==typeof t?document.querySelector(t):t;this.el=i}return e!==!1&&this.delegateEvents(),this},delegate:function(t,e,n){if("function"==typeof e&&(n=e,e=null),"function"!=typeof n)throw new TypeError("View#delegate expects callback function");var i=this.el,r=n.bind(this),o=e?function(t){for(var n=t.target;n&&n!==i;n=n.parentNode)if(s.matchesSelector(n,e))return t.delegateTarget=n,r(t)}:r;return i.addEventListener(t,o,!1),this._handlers.push({eventName:t,selector:e,callback:n,handler:o}),o},undelegate:function(t,e,n){"function"==typeof e&&(n=e,e=null);var i=this.el,r=this._handlers,s=function(t){i.removeEventListener(t.eventName,t.handler,!1)};t||e||n?r.filter(function(i){return i.eventName===t&&(n?i.callback===n:!0)&&(e?i.selector===e:!0)}).forEach(function(t){s(t),r.splice(r.indexOf(t),1)}):(r.forEach(s),this._handlers=[])},delegateEvents:function(e,i){if(!e&&!(e=t.result(this,"events")))return this;i||this.undelegateEvents();for(var r in e){var s=e[r];"function"!=typeof s&&(s=this[e[r]]);var o=r.match(k),a=o[1],c=o[2];n.$?(a+=".delegateEvents"+this.cid,s=s.bind(this),this.$el.on(a,c?c:null,s)):this.delegate(a,c,s)}return this},undelegateEvents:function(){return n.$?this.$el.off(".delegateEvents"+this.cid):this.undelegate(),this},_ensureElement:function(){if(this.el)this.setElement(t.result(this,"el"),!1);else{var e=t.extend({},t.result(this,"attributes"));this.id&&(e.id=t.result(this,"id")),this.className&&(e.className=t.result(this,"className")),e["class"]&&(e.className=e["class"]);var n=t.extend(document.createElement(t.result(this,"tagName")),e);this.setElement(n,!1)}}}),n.sync=function(e,i,r){var s=O[e];t.defaults(r||(r={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=t.result(i,"url")||c()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var l=r.xhr=n.ajax(t.extend(o,r));return i.trigger("request",i,l,r),l};var O={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var A=n.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,C=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g,L=function(t){return t?"object"==typeof t&&"[object RegExp]"===toString.call(t):!1};t.extend(A.prototype,f,{initialize:function(){},route:function(t,e,i){L(t)||(t=this._routeToRegExp(t)),"function"==typeof e&&(i=e,e=""),i||(i=this[e]);var r=this;return n.history.route(t,function(s){var o=r._extractParameters(t,s);i&&i.apply(r,o),r.trigger.apply(r,["route:"+e].concat(o)),r.trigger("route",e,o),n.history.trigger("route",r,e,o)}),this},navigate:function(t,e){return n.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=t.result(this,"routes");for(var e,n=Object.keys(this.routes);null!=(e=n.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(N,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return n.map(function(t){return t?decodeURIComponent(t):null})}});var R=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},H=/^[#\/]|\s+$/g,q=/^\/+|\/+$/g,P=/\/$/,M=/[#].*$/;return R.started=!1,t.extend(R.prototype,f,{getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t){if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=this.location.pathname+this.location.search;var e=this.root.replace(P,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(H,"")},start:function(e){if(R.started)throw new Error("Backbone.history has already been started");R.started=!0,this.options=t.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var n=this.getFragment();this.root=("/"+this.root+"/").replace(q,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=n;var i=this.location,r=i.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&r&&i.hash&&(this.fragment=this.getHash().replace(H,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl()},stop:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment?!1:(this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!R.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(M,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),y.extend=_.extend=A.extend=T.extend=R.extend=n.extend,t.extend(n,f),n.history=new R,n}),function(t){var e={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},n=/(.)^/,i={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},o=new RegExp("[&<>\"']","g"),a=function(t){return null==t?"":(""+t).replace(o,function(t){return s[t]})},c=0,l=function(t,s){var o,l=new RegExp([(e.escape||n).source,(e.interpolate||n).source,(e.evaluate||n).source].join("|")+"|$","g"),u=0,h="__p+='";t.replace(l,function(e,n,s,o,a){return h+=t.slice(u,a).replace(r,function(t){return"\\"+i[t]}),n&&(h+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),s&&(h+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(h+="';\n"+o+"\n__p+='"),u=a+e.length,e}),h+="';\n",e.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n//# sourceURL=/microtemplates/source["+c++ +"]";try{o=new Function(e.variable||"obj","escapeExpr",h)}catch(d){throw d.source=h,d}if(s)return o(s,a);var f=function(t){return o.call(this,t,a)};return f.source="function("+(e.variable||"obj")+"){\n"+h+"}",f};l.settings=e,"undefined"!=typeof define&&define.amd?define([],function(){return l}):"undefined"!=typeof module&&module.exports?module.exports=l:t.microtemplate=l}(this),function(t,e){"object"==typeof exports&&"function"==typeof require?module.exports=e(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(n){return e(n||t.Backbone)}):e(Backbone)}(this,function(t){function e(){return(0|65536*(1+Math.random())).toString(16).substring(1)}function n(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(t){for(var e=t.length;e--;)if(t[e]===obj)return!0;return!1}function r(t,e){for(var n in e)t[n]=e[n];return t}return t.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},r(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t));var e=t.id.toString();return i(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){for(var t,e,n=[],i=0;i<this.records.length;i++)t=this.records[i],e=this.jsonData(this.localStorage().getItem(this.name+"-"+t)),null!=e&&n.push(e);return n},destroy:function(t){if(t.isNew())return!1;this.localStorage().removeItem(this.name+"-"+t.id);for(var e=t.id.toString(),n=0;n<this.records.length;n++)this.records[n]===e&&this.records.splice(n,1);return this.save(),t},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var n in t)e.test(n)&&t.removeItem(n);this.records.length=0},_storageSize:function(){return this.localStorage().length}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,n,i){var r,s,o=n.localStorage||n.collection.localStorage,a=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":r=void 0!=n.id?o.find(n):o.findAll();break;case"create":r=o.create(n);break;case"update":r=o.update(n);break;case"delete":r=o.destroy(n)}}catch(c){s=22===c.code&&0===o._storageSize()?"Private browsing is unsupported":c.message}return r?(i&&i.success&&("0.9.10"===t.VERSION?i.success(n,r,i):i.success(r)),a&&a.resolve(r)):(s=s?s:"Record Not Found",i&&i.error&&("0.9.10"===t.VERSION?i.error(n,s,i):i.error(s)),a&&a.reject(s)),i&&i.complete&&i.complete(r),a&&a.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,n,i){return t.getSyncMethod(n).apply(this,[e,n,i])},t.LocalStorage});var app=app||{};!function(){"use strict";app.Todo=Backbone.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}})}();var app=app||{};!function(){"use strict";var t=Backbone.Collection.extend({model:app.Todo,localStorage:new Backbone.LocalStorage("todos-exoskeleton"),completed:function(){return this.filter(function(t){return t.get("completed")})},remaining:function(){return this.filter(function(t){return!t.get("completed")})},nextOrder:function(){return this.length?this.at(this.length-1).get("order")+1:1},comparator:function(t){return t.get("order")}});app.todos=new t}();var app=app||{};!function(){"use strict";app.TodoView=Backbone.View.extend({tagName:"li",template:microtemplate(document.querySelector("#item-template").innerHTML),events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keyup .edit":"handleKey","focusout .edit":"close"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){this.el.innerHTML=this.template(this.model.toJSON());var t=this.model.get("completed")?"add":"remove";return this.el.classList[t]("completed"),this.toggleVisible(),this.input=this.find(".edit"),this},toggleVisible:function(){this.el.classList[this.isHidden()?"add":"remove"]("hidden")},isHidden:function(){var t=this.model.get("completed");return!t&&"completed"===app.TodoFilter||t&&"active"===app.TodoFilter},toggleCompleted:function(){this.model.toggle()},edit:function(){this.el.classList.add("editing"),this.input.focus(),this.input.value=this.input.value},close:function(t,e){var n=e?this.model.get("title"):this.input.value.trim();this.input.value=n,n?this.model.save({title:n}):this.clear(),this.el.classList.remove("editing")},handleKey:function(t){t.which===ENTER_KEY?this.close():t.which===ESCAPE_KEY&&this.close(null,!0)},clear:function(){this.model.destroy()}})}();var app=app||{};!function(){"use strict";var t=function(t,e){t.style.display=e?"":"none"};app.AppView=Backbone.View.extend({el:"#todoapp",statsTemplate:microtemplate(document.querySelector("#stats-template").innerHTML),events:{"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete"},initialize:function(){this.allCheckbox=this.find("#toggle-all"),this.input=this.find("#new-todo"),this.footer=this.find("#footer"),this.main=this.find("#main"),this.listenTo(app.todos,"add",this.addOne),this.listenTo(app.todos,"reset",this.addAll),this.listenTo(app.todos,"change:completed",this.filterOne),this.listenTo(app.todos,"filter",this.filterAll),this.listenTo(app.todos,"all",this.render),app.todos.fetch({reset:!0})},render:function(){var e=app.todos.completed().length,n=app.todos.remaining().length,i='[href="#/'+(app.TodoFilter||"")+'"]';app.todos.length?(t(this.main,!0),t(this.footer,!0),this.footer.innerHTML=this.statsTemplate({completed:e,remaining:n}),this.findAll("#filters li a").forEach(function(t){t.classList.remove("selected"),Backbone.utils.matchesSelector(t,i)&&t.classList.add("selected")})):(t(this.main,!1),t(this.footer,!1)),this.allCheckbox.checked=!n},addOne:function(t){var e=new app.TodoView({model:t});document.querySelector("#todo-list").appendChild(e.render().el)},addAll:function(){this.find("#todo-list").innerHTML="",app.todos.forEach(this.addOne,this)},filterOne:function(t){t.trigger("visible")},filterAll:function(){app.todos.forEach(this.filterOne,this)},newAttributes:function(){return{title:this.input.value.trim(),order:app.todos.nextOrder(),completed:!1}},createOnEnter:function(t){t.which===ENTER_KEY&&this.input.value.trim()&&(app.todos.create(this.newAttributes()),this.input.value="")},clearCompleted:function(){return app.todos.completed().forEach(function(t){t.destroy()}),!1},toggleAllComplete:function(){var t=this.allCheckbox.checked;app.todos.forEach(function(e){e.save({completed:t})})}})}();var app=app||{};!function(){"use strict";var t=Backbone.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(t){app.TodoFilter=t||"",app.todos.trigger("filter")}});app.TodoRouter=new t,Backbone.history.start()}();var app=app||{},ENTER_KEY=13,ESCAPE_KEY=27;document.addEventListener("DOMContentLoaded",function(){"use strict";new app.AppView},!1);