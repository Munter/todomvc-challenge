!function(){"use strict";function e(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function t(){var e;return[/labs/,/\w*-examples/].forEach(function(t){var n=location.href.match(t);!e&&n&&(e=location.href.indexOf(n))}),location.href.substr(0,e)}function n(e,n){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var r=new XMLHttpRequest;r.open("GET",t()+e,!0),r.send(),r.onload=function(){200===r.status&&n&&n(r.responseText)}}function r(e,t){if(!(this instanceof r))return new r(e,t);var n,i;if("object"!=typeof e)try{e=JSON.parse(e)}catch(o){return}t&&(n=t.template,i=t.framework),!n&&e.templates&&(n=e.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").getAttribute("data-framework")),n&&e[i]&&(this.frameworkJSON=e[i],this.template=n,this.append())}var i=function(e){e.defaults=function(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var i in r)null==e[i]&&(e[i]=r[i])}return e},e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g;return e.template=function(i,o,a){var s;a=e.defaults({},a,e.templateSettings);var l=new RegExp([(a.escape||t).source,(a.interpolate||t).source,(a.evaluate||t).source].join("|")+"|$","g"),u=0,c="__p+='";i.replace(l,function(e,t,o,a,s){return c+=i.slice(u,s).replace(r,function(e){return"\\"+n[e]}),t&&(c+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),o&&(c+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),a&&(c+="';\n"+a+"\n__p+='"),u=s+e.length,e}),c+="';\n",a.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{s=new Function(a.variable||"obj","_",c)}catch(d){throw d.source=c,d}if(o)return s(o,e);var h=function(t){return s.call(this,t,e)};return h.source="function("+(a.variable||"obj")+"){\n"+c+"}",h},e}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(e,t){var n=e.createElement(t),r=e.getElementsByTagName(t)[0];n.src="//www.google-analytics.com/ga.js",r.parentNode.insertBefore(n,r)}(document,"script")),r.prototype.append=function(){var e=document.createElement("aside");e.innerHTML=i.template(this.template,this.frameworkJSON),e.className="learn";var n=e.querySelectorAll(".demo-link");Array.prototype.forEach.call(n,function(e){e.setAttribute("href",t()+e.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",e.outerHTML)},e(),n("learn.json",r)}(),function(e){function t(){return""===u.hash||"#"===u.hash}function n(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n,e)===!1)return}function r(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t}function i(e,t,n){if(!e.length)return n();var r=0;!function i(){t(e[r],function(t){t||t===!1?(n(t),n=function(){}):(r+=1,r===e.length?n():i())})}()}function o(e,t,n){n=e;for(var r in t)if(t.hasOwnProperty(r)&&(n=t[r](e),n!==e))break;return n===e?"([._a-zA-Z0-9-]+)":n}function a(e,t){for(var n,r=0,i="";n=e.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=e.substr(0,n.index)+n[0];e=i+=e.substr(r);var a,s=e.match(/:([^\/]+)/gi);if(s){a=s.length;for(var l=0;a>l;l++)e=e.replace(s[l],o(s[l],t))}return e}function l(e,t,n,r){var i,o=0,a=0,s=0,n=(n||"(").toString(),r=(r||")").toString();for(i=0;i<e.length;i++){var l=e[i];if(l.indexOf(n,o)>l.indexOf(r,o)||~l.indexOf(n,o)&&!~l.indexOf(r,o)||!~l.indexOf(n,o)&&~l.indexOf(r,o)){if(a=l.indexOf(n,o),s=l.indexOf(r,o),~a&&!~s||!~a&&~s){var u=e.slice(0,(i||1)+1).join(t);e=[u].concat(e.slice((i||1)+1))}o=(s>a?s:a)+1,i=0}else o=0}return e}Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n,r=[],i=0,o=this.length;o>i;i++)i in this&&e.call(t,n=this[i],i,this)&&r.push(n);return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var u=document.location,c={mode:"modern",hash:u.hash,history:!1,check:function(){var e=u.hash;e!=this.hash&&(this.hash=e,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(e,t){function n(e){for(var t=0,n=d.listeners.length;n>t;t++)d.listeners[t](e)}var r=this;if(this.history=t,d.listeners||(d.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&r.check()}),window.setInterval(function(){r.check()},50),this.onHashChanged=n,this.mode="legacy"}return d.listeners.push(e),this.mode},destroy:function(e){if(d&&d.listeners)for(var t=d.listeners,n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},setHash:function(e){return"legacy"===this.mode&&this.writeFrame(e),this.history===!0?(window.history.pushState({},document.title,e),this.fire()):u.hash="/"===e[0]?e:"/"+e,this},writeFrame:function(e){var t=document.getElementById("state-frame"),n=t.contentDocument||t.contentWindow.document;n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var e=this._hash;return e!=u.hash&&(u.hash=e),this},onHashChanged:function(){}},d=e.Router=function(e){return this instanceof d?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(e||{}),void 0):new d(e)};d.prototype.init=function(e){var n=this;if(this.handler=function(e){var t=e&&e.newURL||window.location.hash,r=n.history===!0?n.getPath():t.replace(/.*#/,"");n.dispatch("on",r)},c.init(this.handler,this.history),this.history===!1)t()&&e?u.hash=e:t()||n.dispatch("on",u.hash.replace(/^#/,""));else{var r=t()&&e?e:t()?null:u.hash.replace(/^#/,"");r&&window.history.replaceState({},document.title,r),(r||this.run_in_init===!0)&&this.handler()}return this},d.prototype.explode=function(){var e=this.history===!0?this.getPath():u.hash;return"/"===e.charAt(1)&&(e=e.slice(1)),e.slice(1,e.length).split("/")},d.prototype.setRoute=function(e,t,n){var r=this.explode();return"number"==typeof e&&"string"==typeof t?r[e]=t:"string"==typeof n?r.splice(e,t,s):r=[e],c.setHash(r.join("/")),r},d.prototype.insertEx=function(e,t,n,r){return"once"===e&&(e="on",n=function(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}(n)),this._insert(e,t,n,r)},d.prototype.getRoute=function(e){var t=e;if("number"==typeof e)t=this.explode()[e];else if("string"==typeof e){var n=this.explode();t=n.indexOf(e)}else t=this.explode();return t},d.prototype.destroy=function(){return c.destroy(this.handler),this},d.prototype.getPath=function(){var e=window.location.pathname;return"/"!==e.substr(0,1)&&(e="/"+e),e},d.prototype.configure=function(e){e=e||{};for(var t=0;t<this.methods.length;t++)this._methods[this.methods[t]]=!0;return this.recurse=e.recurse||this.recurse||!1,this.async=e.async||!1,this.delimiter=e.delimiter||"/",this.strict="undefined"==typeof e.strict?!0:e.strict,this.notfound=e.notfound,this.resource=e.resource,this.history=e.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&e.run_handler_in_init!==!1,this.every={after:e.after||null,before:e.before||null,on:e.on||null},this},d.prototype.param=function(e,t){":"!==e[0]&&(e=":"+e);var n=new RegExp(e,"g");this.params[e]=function(e){return e.replace(n,t.source||t)}},d.prototype.on=d.prototype.route=function(e,t,n){var r=this;return n||"function"!=typeof t||(n=t,t=e,e="on"),Array.isArray(t)?t.forEach(function(t){r.on(e,t,n)}):(t.source&&(t=t.source.replace(/\\\//gi,"/")),Array.isArray(e)?e.forEach(function(e){r.on(e.toLowerCase(),t,n)}):(t=t.split(new RegExp(this.delimiter)),t=l(t,this.delimiter),this.insert(e,this.scope.concat(t),n),void 0))},d.prototype.dispatch=function(e,t,n){function r(){o.last=a.after,o.invoke(o.runlist(a),o,n)}var i,o=this,a=this.traverse(e,t,this.routes,""),s=this._invoked;return this._invoked=!0,a&&0!==a.length?("forward"===this.recurse&&(a=a.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&s?(this.async?this.invoke(i,this,r):(this.invoke(i,this),r()),!0):(r(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:e,path:t},n),!1)},d.prototype.invoke=function(e,t,r){var o=this;this.async?i(e,function a(n,r){return Array.isArray(n)?i(n,a,r):("function"==typeof n&&n.apply(t,e.captures.concat(r)),void 0)},function(){r&&r.apply(t,arguments)}):n(e,function s(r){return Array.isArray(r)?n(r,s):"function"==typeof r?r.apply(t,e.captures||[]):("string"==typeof r&&o.resource&&o.resource[r].apply(t,e.captures||[]),void 0)})},d.prototype.traverse=function(e,t,n,r,i){function o(e){function t(e){for(var n=[],r=0;r<e.length;r++)n[r]=Array.isArray(e[r])?t(e[r]):e[r];return n}function n(e){for(var t=e.length-1;t>=0;t--)Array.isArray(e[t])?(n(e[t]),0===e[t].length&&e.splice(t,1)):i(e[t])||e.splice(t,1)}if(!i)return e;var r=t(e);return r.matched=e.matched,r.captures=e.captures,r.after=e.after.filter(i),n(r),r}var a,s,l,u,c=[];if(t===this.delimiter&&n[e])return u=[[n.before,n[e]].filter(Boolean)],u.after=[n.after].filter(Boolean),u.matched=!0,u.captures=[],o(u);for(var d in n)if(n.hasOwnProperty(d)&&(!this._methods[d]||this._methods[d]&&"object"==typeof n[d]&&!Array.isArray(n[d]))){if(a=s=r+this.delimiter+d,this.strict||(s+="["+this.delimiter+"]?"),l=t.match(new RegExp("^"+s)),!l)continue;if(l[0]&&l[0]==t&&n[d][e])return u=[[n[d].before,n[d][e]].filter(Boolean)],u.after=[n[d].after].filter(Boolean),u.matched=!0,u.captures=l.slice(1),this.recurse&&n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean))),o(u);if(u=this.traverse(e,t,n[d],a),u.matched)return u.length>0&&(c=c.concat(u)),this.recurse&&(c.push([n[d].before,n[d].on].filter(Boolean)),u.after=u.after.concat([n[d].after].filter(Boolean)),n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean)))),c.matched=!0,c.captures=u.captures,c.after=u.after,o(c)}return!1},d.prototype.insert=function(e,t,n,r){var i,o,s,l,u;if(t=t.filter(function(e){return e&&e.length>0}),r=r||this.routes,u=t.shift(),/\:|\*/.test(u)&&!/\\d|\\w/.test(u)&&(u=a(u,this.params)),t.length>0)return r[u]=r[u]||{},this.insert(e,t,n,r[u]);if(u||t.length||r!==this.routes){if(o=typeof r[u],s=Array.isArray(r[u]),r[u]&&!s&&"object"==o)switch(i=typeof r[u][e]){case"function":return r[u][e]=[r[u][e],n],void 0;case"object":return r[u][e].push(n),void 0;case"undefined":return r[u][e]=n,void 0}else if("undefined"==o)return l={},l[e]=n,r[u]=l,void 0;throw new Error("Invalid route context: "+o)}switch(i=typeof r[e]){case"function":return r[e]=[r[e],n],void 0;case"object":return r[e].push(n),void 0;case"undefined":return r[e]=n,void 0}},d.prototype.extend=function(e){function t(e){r._methods[e]=!0,r[e]=function(){var t=1===arguments.length?[e,""]:[e];r.on.apply(r,t.concat(Array.prototype.slice.call(arguments)))}}var n,r=this,i=e.length;for(n=0;i>n;n++)t(e[n])},d.prototype.runlist=function(e){var t=this.every&&this.every.before?[this.every.before].concat(r(e)):r(e);return this.every&&this.every.on&&t.push(this.every.on),t.captures=e.captures,t.source=e.source,t},d.prototype.mount=function(e,t){function n(t,n){var i=t,o=t.split(r.delimiter),a=typeof e[t],s=""===o[0]||!r._methods[o[0]],u=s?"on":i;return s&&(i=i.slice((i.match(new RegExp(r.delimiter))||[""])[0].length),o.shift()),s&&"object"===a&&!Array.isArray(e[t])?(n=n.concat(o),r.mount(e[t],n),void 0):(s&&(n=n.concat(i.split(r.delimiter)),n=l(n,r.delimiter)),r.insert(u,n,e[t]),void 0)}if(e&&"object"==typeof e&&!Array.isArray(e)){var r=this;t=t||[],Array.isArray(t)||(t=t.split(r.delimiter));for(var i in e)e.hasOwnProperty(i)&&n(i,t.slice(0))}}}("object"==typeof exports?exports:window),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function n(e,t,n){this.name=e,this.body=t,this.type=n}function r(){}function i(){}function o(){this.subCommands=[],this.initializeMacroCommand()}function a(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw new Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function u(e){if(null!=u.instanceMap[e])throw new Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw new Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function d(e){if(null!=d.instanceMap[e])throw new Error(d.MULTITON_MSG);this.multitonKey=e,d.instanceMap[this.multitonKey]=this,this.commandMap=new Array,this.initializeController()}function h(e,t,n){for(var r,i,o=e.split("."),a=n||p.global,s=0,l=o.length;l>s;s++)r=a,i=o[s],a=null==a[i]?a[i]={}:a[i];return null==t?a:r[i]=t}function f(e,t,n){e||(e={});var r,i,o=e.name,a=e.parent,s="function"==typeof a,l=e.scope||null;if("parent"in e&&!s)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(r=e.constructor,"function"!=typeof r)throw new TypeError("Class constructor must be Function")}else r=s?function(){a.apply(this,arguments)}:new Function;if(s&&p.extend(r,a),t&&(i=r.prototype,p.decorate(i,t),i.constructor=r),n&&p.decorate(r,n),o){if("string"!=typeof o)throw new TypeError("Class name must be primitive string");h(o,r,l)}return r}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,n.prototype.getName=function(){return this.name},n.prototype.setBody=function(e){this.body=e},n.prototype.getBody=function(){return this.body},n.prototype.setType=function(e){this.type=e},n.prototype.getType=function(){return this.type},n.prototype.toString=function(){var e="Notification Name: "+this.getName();return e+="\nBody:"+(null==this.body?"null":this.body.toString()),e+="\nType:"+(null==this.type?"null":this.type)},n.prototype.name=null,n.prototype.type=null,n.prototype.body=null,r.prototype.sendNotification=function(e,t,n){var r=this.getFacade();r&&r.sendNotification(e,t,n)},r.prototype.facade,r.prototype.initializeNotifier=function(e){this.multitonKey=String(e),this.facade=this.getFacade()},r.prototype.getFacade=function(){if(null==this.multitonKey)throw new Error(r.MULTITON_MSG);return l.getInstance(this.multitonKey)},r.prototype.multitonKey=null,r.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",i.prototype=new r,i.prototype.constructor=i,i.prototype.execute=function(){},o.prototype=new r,o.prototype.constructor=o,o.prototype.subCommands=null,o.prototype.initializeMacroCommand=function(){},o.prototype.addSubCommand=function(e){this.subCommands.push(e)},o.prototype.execute=function(e){for(;this.subCommands.length>0;){var t=this.subCommands.shift(),n=new t;n.initializeNotifier(this.multitonKey),n.execute(e)}},a.NAME="Mediator",a.prototype=new r,a.prototype.constructor=a,a.prototype.getMediatorName=function(){return this.mediatorName},a.prototype.setViewComponent=function(e){this.viewComponent=e},a.prototype.getViewComponent=function(){return this.viewComponent},a.prototype.listNotificationInterests=function(){return[]},a.prototype.handleNotification=function(){},a.prototype.onRegister=function(){},a.prototype.onRemove=function(){},a.prototype.mediatorName=null,a.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new r,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=d.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=u.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,r){this.notifyObservers(new n(e,t,r))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),u.removeView(e),d.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",u.prototype.initializeView=function(){},u.getInstance=function(e){return null==e?null:(null==u.instanceMap[e]&&(u.instanceMap[e]=new u(e)),u.instanceMap[e])},u.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},u.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,n=this.observerMap[e.getName()],r=[],i=0;i<n.length;i++)t=n[i],r.push(t);for(var i=0;i<r.length;i++)t=r[i],t.notifyObserver(e)}},u.prototype.removeObserver=function(e,t){for(var n=this.observerMap[e],r=0;r<n.length;r++)if(1==n[r].compareNotifyContext(t)){n.splice(r,1);break}0==n.length&&delete this.observerMap[e]},u.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var n=e.listNotificationInterests();if(n.length>0)for(var r=new t(e.handleNotification,e),i=0;i<n.length;i++)this.registerObserver(n[i],r);e.onRegister()}},u.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},u.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var n=t.listNotificationInterests(),r=0;r<n.length;r++)this.removeObserver(n[r],t);delete this.mediatorMap[e],t.onRemove()}return t},u.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},u.removeView=function(e){delete u.instanceMap[e]},u.prototype.mediatorMap=null,u.prototype.observerMap=null,u.instanceMap=[],u.prototype.multitonKey=null,u.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.prototype.multitonKey,c.MULTITON_MSG="Model instance for this Multiton key already constructed!",d.prototype.initializeController=function(){this.view=u.getInstance(this.multitonKey)},d.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},d.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];if(null!=t){var n=new t;n.initializeNotifier(this.multitonKey),n.execute(e)}},d.prototype.registerCommand=function(e,n){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=n},d.prototype.hasCommand=function(e){return null!=this.commandMap[e]},d.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},d.removeController=function(e){delete this.instanceMap[e]},d.prototype.view=null,d.prototype.commandMap=null,d.prototype.multitonKey=null,d.instanceMap=[],d.MULTITON_MSG="controller key for this Multiton key already constructed";var p={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var n=new Function;return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},decorate:function(e,t){for(var n in t)e[n]=t[n];return e}};e.puremvc={View:u,Model:c,Controller:d,SimpleCommand:i,MacroCommand:o,Facade:l,Mediator:a,Observer:t,Notification:n,Notifier:r,Proxy:s,define:f,declare:h}}}(this),puremvc.define({name:"todomvc.AppConstants"},{},{CORE_NAME:"TodoMVC",STARTUP:"startup",ADD_TODO:"add_todo",DELETE_TODO:"delete_todo",UPDATE_TODO:"update_todo",TOGGLE_TODO_STATUS:"toggle_todo_status",REMOVE_TODOS_COMPLETED:"remove_todos_completed",FILTER_TODOS:"filter_todos",TODOS_FILTERED:"todos_filtered",FILTER_ALL:"all",FILTER_ACTIVE:"active",FILTER_COMPLETED:"completed"}),puremvc.define({name:"todomvc.model.proxy.TodoProxy",parent:puremvc.Proxy},{todos:[],stats:{},filter:todomvc.AppConstants.FILTER_ALL,LOCAL_STORAGE:"todos-puremvc",onRegister:function(){this.loadData()},loadData:function(){var e;localStorage.getItem(this.LOCAL_STORAGE)||this.saveData(),e=JSON.parse(localStorage.getItem(this.LOCAL_STORAGE)),this.todos=e.todos,this.filter=e.filter,this.computeStats()},saveData:function(){var e={todos:this.todos,filter:this.filter};localStorage.setItem(this.LOCAL_STORAGE,JSON.stringify(e))},computeStats:function(){this.stats.totalTodo=this.todos.length,this.stats.todoCompleted=this.getCompletedCount(),this.stats.todoLeft=this.stats.totalTodo-this.stats.todoCompleted},filterTodos:function(e){var t;for(this.filter=e,this.saveData(),t=this.todos.length,filtered=[];t--;)e===todomvc.AppConstants.FILTER_ALL?filtered.push(this.todos[t]):this.todos[t].completed===!0&&e===todomvc.AppConstants.FILTER_COMPLETED?filtered.push(this.todos[t]):this.todos[t].completed===!1&&e===todomvc.AppConstants.FILTER_ACTIVE&&filtered.push(this.todos[t]);this.sendNotification(todomvc.AppConstants.TODOS_FILTERED,{todos:filtered,stats:this.stats,filter:this.filter})},todosModified:function(){this.computeStats(),this.filterTodos(this.filter)},removeTodosCompleted:function(){for(var e=this.todos.length;e--;)this.todos[e].completed&&this.todos.splice(e,1);this.todosModified()},deleteTodo:function(e){for(var t=this.todos.length;t--;)this.todos[t].id===e&&this.todos.splice(t,1);this.todosModified()},toggleCompleteStatus:function(e){for(var t=this.todos.length;t--;)this.todos[t].completed=e;this.todosModified()},updateTodo:function(e){for(var t=this.todos.length;t--;)this.todos[t].id===e.id&&(this.todos[t].title=e.title,this.todos[t].completed=e.completed);this.todosModified()},addTodo:function(e){e.id=this.getUuid(),this.todos.push(e),this.todosModified()},getCompletedCount:function(){for(var e=this.todos.length,t=0;e--;)this.todos[e].completed&&t++;return t},getUuid:function(){var e,t,n="";for(e=0;32>e;e++)t=0|16*Math.random(),(8===e||12===e||16===e||20===e)&&(n+="-"),n+=(12===e?4:16===e?8|3&t:t).toString(16);return n}},{NAME:"TodoProxy"}),puremvc.define({name:"todomvc.view.event.AppEvents"},{},{TOGGLE_COMPLETE_ALL:"toggle_complete_all",TOGGLE_COMPLETE:"toggle_complete",CLEAR_COMPLETED:"clear_completed",DELETE_ITEM:"delete_item",UPDATE_ITEM:"update_item",ADD_ITEM:"add_item",createEvent:function(e){var t;return document.createEvent?(t=document.createEvent("Events"),t.initEvent(e,!1,!1)):document.createEventObject&&(t=document.createEventObject()),t},addEventListener:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent(t,n)},dispatchEvent:function(e,t){e.dispatchEvent?e.dispatchEvent(t):e.fireEvent&&e.fireEvent(t.type,t)}}),puremvc.define({name:"todomvc.view.component.TodoForm",constructor:function(){this.todos=[],this.stats={},this.filter="",this.todoApp=document.querySelector("#todoapp"),this.main=this.todoApp.querySelector("#main"),this.toggleAllCheckbox=this.todoApp.querySelector("#toggle-all"),this.newTodoField=this.todoApp.querySelector("#new-todo"),this.todoList=this.todoApp.querySelector("#todo-list"),this.footer=this.todoApp.querySelector("#footer"),this.todoCount=this.todoApp.querySelector("#todo-count"),this.clearButton=this.todoApp.querySelector("#clear-completed"),this.filters=this.todoApp.querySelector("#filters"),this.filterAll=this.filters.querySelector("#filterAll"),this.filterActive=this.filters.querySelector("#filterActive"),this.filterCompleted=this.filters.querySelector("#filterCompleted"),this.newTodoField.component=this,todomvc.view.event.AppEvents.addEventListener(this.newTodoField,"keypress",function(e){e.keyCode===this.component.ENTER_KEY&&this.value&&this.component.dispatchAddTodo(e)}),this.clearButton.component=this,todomvc.view.event.AppEvents.addEventListener(this.clearButton,"click",function(e){this.component.dispatchClearCompleted(e)}),this.toggleAllCheckbox.component=this,todomvc.view.event.AppEvents.addEventListener(this.toggleAllCheckbox,"change",function(e){this.component.dispatchToggleCompleteAll(e.target.checked)})}},{ENTER_KEY:13,addEventListener:function(e,t,n){todomvc.view.event.AppEvents.addEventListener(this.todoApp,e,t,n)},createEvent:function(e){return todomvc.view.event.AppEvents.createEvent(e)},dispatchEvent:function(e){todomvc.view.event.AppEvents.dispatchEvent(this.todoApp,e)},dispatchToggleComplete:function(e){var t,n;t=this.getTodoById(e.target.getAttribute("data-todo-id")),t.id=e.target.getAttribute("data-todo-id"),t.completed=e.target.checked,n=this.createEvent(todomvc.view.event.AppEvents.TOGGLE_COMPLETE),n.todo=t,this.dispatchEvent(n)},dispatchToggleCompleteAll:function(e){var t=this.createEvent(todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL);t.doToggleComplete=e,this.dispatchEvent(t)},dispatchClearCompleted:function(){var e=this.createEvent(todomvc.view.event.AppEvents.CLEAR_COMPLETED);this.dispatchEvent(e)},dispatchDelete:function(e){var t=this.createEvent(todomvc.view.event.AppEvents.DELETE_ITEM);t.todoId=e,this.dispatchEvent(t)},dispatchAddTodo:function(){var e,t={};t.completed=!1,t.title=this.newTodoField.value.trim(),""!==t.title&&(e=this.createEvent(todomvc.view.event.AppEvents.ADD_ITEM),e.todo=t,this.dispatchEvent(e))},dispatchUpdateTodo:function(e){var t,n,r={};r.id=e.target.id.slice(6),r.title=e.target.value.trim(),r.completed=e.target.completed,t=""===r.title?todomvc.view.event.AppEvents.DELETE_ITEM:todomvc.view.event.AppEvents.UPDATE_ITEM,n=this.createEvent(t),n.todo=r,n.todoId=r.id,this.dispatchEvent(n)},setFilteredTodoList:function(e){var t,n,r,i,o,a,s,l,u,c,a;for(this.todos=e.todos,this.stats=e.stats,this.filter=e.filter,this.main.style.display=this.stats.totalTodo?"block":"none",this.todoList.innerHTML="",this.newTodoField.value="",l=0;l<this.todos.length;l++)t=this.todos[l],n=document.createElement("input"),n.className="toggle",n.setAttribute("data-todo-id",t.id),n.type="checkbox",n.component=this,todomvc.view.event.AppEvents.addEventListener(n,"change",function(e){this.component.dispatchToggleComplete(e)}),r=document.createElement("label"),r.setAttribute("data-todo-id",t.id),r.appendChild(document.createTextNode(t.title)),i=document.createElement("button"),i.className="destroy",i.setAttribute("data-todo-id",t.id),i.component=this,todomvc.view.event.AppEvents.addEventListener(i,"click",function(e){this.component.dispatchDelete(e.target.getAttribute("data-todo-id"))}),o=document.createElement("div"),o.className="view",o.setAttribute("data-todo-id",t.id),o.appendChild(n),o.appendChild(r),o.appendChild(i),todomvc.view.event.AppEvents.addEventListener(o,"dblclick",function(){u=this.getAttribute("data-todo-id"),c=document.getElementById("li_"+u),a=document.getElementById("input_"+u),c.className="editing",a.focus()}),a=document.createElement("input"),a.id="input_"+t.id,a.className="edit",a.value=t.title,a.completed=t.completed,a.component=this,todomvc.view.event.AppEvents.addEventListener(a,"keypress",function(e){e.keyCode===this.component.ENTER_KEY&&this.component.dispatchUpdateTodo(e)}),todomvc.view.event.AppEvents.addEventListener(a,"blur",function(e){this.component.dispatchUpdateTodo(e)}),s=document.createElement("li"),s.id="li_"+t.id,s.appendChild(o),s.appendChild(a),t.completed&&(s.className+="completed",n.checked=!0),this.todoList.appendChild(s);this.footer.style.display=this.stats.totalTodo?"block":"none",this.updateToggleAllCheckbox(),this.updateClearButton(),this.updateTodoCount(),this.updateFilter()},getTodoById:function(e){var t;for(t=0;t<this.todos.length;t++)if(this.todos[t].id===e)return this.todos[t]},updateFilter:function(){this.filterAll.className=this.filter===todomvc.AppConstants.FILTER_ALL?"selected":"",this.filterActive.className=this.filter===todomvc.AppConstants.FILTER_ACTIVE?"selected":"",this.filterCompleted.className=this.filter===todomvc.AppConstants.FILTER_COMPLETED?"selected":""},updateToggleAllCheckbox:function(){var e,t=this.todos.length>0;for(e=0;e<this.todos.length;e++)if(this.todos[e].completed===!1){t=!1;break}this.toggleAllCheckbox.checked=t},updateClearButton:function(){this.clearButton.style.display=0===this.stats.todoCompleted?"none":"block",this.clearButton.innerHTML="Clear completed ("+this.stats.todoCompleted+")"},updateTodoCount:function(){var e=document.createElement("strong"),t=" "+(1===this.stats.todoLeft?"item":"items")+" left";e.innerHTML=this.stats.todoLeft,this.todoCount.innerHTML=null,this.todoCount.appendChild(e),this.todoCount.appendChild(document.createTextNode(t))}},{NAME:"TodoForm"}),puremvc.define({name:"todomvc.view.mediator.RoutesMediator",parent:puremvc.Mediator},{router:null,onRegister:function(){var e=this.facade.retrieveProxy(todomvc.model.proxy.TodoProxy.NAME),t=this.getRouteForFilter(e.filter),n={resource:this,notfound:this.handleFilterAll},r={"/":this.handleFilterAll,"/active":this.handleFilterActive,"/completed":this.handleFilterCompleted};
this.router=new Router(r).configure(n),this.router.init(t)},getRouteForFilter:function(e){var t;switch(e){case todomvc.AppConstants.FILTER_ALL:t="/";break;case todomvc.AppConstants.FILTER_ACTIVE:t="/active";break;case todomvc.AppConstants.FILTER_COMPLETED:t="/completed"}return t},handleFilterAll:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_ALL)},handleFilterActive:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_ACTIVE)},handleFilterCompleted:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_COMPLETED)}},{NAME:"RoutesMediator"}),puremvc.define({name:"todomvc.view.mediator.TodoFormMediator",parent:puremvc.Mediator},{listNotificationInterests:function(){return[todomvc.AppConstants.TODOS_FILTERED]},onRegister:function(){this.setViewComponent(new todomvc.view.component.TodoForm),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.TOGGLE_COMPLETE,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.UPDATE_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.DELETE_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.ADD_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.CLEAR_COMPLETED,this)},handleEvent:function(e){switch(e.type){case todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL:this.sendNotification(todomvc.AppConstants.TOGGLE_TODO_STATUS,e.doToggleComplete);break;case todomvc.view.event.AppEvents.DELETE_ITEM:this.sendNotification(todomvc.AppConstants.DELETE_TODO,e.todoId);break;case todomvc.view.event.AppEvents.ADD_ITEM:this.sendNotification(todomvc.AppConstants.ADD_TODO,e.todo);break;case todomvc.view.event.AppEvents.CLEAR_COMPLETED:this.sendNotification(todomvc.AppConstants.REMOVE_TODOS_COMPLETED);break;case todomvc.view.event.AppEvents.TOGGLE_COMPLETE:case todomvc.view.event.AppEvents.UPDATE_ITEM:this.sendNotification(todomvc.AppConstants.UPDATE_TODO,e.todo)}},handleNotification:function(e){switch(e.getName()){case todomvc.AppConstants.TODOS_FILTERED:this.viewComponent.setFilteredTodoList(e.getBody())}}},{NAME:"TodoFormMediator"}),puremvc.define({name:"todomvc.controller.command.StartupCommand",parent:puremvc.MacroCommand},{initializeMacroCommand:function(){this.addSubCommand(todomvc.controller.command.PrepControllerCommand),this.addSubCommand(todomvc.controller.command.PrepModelCommand),this.addSubCommand(todomvc.controller.command.PrepViewCommand)}}),puremvc.define({name:"todomvc.controller.command.PrepControllerCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerCommand(todomvc.AppConstants.ADD_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.REMOVE_TODOS_COMPLETED,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.DELETE_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.UPDATE_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.TOGGLE_TODO_STATUS,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.FILTER_TODOS,todomvc.controller.command.TodoCommand)}}),puremvc.define({name:"todomvc.controller.command.PrepModelCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerProxy(new todomvc.model.proxy.TodoProxy)}}),puremvc.define({name:"todomvc.controller.command.PrepViewCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerMediator(new todomvc.view.mediator.TodoFormMediator),this.facade.registerMediator(new todomvc.view.mediator.RoutesMediator)}}),puremvc.define({name:"todomvc.controller.command.TodoCommand",parent:puremvc.SimpleCommand},{execute:function(e){var t=this.facade.retrieveProxy(todomvc.model.proxy.TodoProxy.NAME);switch(e.getName()){case todomvc.AppConstants.ADD_TODO:t.addTodo(e.getBody());break;case todomvc.AppConstants.DELETE_TODO:t.deleteTodo(e.getBody());break;case todomvc.AppConstants.UPDATE_TODO:t.updateTodo(e.getBody());break;case todomvc.AppConstants.TOGGLE_TODO_STATUS:t.toggleCompleteStatus(e.getBody());break;case todomvc.AppConstants.REMOVE_TODOS_COMPLETED:t.removeTodosCompleted();break;case todomvc.AppConstants.FILTER_TODOS:t.filterTodos(e.getBody())}}}),puremvc.define({name:"todomvc.Application",constructor:function(){this.facade.registerCommand(todomvc.AppConstants.STARTUP,todomvc.controller.command.StartupCommand),this.facade.sendNotification(todomvc.AppConstants.STARTUP)}},{STARTUP:"startup",facade:puremvc.Facade.getInstance(todomvc.AppConstants.CORE_NAME)}),document.addEventListener("DOMContentLoaded",function(){new todomvc.Application});