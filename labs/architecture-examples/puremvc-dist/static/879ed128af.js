!function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t;return[/labs/,/\w*-examples/].forEach(function(e){var o=location.href.match(e);!t&&o&&(t=location.href.indexOf(o))}),location.href.substr(0,t)}function o(t,o){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var n=new XMLHttpRequest;n.open("GET",e()+t,!0),n.send(),n.onload=function(){200===n.status&&o&&o(n.responseText)}}function n(t,e){if(!(this instanceof n))return new n(t,e);var o,i;if("object"!=typeof t)try{t=JSON.parse(t)}catch(r){return}e&&(o=e.template,i=e.framework),!o&&t.templates&&(o=t.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").getAttribute("data-framework")),o&&t[i]&&(this.frameworkJSON=t[i],this.template=o,this.append())}var i=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,o=arguments.length;o>e;e++){var n=arguments[e];if(n)for(var i in n)null==t[i]&&(t[i]=n[i])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,o={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(i,r,s){var a;s=t.defaults({},s,t.templateSettings);var c=new RegExp([(s.escape||e).source,(s.interpolate||e).source,(s.evaluate||e).source].join("|")+"|$","g"),d=0,p="__p+='";i.replace(c,function(t,e,r,s,a){return p+=i.slice(d,a).replace(n,function(t){return"\\"+o[t]}),e&&(p+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(p+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),s&&(p+="';\n"+s+"\n__p+='"),d=a+t.length,t}),p+="';\n",s.variable||(p="with(obj||{}){\n"+p+"}\n"),p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{a=new Function(s.variable||"obj","_",p)}catch(l){throw l.source=p,l}if(r)return a(r,t);var h=function(e){return a.call(this,e,t)};return h.source="function("+(s.variable||"obj")+"){\n"+p+"}",h},t}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(t,e){var o=t.createElement(e),n=t.getElementsByTagName(e)[0];o.src="//www.google-analytics.com/ga.js",n.parentNode.insertBefore(o,n)}(document,"script")),n.prototype.append=function(){var t=document.createElement("aside");t.innerHTML=i.template(this.template,this.frameworkJSON),t.className="learn";var o=t.querySelectorAll(".demo-link");Array.prototype.forEach.call(o,function(t){t.setAttribute("href",e()+t.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",t.outerHTML)},t(),o("learn.json",n)}(),function(t){function e(){return""===d.hash||"#"===d.hash}function o(t,e){for(var o=0;o<t.length;o+=1)if(e(t[o],o,t)===!1)return}function n(t){for(var e=[],o=0,n=t.length;n>o;o++)e=e.concat(t[o]);return e}function i(t,e,o){if(!t.length)return o();var n=0;!function i(){e(t[n],function(e){e||e===!1?(o(e),o=function(){}):(n+=1,n===t.length?o():i())})}()}function r(t,e,o){o=t;for(var n in e)if(e.hasOwnProperty(n)&&(o=e[n](t),o!==t))break;return o===t?"([._a-zA-Z0-9-]+)":o}function a(t,e){for(var o,n=0,i="";o=t.substr(n).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)n=o.index+o[0].length,o[0]=o[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=t.substr(0,o.index)+o[0];t=i+=t.substr(n);var s,a=t.match(/:([^\/]+)/gi);if(a){s=a.length;for(var c=0;s>c;c++)t=t.replace(a[c],r(a[c],e))}return t}function c(t,e,o,n){var i,r=0,s=0,a=0,o=(o||"(").toString(),n=(n||")").toString();for(i=0;i<t.length;i++){var c=t[i];if(c.indexOf(o,r)>c.indexOf(n,r)||~c.indexOf(o,r)&&!~c.indexOf(n,r)||!~c.indexOf(o,r)&&~c.indexOf(n,r)){if(s=c.indexOf(o,r),a=c.indexOf(n,r),~s&&!~a||!~s&&~a){var d=t.slice(0,(i||1)+1).join(e);t=[d].concat(t.slice((i||1)+1))}r=(a>s?a:s)+1,i=0}else r=0}return t}Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var o,n=[],i=0,r=this.length;r>i;i++)i in this&&t.call(e,o=this[i],i,this)&&n.push(o);return n}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var d=document.location,p={mode:"modern",hash:d.hash,history:!1,check:function(){var t=d.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function o(t){for(var e=0,o=l.listeners.length;o>e;e++)l.listeners[e](t)}var n=this;if(this.history=e,l.listeners||(l.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=o},500):window.onhashchange=o,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=o,this.mode="legacy"}return l.listeners.push(t),this.mode},destroy:function(t){if(l&&l.listeners)for(var e=l.listeners,o=e.length-1;o>=0;o--)e[o]===t&&e.splice(o,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):d.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),o=e.contentDocument||e.contentWindow.document;o.open(),o.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),o.close()},syncHash:function(){var t=this._hash;return t!=d.hash&&(d.hash=t),this},onHashChanged:function(){}},l=t.Router=function(t){return this instanceof l?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new l(t)};l.prototype.init=function(t){var o=this;if(this.handler=function(t){var e=t&&t.newURL||window.location.hash,n=o.history===!0?o.getPath():e.replace(/.*#/,"");o.dispatch("on",n)},p.init(this.handler,this.history),this.history===!1)e()&&t?d.hash=t:e()||o.dispatch("on",d.hash.replace(/^#/,""));else{var n=e()&&t?t:e()?null:d.hash.replace(/^#/,"");n&&window.history.replaceState({},document.title,n),(n||this.run_in_init===!0)&&this.handler()}return this},l.prototype.explode=function(){var t=this.history===!0?this.getPath():d.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},l.prototype.setRoute=function(t,e,o){var n=this.explode();return"number"==typeof t&&"string"==typeof e?n[t]=e:"string"==typeof o?n.splice(t,e,s):n=[t],p.setHash(n.join("/")),n},l.prototype.insertEx=function(t,e,o,n){return"once"===t&&(t="on",o=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(o)),this._insert(t,e,o,n)},l.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var o=this.explode();e=o.indexOf(t)}else e=this.explode();return e},l.prototype.destroy=function(){return p.destroy(this.handler),this},l.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t},l.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},l.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var o=new RegExp(t,"g");this.params[t]=function(t){return t.replace(o,e.source||e)}},l.prototype.on=l.prototype.route=function(t,e,o){var n=this;return o||"function"!=typeof e||(o=e,e=t,t="on"),Array.isArray(e)?e.forEach(function(e){n.on(t,e,o)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){n.on(t.toLowerCase(),e,o)}):(e=e.split(new RegExp(this.delimiter)),e=c(e,this.delimiter),this.insert(t,this.scope.concat(e),o),void 0))},l.prototype.dispatch=function(t,e,o){function n(){r.last=s.after,r.invoke(r.runlist(s),r,o)}var i,r=this,s=this.traverse(t,e,this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&a?(this.async?this.invoke(i,this,n):(this.invoke(i,this),n()),!0):(n(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},o),!1)},l.prototype.invoke=function(t,e,n){var r=this;this.async?i(t,function s(o,n){return Array.isArray(o)?i(o,s,n):("function"==typeof o&&o.apply(e,t.captures.concat(n)),void 0)},function(){n&&n.apply(e,arguments)}):o(t,function a(n){return Array.isArray(n)?o(n,a):"function"==typeof n?n.apply(e,t.captures||[]):("string"==typeof n&&r.resource&&r.resource[n].apply(e,t.captures||[]),void 0)})},l.prototype.traverse=function(t,e,o,n,i){function r(t){function e(t){for(var o=[],n=0;n<t.length;n++)o[n]=Array.isArray(t[n])?e(t[n]):t[n];return o}function o(t){for(var e=t.length-1;e>=0;e--)Array.isArray(t[e])?(o(t[e]),0===t[e].length&&t.splice(e,1)):i(t[e])||t.splice(e,1)}if(!i)return t;var n=e(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(i),o(n),n}var s,a,c,d,p=[];if(e===this.delimiter&&o[t])return d=[[o.before,o[t]].filter(Boolean)],d.after=[o.after].filter(Boolean),d.matched=!0,d.captures=[],r(d);for(var l in o)if(o.hasOwnProperty(l)&&(!this._methods[l]||this._methods[l]&&"object"==typeof o[l]&&!Array.isArray(o[l]))){if(s=a=n+this.delimiter+l,this.strict||(a+="["+this.delimiter+"]?"),c=e.match(new RegExp("^"+a)),!c)continue;if(c[0]&&c[0]==e&&o[l][t])return d=[[o[l].before,o[l][t]].filter(Boolean)],d.after=[o[l].after].filter(Boolean),d.matched=!0,d.captures=c.slice(1),this.recurse&&o===this.routes&&(d.push([o.before,o.on].filter(Boolean)),d.after=d.after.concat([o.after].filter(Boolean))),r(d);if(d=this.traverse(t,e,o[l],s),d.matched)return d.length>0&&(p=p.concat(d)),this.recurse&&(p.push([o[l].before,o[l].on].filter(Boolean)),d.after=d.after.concat([o[l].after].filter(Boolean)),o===this.routes&&(p.push([o.before,o.on].filter(Boolean)),d.after=d.after.concat([o.after].filter(Boolean)))),p.matched=!0,p.captures=d.captures,p.after=d.after,r(p)}return!1},l.prototype.insert=function(t,e,o,n){var i,r,s,c,d;if(e=e.filter(function(t){return t&&t.length>0}),n=n||this.routes,d=e.shift(),/\:|\*/.test(d)&&!/\\d|\\w/.test(d)&&(d=a(d,this.params)),e.length>0)return n[d]=n[d]||{},this.insert(t,e,o,n[d]);if(d||e.length||n!==this.routes){if(r=typeof n[d],s=Array.isArray(n[d]),n[d]&&!s&&"object"==r)switch(i=typeof n[d][t]){case"function":return n[d][t]=[n[d][t],o],void 0;case"object":return n[d][t].push(o),void 0;case"undefined":return n[d][t]=o,void 0}else if("undefined"==r)return c={},c[t]=o,n[d]=c,void 0;throw new Error("Invalid route context: "+r)}switch(i=typeof n[t]){case"function":return n[t]=[n[t],o],void 0;case"object":return n[t].push(o),void 0;case"undefined":return n[t]=o,void 0}},l.prototype.extend=function(t){function e(t){n._methods[t]=!0,n[t]=function(){var e=1===arguments.length?[t,""]:[t];n.on.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}var o,n=this,i=t.length;for(o=0;i>o;o++)e(t[o])},l.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(n(t)):n(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},l.prototype.mount=function(t,e){function o(e,o){var i=e,r=e.split(n.delimiter),s=typeof t[e],a=""===r[0]||!n._methods[r[0]],d=a?"on":i;return a&&(i=i.slice((i.match(new RegExp(n.delimiter))||[""])[0].length),r.shift()),a&&"object"===s&&!Array.isArray(t[e])?(o=o.concat(r),n.mount(t[e],o),void 0):(a&&(o=o.concat(i.split(n.delimiter)),o=c(o,n.delimiter)),n.insert(d,o,t[e]),void 0)}if(t&&"object"==typeof t&&!Array.isArray(t)){var n=this;e=e||[],Array.isArray(e)||(e=e.split(n.delimiter));for(var i in t)t.hasOwnProperty(i)&&o(i,e.slice(0))}}}("object"==typeof exports?exports:window),function(t){function e(t,e){this.setNotifyMethod(t),this.setNotifyContext(e)}function o(t,e,o){this.name=t,this.body=e,this.type=o}function n(){}function i(){}function r(){this.subCommands=[],this.initializeMacroCommand()}function s(t,e){this.mediatorName=t||this.constructor.NAME,this.viewComponent=e}function a(t,e){this.proxyName=t||this.constructor.NAME,null!=e&&this.setData(e)}function c(t){if(null!=c.instanceMap[t])throw new Error(c.MULTITON_MSG);this.initializeNotifier(t),c.instanceMap[t]=this,this.initializeFacade()}function d(t){if(null!=d.instanceMap[t])throw new Error(d.MULTITON_MSG);this.multitonKey=t,d.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function p(t){if(p.instanceMap[t])throw new Error(p.MULTITON_MSG);this.multitonKey=t,p.instanceMap[t]=this,this.proxyMap=[],this.initializeModel()}function l(t){if(null!=l.instanceMap[t])throw new Error(l.MULTITON_MSG);this.multitonKey=t,l.instanceMap[this.multitonKey]=this,this.commandMap=new Array,this.initializeController()}function h(t,e,o){for(var n,i,r=t.split("."),s=o||m.global,a=0,c=r.length;c>a;a++)n=s,i=r[a],s=null==s[i]?s[i]={}:s[i];return null==e?s:n[i]=e}function u(t,e,o){t||(t={});var n,i,r=t.name,s=t.parent,a="function"==typeof s,c=t.scope||null;if("parent"in t&&!a)throw new TypeError("Class parent must be Function");if(t.hasOwnProperty("constructor")){if(n=t.constructor,"function"!=typeof n)throw new TypeError("Class constructor must be Function")}else n=a?function(){s.apply(this,arguments)}:new Function;if(a&&m.extend(n,s),e&&(i=n.prototype,m.decorate(i,e),i.constructor=n),o&&m.decorate(n,o),r){if("string"!=typeof r)throw new TypeError("Class name must be primitive string");h(r,n,c)}return n}if(null==t&&(t=window),!t.puremvc){e.prototype.setNotifyMethod=function(t){this.notify=t},e.prototype.setNotifyContext=function(t){this.context=t},e.prototype.getNotifyMethod=function(){return this.notify},e.prototype.getNotifyContext=function(){return this.context},e.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},e.prototype.compareNotifyContext=function(t){return t===this.context},e.prototype.notify=null,e.prototype.context=null,o.prototype.getName=function(){return this.name},o.prototype.setBody=function(t){this.body=t},o.prototype.getBody=function(){return this.body},o.prototype.setType=function(t){this.type=t},o.prototype.getType=function(){return this.type},o.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.body?"null":this.body.toString()),t+="\nType:"+(null==this.type?"null":this.type)},o.prototype.name=null,o.prototype.type=null,o.prototype.body=null,n.prototype.sendNotification=function(t,e,o){var n=this.getFacade();n&&n.sendNotification(t,e,o)},n.prototype.facade,n.prototype.initializeNotifier=function(t){this.multitonKey=String(t),this.facade=this.getFacade()},n.prototype.getFacade=function(){if(null==this.multitonKey)throw new Error(n.MULTITON_MSG);return c.getInstance(this.multitonKey)},n.prototype.multitonKey=null,n.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",i.prototype=new n,i.prototype.constructor=i,i.prototype.execute=function(){},r.prototype=new n,r.prototype.constructor=r,r.prototype.subCommands=null,r.prototype.initializeMacroCommand=function(){},r.prototype.addSubCommand=function(t){this.subCommands.push(t)},r.prototype.execute=function(t){for(;this.subCommands.length>0;){var e=this.subCommands.shift(),o=new e;o.initializeNotifier(this.multitonKey),o.execute(t)}},s.NAME="Mediator",s.prototype=new n,s.prototype.constructor=s,s.prototype.getMediatorName=function(){return this.mediatorName},s.prototype.setViewComponent=function(t){this.viewComponent=t},s.prototype.getViewComponent=function(){return this.viewComponent},s.prototype.listNotificationInterests=function(){return[]},s.prototype.handleNotification=function(){},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.mediatorName=null,s.prototype.viewComponent=null,a.NAME="Proxy",a.prototype=new n,a.prototype.constructor=a,a.prototype.getProxyName=function(){return this.proxyName},a.prototype.setData=function(t){this.data=t},a.prototype.getData=function(){return this.data},a.prototype.onRegister=function(){},a.prototype.onRemove=function(){},a.prototype.proxyName=null,a.prototype.data=null,c.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},c.getInstance=function(t){return null==t?null:(null==c.instanceMap[t]&&(c.instanceMap[t]=new c(t)),c.instanceMap[t])},c.prototype.initializeController=function(){null==this.controller&&(this.controller=l.getInstance(this.multitonKey))},c.prototype.initializeModel=function(){null==this.model&&(this.model=p.getInstance(this.multitonKey))},c.prototype.initializeView=function(){null==this.view&&(this.view=d.getInstance(this.multitonKey))},c.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},c.prototype.removeCommand=function(t){this.controller.removeCommand(t)},c.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},c.prototype.registerProxy=function(t){this.model.registerProxy(t)},c.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},c.prototype.removeProxy=function(t){var e=null;return null!=this.model&&(e=this.model.removeProxy(t)),e},c.prototype.hasProxy=function(t){return this.model.hasProxy(t)},c.prototype.registerMediator=function(t){null!=this.view&&this.view.registerMediator(t)},c.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},c.prototype.removeMediator=function(t){var e=null;return null!=this.view&&(e=this.view.removeMediator(t)),e},c.prototype.hasMediator=function(t){return this.view.hasMediator(t)},c.prototype.sendNotification=function(t,e,n){this.notifyObservers(new o(t,e,n))},c.prototype.notifyObservers=function(t){null!=this.view&&this.view.notifyObservers(t)},c.prototype.initializeNotifier=function(t){this.multitonKey=t},c.hasCore=function(t){return null!=c.instanceMap[t]},c.removeCore=function(t){null!=c.instanceMap[t]&&(p.removeModel(t),d.removeView(t),l.removeController(t),delete c.instanceMap[t])},c.prototype.controller=null,c.prototype.model=null,c.prototype.view=null,c.prototype.multitonKey=null,c.instanceMap=[],c.MULTITON_MSG="Facade instance for this Multiton key already constructed!",d.prototype.initializeView=function(){},d.getInstance=function(t){return null==t?null:(null==d.instanceMap[t]&&(d.instanceMap[t]=new d(t)),d.instanceMap[t])},d.prototype.registerObserver=function(t,e){null!=this.observerMap[t]?this.observerMap[t].push(e):this.observerMap[t]=[e]},d.prototype.notifyObservers=function(t){if(null!=this.observerMap[t.getName()]){for(var e,o=this.observerMap[t.getName()],n=[],i=0;i<o.length;i++)e=o[i],n.push(e);for(var i=0;i<n.length;i++)e=n[i],e.notifyObserver(t)}},d.prototype.removeObserver=function(t,e){for(var o=this.observerMap[t],n=0;n<o.length;n++)if(1==o[n].compareNotifyContext(e)){o.splice(n,1);break}0==o.length&&delete this.observerMap[t]},d.prototype.registerMediator=function(t){if(null==this.mediatorMap[t.getMediatorName()]){t.initializeNotifier(this.multitonKey),this.mediatorMap[t.getMediatorName()]=t;var o=t.listNotificationInterests();if(o.length>0)for(var n=new e(t.handleNotification,t),i=0;i<o.length;i++)this.registerObserver(o[i],n);t.onRegister()}},d.prototype.retrieveMediator=function(t){return this.mediatorMap[t]},d.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(e){for(var o=e.listNotificationInterests(),n=0;n<o.length;n++)this.removeObserver(o[n],e);delete this.mediatorMap[t],e.onRemove()}return e},d.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},d.removeView=function(t){delete d.instanceMap[t]},d.prototype.mediatorMap=null,d.prototype.observerMap=null,d.instanceMap=[],d.prototype.multitonKey=null,d.MULTITON_MSG="View instance for this Multiton key already constructed!",p.prototype.initializeModel=function(){},p.getInstance=function(t){return null==t?null:(null==p.instanceMap[t]&&(p.instanceMap[t]=new p(t)),p.instanceMap[t])},p.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},p.prototype.retrieveProxy=function(t){return this.proxyMap[t]},p.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},p.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(this.proxyMap[t]=null,e.onRemove()),e},p.removeModel=function(t){delete p.instanceMap[t]},p.prototype.proxyMap=null,p.instanceMap=[],p.prototype.multitonKey,p.MULTITON_MSG="Model instance for this Multiton key already constructed!",l.prototype.initializeController=function(){this.view=d.getInstance(this.multitonKey)},l.getInstance=function(t){return null==t?null:(null==this.instanceMap[t]&&(this.instanceMap[t]=new this(t)),this.instanceMap[t])},l.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];if(null!=e){var o=new e;o.initializeNotifier(this.multitonKey),o.execute(t)}},l.prototype.registerCommand=function(t,o){null==this.commandMap[t]&&this.view.registerObserver(t,new e(this.executeCommand,this)),this.commandMap[t]=o},l.prototype.hasCommand=function(t){return null!=this.commandMap[t]},l.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),this.commandMap[t]=null)},l.removeController=function(t){delete this.instanceMap[t]},l.prototype.view=null,l.prototype.commandMap=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="controller key for this Multiton key already constructed";var m={global:function(){return this}(),extend:function(t,e){if("function"!=typeof t)throw new TypeError("#extend- child should be Function");if("function"!=typeof e)throw new TypeError("#extend- parent should be Function");if(e!==t){var o=new Function;return o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},decorate:function(t,e){for(var o in e)t[o]=e[o];return t}};t.puremvc={View:d,Model:p,Controller:l,SimpleCommand:i,MacroCommand:r,Facade:c,Mediator:s,Observer:e,Notification:o,Notifier:n,Proxy:a,define:u,declare:h}}}(this),puremvc.define({name:"todomvc.AppConstants"},{},{CORE_NAME:"TodoMVC",STARTUP:"startup",ADD_TODO:"add_todo",DELETE_TODO:"delete_todo",UPDATE_TODO:"update_todo",TOGGLE_TODO_STATUS:"toggle_todo_status",REMOVE_TODOS_COMPLETED:"remove_todos_completed",FILTER_TODOS:"filter_todos",TODOS_FILTERED:"todos_filtered",FILTER_ALL:"all",FILTER_ACTIVE:"active",FILTER_COMPLETED:"completed"}),puremvc.define({name:"todomvc.model.proxy.TodoProxy",parent:puremvc.Proxy},{todos:[],stats:{},filter:todomvc.AppConstants.FILTER_ALL,LOCAL_STORAGE:"todos-puremvc",onRegister:function(){this.loadData()},loadData:function(){var t;localStorage.getItem(this.LOCAL_STORAGE)||this.saveData(),t=JSON.parse(localStorage.getItem(this.LOCAL_STORAGE)),this.todos=t.todos,this.filter=t.filter,this.computeStats()},saveData:function(){var t={todos:this.todos,filter:this.filter};localStorage.setItem(this.LOCAL_STORAGE,JSON.stringify(t))},computeStats:function(){this.stats.totalTodo=this.todos.length,this.stats.todoCompleted=this.getCompletedCount(),this.stats.todoLeft=this.stats.totalTodo-this.stats.todoCompleted},filterTodos:function(t){var e;for(this.filter=t,this.saveData(),e=this.todos.length,filtered=[];e--;)t===todomvc.AppConstants.FILTER_ALL?filtered.push(this.todos[e]):this.todos[e].completed===!0&&t===todomvc.AppConstants.FILTER_COMPLETED?filtered.push(this.todos[e]):this.todos[e].completed===!1&&t===todomvc.AppConstants.FILTER_ACTIVE&&filtered.push(this.todos[e]);this.sendNotification(todomvc.AppConstants.TODOS_FILTERED,{todos:filtered,stats:this.stats,filter:this.filter})},todosModified:function(){this.computeStats(),this.filterTodos(this.filter)},removeTodosCompleted:function(){for(var t=this.todos.length;t--;)this.todos[t].completed&&this.todos.splice(t,1);this.todosModified()},deleteTodo:function(t){for(var e=this.todos.length;e--;)this.todos[e].id===t&&this.todos.splice(e,1);this.todosModified()},toggleCompleteStatus:function(t){for(var e=this.todos.length;e--;)this.todos[e].completed=t;this.todosModified()},updateTodo:function(t){for(var e=this.todos.length;e--;)this.todos[e].id===t.id&&(this.todos[e].title=t.title,this.todos[e].completed=t.completed);this.todosModified()},addTodo:function(t){t.id=this.getUuid(),this.todos.push(t),this.todosModified()},getCompletedCount:function(){for(var t=this.todos.length,e=0;t--;)this.todos[t].completed&&e++;return e},getUuid:function(){var t,e,o="";for(t=0;32>t;t++)e=0|16*Math.random(),(8===t||12===t||16===t||20===t)&&(o+="-"),o+=(12===t?4:16===t?8|3&e:e).toString(16);return o}},{NAME:"TodoProxy"}),puremvc.define({name:"todomvc.view.event.AppEvents"},{},{TOGGLE_COMPLETE_ALL:"toggle_complete_all",TOGGLE_COMPLETE:"toggle_complete",CLEAR_COMPLETED:"clear_completed",DELETE_ITEM:"delete_item",UPDATE_ITEM:"update_item",ADD_ITEM:"add_item",createEvent:function(t){var e;return document.createEvent?(e=document.createEvent("Events"),e.initEvent(t,!1,!1)):document.createEventObject&&(e=document.createEventObject()),e},addEventListener:function(t,e,o,n){t.addEventListener?t.addEventListener(e,o,n):t.attachEvent&&t.attachEvent(e,o)},dispatchEvent:function(t,e){t.dispatchEvent?t.dispatchEvent(e):t.fireEvent&&t.fireEvent(e.type,e)}}),puremvc.define({name:"todomvc.view.component.TodoForm",constructor:function(){this.todos=[],this.stats={},this.filter="",this.todoApp=document.querySelector("#todoapp"),this.main=this.todoApp.querySelector("#main"),this.toggleAllCheckbox=this.todoApp.querySelector("#toggle-all"),this.newTodoField=this.todoApp.querySelector("#new-todo"),this.todoList=this.todoApp.querySelector("#todo-list"),this.footer=this.todoApp.querySelector("#footer"),this.todoCount=this.todoApp.querySelector("#todo-count"),this.clearButton=this.todoApp.querySelector("#clear-completed"),this.filters=this.todoApp.querySelector("#filters"),this.filterAll=this.filters.querySelector("#filterAll"),this.filterActive=this.filters.querySelector("#filterActive"),this.filterCompleted=this.filters.querySelector("#filterCompleted"),this.newTodoField.component=this,todomvc.view.event.AppEvents.addEventListener(this.newTodoField,"keypress",function(t){t.keyCode===this.component.ENTER_KEY&&this.value&&this.component.dispatchAddTodo(t)}),this.clearButton.component=this,todomvc.view.event.AppEvents.addEventListener(this.clearButton,"click",function(t){this.component.dispatchClearCompleted(t)}),this.toggleAllCheckbox.component=this,todomvc.view.event.AppEvents.addEventListener(this.toggleAllCheckbox,"change",function(t){this.component.dispatchToggleCompleteAll(t.target.checked)})}},{ENTER_KEY:13,addEventListener:function(t,e,o){todomvc.view.event.AppEvents.addEventListener(this.todoApp,t,e,o)},createEvent:function(t){return todomvc.view.event.AppEvents.createEvent(t)},dispatchEvent:function(t){todomvc.view.event.AppEvents.dispatchEvent(this.todoApp,t)},dispatchToggleComplete:function(t){var e,o;e=this.getTodoById(t.target.getAttribute("data-todo-id")),e.id=t.target.getAttribute("data-todo-id"),e.completed=t.target.checked,o=this.createEvent(todomvc.view.event.AppEvents.TOGGLE_COMPLETE),o.todo=e,this.dispatchEvent(o)},dispatchToggleCompleteAll:function(t){var e=this.createEvent(todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL);e.doToggleComplete=t,this.dispatchEvent(e)},dispatchClearCompleted:function(){var t=this.createEvent(todomvc.view.event.AppEvents.CLEAR_COMPLETED);this.dispatchEvent(t)},dispatchDelete:function(t){var e=this.createEvent(todomvc.view.event.AppEvents.DELETE_ITEM);e.todoId=t,this.dispatchEvent(e)},dispatchAddTodo:function(){var t,e={};e.completed=!1,e.title=this.newTodoField.value.trim(),""!==e.title&&(t=this.createEvent(todomvc.view.event.AppEvents.ADD_ITEM),t.todo=e,this.dispatchEvent(t))},dispatchUpdateTodo:function(t){var e,o,n={};n.id=t.target.id.slice(6),n.title=t.target.value.trim(),n.completed=t.target.completed,e=""===n.title?todomvc.view.event.AppEvents.DELETE_ITEM:todomvc.view.event.AppEvents.UPDATE_ITEM,o=this.createEvent(e),o.todo=n,o.todoId=n.id,this.dispatchEvent(o)},setFilteredTodoList:function(t){var e,o,n,i,r,s,a,c,d,p,s;for(this.todos=t.todos,this.stats=t.stats,this.filter=t.filter,this.main.style.display=this.stats.totalTodo?"block":"none",this.todoList.innerHTML="",this.newTodoField.value="",c=0;c<this.todos.length;c++)e=this.todos[c],o=document.createElement("input"),o.className="toggle",o.setAttribute("data-todo-id",e.id),o.type="checkbox",o.component=this,todomvc.view.event.AppEvents.addEventListener(o,"change",function(t){this.component.dispatchToggleComplete(t)}),n=document.createElement("label"),n.setAttribute("data-todo-id",e.id),n.appendChild(document.createTextNode(e.title)),i=document.createElement("button"),i.className="destroy",i.setAttribute("data-todo-id",e.id),i.component=this,todomvc.view.event.AppEvents.addEventListener(i,"click",function(t){this.component.dispatchDelete(t.target.getAttribute("data-todo-id"))}),r=document.createElement("div"),r.className="view",r.setAttribute("data-todo-id",e.id),r.appendChild(o),r.appendChild(n),r.appendChild(i),todomvc.view.event.AppEvents.addEventListener(r,"dblclick",function(){d=this.getAttribute("data-todo-id"),p=document.getElementById("li_"+d),s=document.getElementById("input_"+d),p.className="editing",s.focus()}),s=document.createElement("input"),s.id="input_"+e.id,s.className="edit",s.value=e.title,s.completed=e.completed,s.component=this,todomvc.view.event.AppEvents.addEventListener(s,"keypress",function(t){t.keyCode===this.component.ENTER_KEY&&this.component.dispatchUpdateTodo(t)}),todomvc.view.event.AppEvents.addEventListener(s,"blur",function(t){this.component.dispatchUpdateTodo(t)}),a=document.createElement("li"),a.id="li_"+e.id,a.appendChild(r),a.appendChild(s),e.completed&&(a.className+="completed",o.checked=!0),this.todoList.appendChild(a);this.footer.style.display=this.stats.totalTodo?"block":"none",this.updateToggleAllCheckbox(),this.updateClearButton(),this.updateTodoCount(),this.updateFilter()},getTodoById:function(t){var e;for(e=0;e<this.todos.length;e++)if(this.todos[e].id===t)return this.todos[e]},updateFilter:function(){this.filterAll.className=this.filter===todomvc.AppConstants.FILTER_ALL?"selected":"",this.filterActive.className=this.filter===todomvc.AppConstants.FILTER_ACTIVE?"selected":"",this.filterCompleted.className=this.filter===todomvc.AppConstants.FILTER_COMPLETED?"selected":""},updateToggleAllCheckbox:function(){var t,e=this.todos.length>0;for(t=0;t<this.todos.length;t++)if(this.todos[t].completed===!1){e=!1;break}this.toggleAllCheckbox.checked=e},updateClearButton:function(){this.clearButton.style.display=0===this.stats.todoCompleted?"none":"block",this.clearButton.innerHTML="Clear completed ("+this.stats.todoCompleted+")"},updateTodoCount:function(){var t=document.createElement("strong"),e=" "+(1===this.stats.todoLeft?"item":"items")+" left";t.innerHTML=this.stats.todoLeft,this.todoCount.innerHTML=null,this.todoCount.appendChild(t),this.todoCount.appendChild(document.createTextNode(e))}},{NAME:"TodoForm"}),puremvc.define({name:"todomvc.view.mediator.RoutesMediator",parent:puremvc.Mediator},{router:null,onRegister:function(){var t=this.facade.retrieveProxy(todomvc.model.proxy.TodoProxy.NAME),e=this.getRouteForFilter(t.filter),o={resource:this,notfound:this.handleFilterAll},n={"/":this.handleFilterAll,"/active":this.handleFilterActive,"/completed":this.handleFilterCompleted};
this.router=new Router(n).configure(o),this.router.init(e)},getRouteForFilter:function(t){var e;switch(t){case todomvc.AppConstants.FILTER_ALL:e="/";break;case todomvc.AppConstants.FILTER_ACTIVE:e="/active";break;case todomvc.AppConstants.FILTER_COMPLETED:e="/completed"}return e},handleFilterAll:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_ALL)},handleFilterActive:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_ACTIVE)},handleFilterCompleted:function(){this.resource.facade.sendNotification(todomvc.AppConstants.FILTER_TODOS,todomvc.AppConstants.FILTER_COMPLETED)}},{NAME:"RoutesMediator"}),puremvc.define({name:"todomvc.view.mediator.TodoFormMediator",parent:puremvc.Mediator},{listNotificationInterests:function(){return[todomvc.AppConstants.TODOS_FILTERED]},onRegister:function(){this.setViewComponent(new todomvc.view.component.TodoForm),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.TOGGLE_COMPLETE,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.UPDATE_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.DELETE_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.ADD_ITEM,this),this.viewComponent.addEventListener(todomvc.view.event.AppEvents.CLEAR_COMPLETED,this)},handleEvent:function(t){switch(t.type){case todomvc.view.event.AppEvents.TOGGLE_COMPLETE_ALL:this.sendNotification(todomvc.AppConstants.TOGGLE_TODO_STATUS,t.doToggleComplete);break;case todomvc.view.event.AppEvents.DELETE_ITEM:this.sendNotification(todomvc.AppConstants.DELETE_TODO,t.todoId);break;case todomvc.view.event.AppEvents.ADD_ITEM:this.sendNotification(todomvc.AppConstants.ADD_TODO,t.todo);break;case todomvc.view.event.AppEvents.CLEAR_COMPLETED:this.sendNotification(todomvc.AppConstants.REMOVE_TODOS_COMPLETED);break;case todomvc.view.event.AppEvents.TOGGLE_COMPLETE:case todomvc.view.event.AppEvents.UPDATE_ITEM:this.sendNotification(todomvc.AppConstants.UPDATE_TODO,t.todo)}},handleNotification:function(t){switch(t.getName()){case todomvc.AppConstants.TODOS_FILTERED:this.viewComponent.setFilteredTodoList(t.getBody())}}},{NAME:"TodoFormMediator"}),puremvc.define({name:"todomvc.controller.command.StartupCommand",parent:puremvc.MacroCommand},{initializeMacroCommand:function(){this.addSubCommand(todomvc.controller.command.PrepControllerCommand),this.addSubCommand(todomvc.controller.command.PrepModelCommand),this.addSubCommand(todomvc.controller.command.PrepViewCommand)}}),puremvc.define({name:"todomvc.controller.command.PrepControllerCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerCommand(todomvc.AppConstants.ADD_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.REMOVE_TODOS_COMPLETED,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.DELETE_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.UPDATE_TODO,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.TOGGLE_TODO_STATUS,todomvc.controller.command.TodoCommand),this.facade.registerCommand(todomvc.AppConstants.FILTER_TODOS,todomvc.controller.command.TodoCommand)}}),puremvc.define({name:"todomvc.controller.command.PrepModelCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerProxy(new todomvc.model.proxy.TodoProxy)}}),puremvc.define({name:"todomvc.controller.command.PrepViewCommand",parent:puremvc.SimpleCommand},{execute:function(){this.facade.registerMediator(new todomvc.view.mediator.TodoFormMediator),this.facade.registerMediator(new todomvc.view.mediator.RoutesMediator)}}),puremvc.define({name:"todomvc.controller.command.TodoCommand",parent:puremvc.SimpleCommand},{execute:function(t){var e=this.facade.retrieveProxy(todomvc.model.proxy.TodoProxy.NAME);switch(t.getName()){case todomvc.AppConstants.ADD_TODO:e.addTodo(t.getBody());break;case todomvc.AppConstants.DELETE_TODO:e.deleteTodo(t.getBody());break;case todomvc.AppConstants.UPDATE_TODO:e.updateTodo(t.getBody());break;case todomvc.AppConstants.TOGGLE_TODO_STATUS:e.toggleCompleteStatus(t.getBody());break;case todomvc.AppConstants.REMOVE_TODOS_COMPLETED:e.removeTodosCompleted();break;case todomvc.AppConstants.FILTER_TODOS:e.filterTodos(t.getBody())}}}),puremvc.define({name:"todomvc.Application",constructor:function(){this.facade.registerCommand(todomvc.AppConstants.STARTUP,todomvc.controller.command.StartupCommand),this.facade.sendNotification(todomvc.AppConstants.STARTUP)}},{STARTUP:"startup",facade:puremvc.Facade.getInstance(todomvc.AppConstants.CORE_NAME)}),document.addEventListener("DOMContentLoaded",function(){new todomvc.Application});