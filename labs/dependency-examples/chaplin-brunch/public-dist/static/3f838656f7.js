!function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t;return[/labs/,/\w*-examples/].forEach(function(e){var r=location.href.match(e);!t&&r&&(t=location.href.indexOf(r))}),location.href.substr(0,t)}function r(t,r){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var n=new XMLHttpRequest;n.open("GET",e()+t,!0),n.send(),n.onload=function(){200===n.status&&r&&r(n.responseText)}}function n(t,e){if(!(this instanceof n))return new n(t,e);var r,i;if("object"!=typeof t)try{t=JSON.parse(t)}catch(o){return}e&&(r=e.template,i=e.framework),!r&&t.templates&&(r=t.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").getAttribute("data-framework")),r&&t[i]&&(this.frameworkJSON=t[i],this.template=r,this.append())}var i=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,r=arguments.length;r>e;e++){var n=arguments[e];if(n)for(var i in n)null==t[i]&&(t[i]=n[i])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,r={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(i,o,s){var a;s=t.defaults({},s,t.templateSettings);var l=new RegExp([(s.escape||e).source,(s.interpolate||e).source,(s.evaluate||e).source].join("|")+"|$","g"),c=0,u="__p+='";i.replace(l,function(t,e,o,s,a){return u+=i.slice(c,a).replace(n,function(t){return"\\"+r[t]}),e&&(u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),o&&(u+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),s&&(u+="';\n"+s+"\n__p+='"),c=a+t.length,t}),u+="';\n",s.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{a=new Function(s.variable||"obj","_",u)}catch(p){throw p.source=u,p}if(o)return a(o,t);var h=function(e){return a.call(this,e,t)};return h.source="function("+(s.variable||"obj")+"){\n"+u+"}",h},t}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(t,e){var r=t.createElement(e),n=t.getElementsByTagName(e)[0];r.src="//www.google-analytics.com/ga.js",n.parentNode.insertBefore(r,n)}(document,"script")),n.prototype.append=function(){var t=document.createElement("aside");t.innerHTML=i.template(this.template,this.frameworkJSON),t.className="learn";var r=t.querySelectorAll(".demo-link");Array.prototype.forEach.call(r,function(t){t.setAttribute("href",e()+t.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",t.outerHTML)},t(),r("learn.json",n)}(),function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},n=function(t,e){return{}.hasOwnProperty.call(t,e)},i=function(t,e){var r,n,i=[];r=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=r.length;s>o;o++)n=r[o],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(r){var n=o(e),s=i(n,r);return t.require(s,e)}},a=function(t,e){var n={id:t,exports:{}};return r[t]=n,e(n.exports,s(t),n),n.exports},l=function(t,o){var s=i(t,".");if(null==o&&(o="/"),n(r,s))return r[s].exports;if(n(e,s))return a(s,e[s]);var l=i(s,"./index");if(n(r,l))return r[l].exports;if(n(e,l))return a(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')},c=function(t,r){if("object"==typeof t)for(var i in t)n(t,i)&&(e[i]=t[i]);else e[t]=r},u=function(){var t=[];for(var r in e)n(e,r)&&t.push(r);return t};t.require=l,t.require.define=c,t.require.register=c,t.require.list=u,t.require.brunch=!0}}(),/*!
 * Exoskeleton.js 0.5.1
 * (c) 2013 Paul Miller <http://paulmillr.com>
 * Based on Backbone.js
 * (c) 2010-2013 Jeremy Ashkenas, DocumentCloud
 * Exoskeleton may be freely distributed under the MIT license.
 * For all details and documentation: <http://exosjs.com>
 */
function(t){if("function"==typeof define&&define.amd)define(["underscore","jquery"],t);else if("object"==typeof exports){var e,r;try{e=require("underscore")}catch(n){}try{r=require("jquery")}catch(n){}t(e,r)}else t(this._,this.jQuery||this.Zepto||this.ender||this.$)}(function(t,e){"use strict";var r="object"==typeof exports,n=r?exports:window,i=n.Backbone,o=n.Exoskeleton,s=r?exports:n.Exoskeleton=n.Backbone={},a=s.utils=t=t||{};s.$=e;var l=[],c=l.push,u=l.slice,p={}.toString;s.noConflict=function(){return n.Backbone=i,n.Exoskeleton=o,this},s.emulateHTTP=!1,s.emulateJSON=!1,s.extend=function(e,r){var n,i=this;n=e&&hasOwnProperty.call(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(n,i,r);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&t.extend(n.prototype,e),n.__super__=i.prototype,n};var h=function(){throw new Error('A "url" property or function must be specified')},f=function(t,e){var r=e.error;e.error=function(n){r&&r(t,n,e),t.trigger("error",t,n,e)}},d=function(e){return"function"==typeof t[e]};a.result=function(t,e){var r=t?t[e]:void 0;return"function"==typeof r?t[e]():r},a.defaults=function(t){return u.call(arguments,1).forEach(function(e){for(var r in e)void 0===t[r]&&(t[r]=e[r])}),t},a.extend=function(t){return u.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]}),t};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.escape=function(t){return null==t?"":String(t).replace(/[&<>"']/g,function(t){return g[t]})},a.sortBy=function(t,e,r){var n="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:n.call(r,t,e,i)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return t.index-e.index}).map(function(t){return t.value})};var y=0;a.uniqueId=function(t){var e=++y+"";return t?t+e:e};var m=function(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=p.call(t);if(i!=p.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=r.length;o--;)if(r[o]==t)return n[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!("function"==typeof s&&s instanceof s&&"function"==typeof a&&a instanceof a))return!1;r.push(t),n.push(e);var l=0,c=!0;if("[object Array]"===i){if(l=t.length,c=l===e.length)for(;l--&&(c=m(t[l],e[l],r,n)););}else{for(var u in t)if(hasOwnProperty.call(t,u)&&(l++,!(c=hasOwnProperty.call(e,u)&&m(t[u],e[u],r,n))))break;if(c){for(u in e)if(hasOwnProperty.call(e,u)&&!l--)break;c=!l}}return r.pop(),n.pop(),c};a.isEqual=function(t,e){return m(t,e,[],[])},a.matchesSelector=function(){if("undefined"!=typeof document){var t,e="MatchesSelector",r=document.createElement("div");if(["matches","webkit"+e,"moz"+e,"ms"+e].some(function(e){var n=e in r;return t=e,n}),!t)throw new Error("Element#matches is not supported");return function(e,r){return e[t](r)}}}(),a.ajax=function(){var t=/^(?:application|text)\/xml/,e=/^application\/json/,r=function(r,n){return null==r&&(r=n.getResponseHeader("content-type")),t.test(r)?n.responseXML:e.test(r)?JSON.parse(n.responseText):n.responseText},n=function(t){return t.status>=200&&t.status<300||304===t.status||0===t.status&&"file:"===window.location.protocol},i=function(t,e,i){return function(){if(4===t.readyState){var o=t.status,s=r(e.headers&&e.headers.Accept,t);if(n(t))e.success&&e.success(s),i&&i.resolve(s);else{var a=new Error("Server responded with a status of "+o);e.error&&e.error(t,o,a),i&&i.reject(t)}}}};return function(t){if(null==t)throw new Error("You must provide options");null==t.type&&(t.type="GET");var e=new XMLHttpRequest,r=s.Deferred&&s.Deferred();if(t.contentType&&(null==t.headers&&(t.headers={}),t.headers["Content-Type"]=t.contentType),t.credentials&&(t.withCredentials=!0),e.addEventListener("readystatechange",i(e,t,r)),e.open(t.type,t.url,!0),t.headers)for(var n in t.headers)e.setRequestHeader(n,t.headers[n]);return t.beforeSend&&t.beforeSend(e),e.send(t.data),r?r.promise:void 0}}();var v=s.Events={on:function(t,e,r){if(!w(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!w(this,"once",t,[e,r])||!e)return this;var n,i=this,o=function(){n||(n=!0,i.off(t,o),e.apply(this,arguments))};return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var n,i,o,s,a,l,c,u;if(!this._events||!w(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(s=t?[t]:Object.keys(this._events),a=0,l=s.length;l>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=n=[],e||r)for(c=0,u=o.length;u>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!w(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&_(r,e),n&&_(n,arguments),this},stopListening:function(t,e,r){var n=this._listeningTo;if(!n)return this;var i=!e&&!r;r||"object"!=typeof e||(r=this),t&&((n={})[t._listenId]=t);for(var o in n)t=n[o],t.off(e,r,this),(i||!Object.keys(t._events).length)&&delete this._listeningTo[o];return this}},b=/\s+/,w=function(t,e,r,n){if(!r)return!0;var i;if("object"==typeof r){for(var o in r)i=[o,r[o]],c.apply(i,n),t[e].apply(t,i);return!1}if(b.test(r)){for(var s=r.split(b),a=0,l=s.length;l>a;a++)i=[s[a]],c.apply(i,n),t[e].apply(t,i);return!1}return!0},_=function(t,e){var r,n=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}},x={listenTo:"on",listenToOnce:"once"};Object.keys(x).forEach(function(e){var r=x[e];v[e]=function(e,n,i){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=t.uniqueId("l"));return o[s]=e,i||"object"!=typeof n||(i=this),e[r](n,i,this),this}}),v.bind=v.on,v.unbind=v.off;var E=s.Model=function(e,r){var n=e||{};r||(r={}),this.cid=t.uniqueId("c"),this.attributes=Object.create(null),r.collection&&(this.collection=r.collection),r.parse&&(n=this.parse(n,r)||{}),n=t.defaults({},n,t.result(this,"defaults")),this.set(n,r),this.changed=Object.create(null),this.initialize.apply(this,arguments)};if(t.extend(E.prototype,v,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return t.extend(Object.create(null),this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(e){return t.escape(this.get(e))},has:function(t){return null!=this.get(t)},set:function(e,r,n){var i,o,s,a,l,c,u,p;if(null==e)return this;if("object"==typeof e?(o=e,n=r):(o={})[e]=r,n||(n={}),!this._validate(o,n))return!1;s=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=t.extend(Object.create(null),this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)r=o[i],t.isEqual(p[i],r)||a.push(i),t.isEqual(u[i],r)?delete this.changed[i]:this.changed[i]=r,s?delete p[i]:p[i]=r;if(!l){a.length&&(this._pending=!0);for(var h=0,f=a.length;f>h;h++)this.trigger("change:"+a[h],this,p[a[h]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,r){return this.set(e,void 0,t.extend({},r,{unset:!0}))},clear:function(e){var r={};for(var n in this.attributes)r[n]=void 0;return this.set(r,t.extend({},e,{unset:!0}))},hasChanged:function(t){return null==t?!!Object.keys(this.changed).length:hasOwnProperty.call(this.changed,t)},changedAttributes:function(e){if(!e)return this.hasChanged()?t.extend(Object.create(null),this.changed):!1;var r,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)t.isEqual(i[o],r=e[o])||((n||(n={}))[o]=r);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return t.extend(Object.create(null),this._previousAttributes)},fetch:function(e){e=e?t.extend({},e):{},void 0===e.parse&&(e.parse=!0);var r=this,n=e.success;return e.success=function(t){return r.set(r.parse(t,e),e)?(n&&n(r,t,e),r.trigger("sync",r,t,e),void 0):!1},f(this,e),this.sync("read",this,e)},save:function(e,r,n){var i,o,s,a=this.attributes;if(null==e||"object"==typeof e?(i=e,n=r):(i={})[e]=r,n=t.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=t.extend(Object.create(null),a,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var r=l.parse(e,n);return n.wait&&(r=t.extend(i||{},r)),r&&"object"==typeof r&&!l.set(r,n)?!1:(c&&c(l,e,n),l.trigger("sync",l,e,n),void 0)},f(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),s=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),s},destroy:function(e){e=e?t.extend({},e):{};var r=this,n=e.success,i=function(){r.trigger("destroy",r,r.collection,e)};if(e.success=function(t){(e.wait||r.isNew())&&i(),n&&n(r,t,e),r.isNew()||r.trigger("sync",r,t,e)},this.isNew())return e.success(),!1;f(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=t.result(this,"urlRoot")||t.result(this.collection,"url")||h();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},t.extend(e||{},{validate:!0}))},_validate:function(e,r){if(!r.validate||!this.validate)return!0;e=t.extend(Object.create(null),this.attributes,e);var n=this.validationError=this.validate(e,r)||null;return n?(this.trigger("invalid",this,n,t.extend(r,{validationError:n})),!1):!0}}),t.keys){var S=["keys","values","pairs","invert","pick","omit"];S.filter(d).forEach(function(e){E.prototype[e]=function(){var r=u.call(arguments);return r.unshift(this.attributes),t[e].apply(t,r)}})}var k=s.Collection=function(e,r){r||(r={}),r.model&&(this.model=r.model),void 0!==r.comparator&&(this.comparator=r.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,t.extend({silent:!0},r))},O={add:!0,remove:!0,merge:!0},j={add:!0,remove:!1};if(t.extend(k.prototype,v,{model:"undefined"==typeof E?null:E,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return s.sync.apply(this,arguments)},add:function(e,r){return this.set(e,t.extend({merge:!1},r,j))},remove:function(t,e){var r=!Array.isArray(t);t=r?[t]:t.slice(),e||(e={});var n,i,o,s;for(n=0,i=t.length;i>n;n++)s=t[n]=this.get(t[n]),s&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s));return r?t[0]:t},set:function(e,r){r=t.defaults({},r,O),r.parse&&(e=this.parse(e,r));var n=!Array.isArray(e);e=n?e?[e]:[]:e.slice();var i,o,s,a,l,c,u,p=r.at,h=this.model,f=this.comparator&&null==p&&r.sort!==!1,d="string"==typeof this.comparator?this.comparator:null,g=[],y=[],m={},v=r.add,b=r.merge,w=r.remove,_=!f&&v&&w?[]:!1;for(i=0,o=e.length;o>i;i++){if(l=e[i],s=l instanceof E?a=l:l[h.prototype.idAttribute],c=this.get(s))w&&(m[c.cid]=!0),b&&(l=l===a?a.attributes:l,r.parse&&(l=c.parse(l,r)),c.set(l,r),f&&!u&&c.hasChanged(d)&&(u=!0)),e[i]=c;else if(v){if(a=e[i]=this._prepareModel(l,r),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}_&&_.push(c||a)}if(w){for(i=0,o=this.length;o>i;++i)m[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,r)}if(g.length||_&&_.length)if(f&&(u=!0),this.length+=g.length,null!=p)for(i=0,o=g.length;o>i;i++)this.models.splice(p+i,0,g[i]);else{_&&(this.models.length=0);var x=_||g;for(i=0,o=x.length;o>i;i++)this.models.push(x[i])}if(u&&this.sort({silent:!0}),!r.silent){for(i=0,o=g.length;o>i;i++)(a=g[i]).trigger("add",a,this,r);(u||_&&_.length)&&this.trigger("sort",this,r)}return n?e[0]:e},reset:function(e,r){r||(r={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return r.previousModels=this.models,this._reset(),e=this.add(e,t.extend({silent:!0},r)),r.silent||this.trigger("reset",this,r),e},push:function(e,r){return this.add(e,t.extend({at:this.length},r))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(e,r){return this.add(e,t.extend({at:0},r))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return u.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return t&&Object.keys(t).length?this[e?"find":"filter"](function(e){for(var r in t)if(t[r]!==e.get(r))return!1;return!0}):e?void 0:[]},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.models.map(function(e){return e.get(t)})},fetch:function(e){e=e?t.extend({},e):{},void 0===e.parse&&(e.parse=!0);var r=e.success,n=this;return e.success=function(t){var i=e.reset?"reset":"set";n[i](t,e),r&&r(n,t,e),n.trigger("sync",n,t,e)},f(this,e),this.sync("read",this,e)},create:function(e,r){if(r=r?t.extend({},r):{},!(e=this._prepareModel(e,r)))return!1;r.wait||this.add(e,r);var n=this,i=r.success;return r.success=function(t,e,r){r.wait&&n.add(t,r),i&&i(t,e,r)},e.save(null,r),e},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,r){if(e instanceof k.prototype.model)return e.collection||(e.collection=this),e;r=r?t.extend({},r):{},r.collection=this;var n=new this.model(e,r);return n.validationError?(this.trigger("invalid",this,n.validationError,r),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,r,n){("add"!==t&&"remove"!==t||r===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),d("each")){var R=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];R.filter(d).forEach(function(e){k.prototype[e]=function(){var r=u.call(arguments);return r.unshift(this.models),t[e].apply(t,r)}});var C=["groupBy","countBy","sortBy"];C.filter(d).forEach(function(e){k.prototype[e]=function(r,n){var i="function"==typeof r?r:function(t){return t.get(r)};return t[e](this.models,i,n)}})}else["forEach","map","filter","some","every","reduce","reduceRight","indexOf","lastIndexOf"].forEach(function(t){var e=Array.prototype[t];k.prototype[t]=function(t,r){return e.call(this.models,t,r)}}),["sortBy"].forEach(function(e){k.prototype[e]=function(r,n){var i="function"==typeof r?r:function(t){return t.get(r)};return t[e](this.models,i,n)}});var A=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"],I=s.View=function(e){this.cid=t.uniqueId("view"),e&&Object.keys(e).forEach(function(t){-1!==T.indexOf(t)&&(this[t]=e[t])},this),this._handlers=[],this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};t.extend(I.prototype,v,{tagName:"div",$:function(t){return s.$?this.$el.find(t):this.findAll(t)},find:function(t){return this.el.querySelector(t)},findAll:function(t){return u.call(this.el.querySelectorAll(t))},initialize:function(){},render:function(){return this},remove:function(){return s.$?this.$el.remove():this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.stopListening(),this},setElement:function(t,e){if(s.$)this.$el&&this.undelegateEvents(),this.$el=t instanceof s.$?t:s.$(t),this.el=this.$el[0];else{this.el&&this.undelegateEvents();var r="string"==typeof t?document.querySelector(t):t;this.el=r}return e!==!1&&this.delegateEvents(),this},delegate:function(t,e,r){if("function"==typeof e&&(r=e,e=null),"function"!=typeof r)throw new TypeError("View#delegate expects callback function");var n=this.el,i=r.bind(this),o=e?function(t){for(var r=t.target;r&&r!==n;r=r.parentNode)if(a.matchesSelector(r,e))return t.delegateTarget=r,i(t)}:i;return n.addEventListener(t,o,!1),this._handlers.push({eventName:t,selector:e,callback:r,handler:o}),o},undelegate:function(t,e,r){"function"==typeof e&&(r=e,e=null);var n=this.el,i=this._handlers,o=function(t){n.removeEventListener(t.eventName,t.handler,!1)};t||e||r?i.filter(function(n){return n.eventName===t&&(r?n.callback===r:!0)&&(e?n.selector===e:!0)}).forEach(function(t){o(t),i.splice(i.indexOf(t),1)}):(i.forEach(o),this._handlers=[])},delegateEvents:function(e,r){if(!e&&!(e=t.result(this,"events")))return this;r||this.undelegateEvents();for(var n in e){var i=e[n];"function"!=typeof i&&(i=this[e[n]]);var o=n.match(A),a=o[1],l=o[2];s.$?(a+=".delegateEvents"+this.cid,i=i.bind(this),this.$el.on(a,l?l:null,i)):this.delegate(a,l,i)}return this},undelegateEvents:function(){return s.$?this.$el.off(".delegateEvents"+this.cid):this.undelegate(),this},_ensureElement:function(){if(this.el)this.setElement(t.result(this,"el"),!1);else{var e=t.extend({},t.result(this,"attributes"));this.id&&(e.id=t.result(this,"id")),this.className&&(e.className=t.result(this,"className")),e["class"]&&(e.className=e["class"]);var r=t.extend(document.createElement(t.result(this,"tagName")),e);this.setElement(r,!1)}}}),s.sync=function(e,r,n){var i=P[e];t.defaults(n||(n={}),{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var o={type:i,dataType:"json"};if(n.url||(o.url=t.result(r,"url")||h()),null!=n.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(n.attrs||r.toJSON(n))),n.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",n.emulateJSON&&(o.data._method=i);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),a?a.apply(this,arguments):void 0}}"GET"===o.type||n.emulateJSON||(o.processData=!1);var l=n.xhr=s.ajax(t.extend(o,n));return r.trigger("request",r,l,n),l};var P={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};s.ajax=s.$?function(){return s.$.ajax.apply(s.$,arguments)}:a.ajax,s.$&&(s.Deferred=function(){return new s.$.Deferred});var N=s.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},H=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,L=/\*\w+/g,q=/[\-{}\[\]+?.,\\\^$|#\s]/g,V=function(t){return t?"object"==typeof t&&"[object RegExp]"===p.call(t):!1};t.extend(N.prototype,v,{initialize:function(){},route:function(t,e,r){V(t)||(t=this._routeToRegExp(t)),"function"==typeof e&&(r=e,e=""),r||(r=this[e]);var n=this;return s.history.route(t,function(i){var o=n._extractParameters(t,i);r&&r.apply(n,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o),s.history.trigger("route",n,e,o)}),this},navigate:function(t,e){return s.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=t.result(this,"routes");for(var e,r=Object.keys(this.routes);null!=(e=r.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(t){return t=t.replace(q,"\\$&").replace(H,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return r.map(function(t){return t?decodeURIComponent(t):null})}});var z=s.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,B=/\/$/,D=/[#].*$/;return z.started=!1,t.extend(z.prototype,v,{getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t){if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=this.location.pathname+this.location.search;var e=this.root.replace(B,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(M,"")},start:function(e){if(z.started)throw new Error("Backbone.history has already been started");z.started=!0,this.options=t.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var r=this.getFragment();this.root=("/"+this.root+"/").replace(U,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=r;var n=this.location,i=n.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&i&&n.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl()},stop:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment?!1:(this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!z.started)return!1;e&&e!==!0||(e={trigger:!!e});var r=this.root+(t=this.getFragment(t||""));if(t=t.replace(D,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==r&&(r=r.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,r){if(r){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),["Model","Collection","Router","View","History"].forEach(function(t){var e=s[t];e&&(e.extend=s.extend)}),t.extend(s,v),s.history=new z,s}),/*!
 * Chaplin 0.11.3
 *
 * Chaplin may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://chaplinjs.org
 */
function(){var t=function(){var t={},e={},r=function(){return function(){}},n=function(t,n){var i={id:t,exports:{}};n(i.exports,r(),i);var o=e[t]=i.exports;return o},i=function(r){if(e.hasOwnProperty(r))return e[r];if(t.hasOwnProperty(r))return n(r,t[r]);throw new Error('Cannot find module "'+r+'"')};return i.register=function(e,r){t[e]=r},i}();t.register("chaplin/application",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p,h;h=t("underscore"),o=t("backbone"),p=t("chaplin/mediator"),a=t("chaplin/dispatcher"),c=t("chaplin/views/layout"),s=t("chaplin/composer"),u=t("chaplin/lib/router"),l=t("chaplin/lib/event_broker"),n.exports=i=function(){function t(t){null==t&&(t={}),this.initialize(t)}return t.extend=o.Model.extend,h.extend(t.prototype,l),t.prototype.title="",t.prototype.dispatcher=null,t.prototype.layout=null,t.prototype.router=null,t.prototype.composer=null,t.prototype.started=!1,t.prototype.initialize=function(t){if(null==t&&(t={}),this.started)throw new Error("Application#initialize: App was already started");return this.initRouter(t.routes,t),this.initDispatcher(t),this.initLayout(t),this.initComposer(t),this.initMediator(),this.start()},t.prototype.initDispatcher=function(t){return this.dispatcher=new a(t)},t.prototype.initLayout=function(t){var e;return null==t&&(t={}),null==(e=t.title)&&(t.title=this.title),this.layout=new c(t)},t.prototype.initComposer=function(t){return null==t&&(t={}),this.composer=new s(t)},t.prototype.initMediator=function(){return p.seal()},t.prototype.initRouter=function(t,e){return this.router=new u(e),"function"==typeof t?t(this.router.match):void 0},t.prototype.start=function(){return this.router.startHistory(),this.started=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,r,n,i;if(!this.disposed){for(t="function"==typeof Object.isFrozen?Object.isFrozen(this):void 0,r=["dispatcher","layout","router","composer"],n=0,i=r.length;i>n;n++)e=r[n],null!=this[e]&&(this[e].dispose(),t||delete this[e]);return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/mediator",function(e,r,n){"use strict";var i,o,s,a,l,c,u=[].slice;i=t("backbone"),c=t("underscore"),a=t("chaplin/lib/support"),l=t("chaplin/lib/utils"),s={},s.subscribe=i.Events.on,s.unsubscribe=i.Events.off,s.publish=i.Events.trigger,s._callbacks=null,o=s._handlers={},s.setHandler=function(t,e,r){return o[t]={instance:r,method:e}},s.execute=function(){var t,e,r,n,i;if(n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],i=!1,"object"==typeof n?(i=n.silent,r=n.name):r=n,e=o[r])return e.method.apply(e.instance,t);if(!i)throw new Error("mediator.execute: "+r+" handler is not defined")},s.removeHandlers=function(t){var e,r,n,i;if(t||(s._handlers={}),l.isArray(t))for(n=0,i=t.length;i>n;n++)r=t[n],delete o[r];else for(r in o)e=o[r],e.instance===t&&delete o[r]},l.readonly(s,"subscribe","unsubscribe","publish","setHandler","execute","removeHandlers"),s.seal=function(){return a.propertyDescriptors&&Object.seal?Object.seal(s):void 0},l.readonly(s,"seal"),n.exports=s}),t.register("chaplin/dispatcher",function(e,r,n){"use strict";var i,o,s,a,l,c;c=t("underscore"),i=t("backbone"),a=t("chaplin/mediator"),l=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),n.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=i.Model.extend,c.extend(t.prototype,s),t.prototype.previousRoute=null,t.prototype.currentController=null,t.prototype.currentRoute=null,t.prototype.currentParams=null,t.prototype.currentQuery=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.settings=c.defaults(t,{controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("router:match",this.dispatch)},t.prototype.dispatch=function(t,e,r){var n,i,o=this;return e=e?c.extend({},e):{},r=r?c.extend({},r):{},null==r.query&&(r.query={}),r.changeURL!==!1&&(r.changeURL=!0),r.forceStartup!==!0&&(r.forceStartup=!1),!r.forceStartup&&(null!=(n=this.currentRoute)?n.controller:void 0)===t.controller&&(null!=(i=this.currentRoute)?i.action:void 0)===t.action&&c.isEqual(this.currentParams,e)&&c.isEqual(this.currentQuery,r.query)?void 0:this.loadController(t.controller,function(n){return o.controllerLoaded(t,e,r,n)})},t.prototype.loadController=function(t,e){var r,n;return r=t+this.settings.controllerSuffix,n=this.settings.controllerPath+r,("undefined"!=typeof define&&null!==define?define.amd:void 0)?require([n],e):e(require(n))},t.prototype.controllerLoaded=function(t,e,r,n){var i;return this.previousRoute=this.currentRoute,this.currentRoute=c.extend({},t,{previous:l.beget(this.previousRoute)}),i=new n(e,this.currentRoute,r),this.executeBeforeAction(i,this.currentRoute,e,r)},t.prototype.executeAction=function(t,e,r,n){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(r,e,n)),this.currentController=t,this.currentParams=r,this.currentQuery=n.query,t[e.action](r,e,n),t.redirected?void 0:(this.adjustURL(e,r,n),this.publishEvent("dispatcher:dispatch",this.currentController,r,e,n))},t.prototype.executeBeforeAction=function(t,e,r,n){var i,o,s,a=this;if(i=t.beforeAction,o=function(){return t.redirected||a.currentRoute&&e!==a.currentRoute?(t.dispose(),void 0):a.executeAction(t,e,r,n)},!i)return o(),void 0;if("function"!=typeof i)throw new TypeError("Controller#beforeAction: function expected. Old object-like form is not supported.");return s=t.beforeAction(r,e,n),s&&s.then?s.then(o):o()},t.prototype.adjustURL=function(t,e,r){var n;if(null!=t.path)return n=t.path+(t.query?"?"+t.query:""),r.changeURL?a.execute("router:changeURL",n,r):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/composer",function(e,r,n){"use strict";var i,o,s,a,l,c,u;u=t("underscore"),i=t("backbone"),l=t("chaplin/mediator"),c=t("chaplin/lib/utils"),s=t("chaplin/lib/composition"),a=t("chaplin/lib/event_broker"),n.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=i.Model.extend,u.extend(t.prototype,a),t.prototype.compositions=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.compositions={},l.setHandler("composer:compose",this.compose,this),l.setHandler("composer:retrieve",this.retrieve,this),this.subscribeEvent("dispatcher:dispatch",this.cleanup)},t.prototype.compose=function(t,e,r){return"function"==typeof e?r||e.prototype.dispose?e.prototype instanceof s?this._compose(t,{composition:e,options:r}):this._compose(t,{options:r,compose:function(){var t,r;return this.item=new e(this.options),t=this.item.autoRender,r=void 0===t||!t,r&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(t,{compose:e}):"function"==typeof r?this._compose(t,{compose:r,options:e}):this._compose(t,e)},t.prototype._compose=function(t,e){var r,n,i,o;if("function"!=typeof e.compose&&null==e.composition)throw new Error("Composer#compose was used incorrectly");return null!=e.composition?r=new e.composition(e.options):(r=new s(e.options),r.compose=e.compose,e.check&&(r.check=e.check)),n=this.compositions[t],i=!1,n&&n.check(r.options)?n.stale(!1):(n&&n.dispose(),o=r.compose(r.options),i="function"==typeof(null!=o?o.then:void 0),r.stale(!1),this.compositions[t]=r),i?o:this.compositions[t].item},t.prototype.retrieve=function(t){var e;return e=this.compositions[t],e&&!e.stale()?e.item:void 0},t.prototype.cleanup=function(){var t,e,r;r=this.compositions;for(e in r)t=r[e],t.stale()?(t.dispose(),delete this.compositions[e]):t.stale(!0)},t.prototype.dispose=function(){var t,e,r;if(!this.disposed){this.unsubscribeAllEvents(),l.removeHandlers(this),r=this.compositions;for(e in r)t=r[e],t.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/controllers/controller",function(e,r,n){"use strict";var i,o,s,a,l,c,u=[].slice,p={}.hasOwnProperty;c=t("underscore"),i=t("backbone"),s=t("chaplin/lib/event_broker"),a=t("chaplin/lib/helpers"),l=t("chaplin/mediator"),n.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=i.Model.extend,c.extend(t.prototype,i.Events),c.extend(t.prototype,s),t.prototype.view=null,t.prototype.redirected=!1,t.prototype.initialize=function(){},t.prototype.beforeAction=function(){},t.prototype.adjustTitle=function(t){return l.execute("adjustTitle",t)},t.prototype.compose=function(){var t;return t=1===arguments.length?"retrieve":"compose",l.execute.apply(l,["composer:"+t].concat(u.call(arguments)))},t.prototype.redirectTo=function(t,e,r){return this.redirected=!0,a.redirectTo(t,e,r)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e;if(!this.disposed){for(e in this)p.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&(t.dispose(),delete this[e]));return this.unsubscribeAllEvents(),this.stopListening(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/models/collection",function(e,r,n){"use strict";var i,o,s,a,l,c,u={}.hasOwnProperty,p=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};c=t("underscore"),i=t("backbone"),s=t("chaplin/lib/event_broker"),a=t("chaplin/models/model"),l=t("chaplin/lib/utils"),n.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),c.extend(e.prototype,s),e.prototype.model=a,e.prototype.serialize=function(){return this.map(l.serialize)},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,r,n;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["model","models","_byId","_byCid","_callbacks"],r=0,n=e.length;n>r;r++)t=e[r],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(i.Collection)}),t.register("chaplin/models/model",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p={}.hasOwnProperty,h=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};u=t("underscore"),i=t("backbone"),c=t("chaplin/lib/utils"),o=t("chaplin/lib/event_broker"),a=function(t,e,r){var n,o,s,a,u,p,h,f;n=c.beget(e),null==r&&(r={}),r[t.cid]=!0;for(o in e)if(u=e[o],u instanceof i.Model)n[o]=l(u,t,r);else if(u instanceof i.Collection){for(a=[],f=u.models,p=0,h=f.length;h>p;p++)s=f[p],a.push(l(s,t,r));n[o]=a}return delete r[t.cid],n},l=function(t,e,r){var n;return t===e||t.cid in r?null:(n="function"==typeof t.getAttributes?t.getAttributes():t.attributes,a(t,n,r))},n.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),u.extend(e.prototype,o),e.prototype.getAttributes=function(){return this.attributes},e.prototype.serialize=function(){return a(this,this.getAttributes())},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,r,n;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],r=0,n=e.length;n>r;r++)t=e[r],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(i.Model)}),t.register("chaplin/views/layout",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p,h,f=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,g=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};h=t("underscore"),o=t("backbone"),u=t("chaplin/mediator"),c=t("chaplin/lib/helpers"),p=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),l=t("chaplin/views/view"),i=o.$,n.exports=a=function(t){function e(t){null==t&&(t={}),this.openLink=f(this.openLink,this),this.globalRegions=[],this.title=t.title,t.regions&&(this.regions=t.regions),this.settings=h.defaults(t,{titleTemplate:function(t){var e;return e=t.subtitle?""+t.subtitle+" – ":"",e+t.title},openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),u.setHandler("region:show",this.showRegion,this),u.setHandler("region:register",this.registerRegionHandler,this),u.setHandler("region:unregister",this.unregisterRegionHandler,this),u.setHandler("region:find",this.regionByName,this),u.setHandler("adjustTitle",this.adjustTitle,this),e.__super__.constructor.apply(this,arguments),this.settings.routeLinks&&this.startLinkRouting()}return g(e,t),e.prototype.el="body",e.prototype.keepElement=!0,e.prototype.title="",e.prototype.globalRegions=null,e.prototype.listen={"beforeControllerDispose mediator":"scroll"},e.prototype.scroll=function(){var t;return t=this.settings.scrollTo,t?window.scrollTo(t[0],t[1]):void 0},e.prototype.adjustTitle=function(t){var e,r=this;return null==t&&(t=""),e=this.settings.titleTemplate({title:this.title,subtitle:t}),setTimeout(function(){return document.title=e,r.publishEvent("adjustTitle",t,e)},50),e},e.prototype.startLinkRouting=function(){var t;return(t=this.settings.routeLinks)?i?this.$el.on("click",t,this.openLink):this.delegate("click",t,this.openLink):void 0},e.prototype.stopLinkRouting=function(){var t;return t=this.settings.routeLinks,i?t?this.$el.off("click",t):void 0:this.undelegate("click",t,this.openLink)},e.prototype.isExternalLink=function(t){var e,r;return"_blank"===t.target||"external"===t.rel||"http:"!==(e=t.protocol)&&"https:"!==e&&"file:"!==e||(r=t.hostname)!==location.hostname&&""!==r},e.prototype.openLink=function(t){var e,r,n,s,a,l;if(!(p.modifierKeyPressed(t)||(e=i?t.currentTarget:t.delegateTarget,s="A"===e.nodeName,n=e.getAttribute("href")||e.getAttribute("data-href")||null,null==n||""===n||"#"===n.charAt(0)||(a=this.settings.skipRouting,l=typeof a,"function"===l&&!a(n,e)||"string"===l&&(i?i(e).is(a):o.utils.matchesSelector(e,a)))))){if(r=s&&this.isExternalLink(e))return this.settings.openExternalToBlank&&(t.preventDefault(),window.open(n)),void 0;c.redirectTo({url:n}),t.preventDefault()}},e.prototype.registerRegionHandler=function(t,e,r){return null!=e?this.registerGlobalRegion(t,e,r):this.registerGlobalRegions(t)},e.prototype.registerGlobalRegion=function(t,e,r){return this.unregisterGlobalRegion(t,e),this.globalRegions.unshift({instance:t,name:e,selector:r})},e.prototype.registerGlobalRegions=function(t){var e,r,n,i,o,s;for(s=p.getAllPropertyVersions(t,"regions"),i=0,o=s.length;o>i;i++){n=s[i];for(e in n)r=n[e],this.registerGlobalRegion(t,e,r)}},e.prototype.unregisterRegionHandler=function(t,e){return null!=e?this.unregisterGlobalRegion(t,e):this.unregisterGlobalRegions(t)},e.prototype.unregisterGlobalRegion=function(t,e){var r,n;return r=t.cid,this.globalRegions=function(){var t,i,o,s;for(o=this.globalRegions,s=[],t=0,i=o.length;i>t;t++)n=o[t],(n.instance.cid!==r||n.name!==e)&&s.push(n);return s}.call(this)},e.prototype.unregisterGlobalRegions=function(t){var e;return this.globalRegions=function(){var r,n,i,o;for(i=this.globalRegions,o=[],r=0,n=i.length;n>r;r++)e=i[r],e.instance.cid!==t.cid&&o.push(e);return o}.call(this)},e.prototype.regionByName=function(t){var e,r,n,i;for(i=this.globalRegions,r=0,n=i.length;n>r;r++)if(e=i[r],e.name===t&&!e.instance.stale)return e},e.prototype.showRegion=function(t,e){var r;if(r=this.regionByName(t),!r)throw new Error("No region registered under "+t);return e.container=""===r.selector?i?r.instance.$el:r.instance.el:r.instance.noWrap?i?i(r.instance.container).find(r.selector):r.instance.container.querySelector(r.selector):r.instance[i?"$":"find"](r.selector)},e.prototype.dispose=function(){var t,r,n,i;if(!this.disposed){for(this.stopLinkRouting(),i=["globalRegions","title","route"],r=0,n=i.length;n>r;r++)t=i[r],delete this[t];return u.removeHandlers(this),e.__super__.dispose.apply(this,arguments)}},e}(l)}),t.register("chaplin/views/view",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p,h,f,d={}.hasOwnProperty,g=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};f=t("underscore"),o=t("backbone"),u=t("chaplin/mediator"),s=t("chaplin/lib/event_broker"),h=t("chaplin/lib/utils"),i=o.$,c=function(){return Function.prototype.bind?function(t,e){return t.bind(e)}:f.bind?f.bind:void 0}(),p=function(){return i?function(t,e){return t.html(e)}:function(t,e){return t.innerHTML=e}}(),l=function(){return i?function(t){var e;return e=i(t.container),"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}:function(t){var e;return e="string"==typeof t.container?document.querySelector(t.container):t.container,"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}}(),n.exports=a=function(t){function e(t){var r,n,o,s,a=this;if(t)for(r in t)n=t[r],y.call(this.optionNames,r)>=0&&(this[r]=n);s=this.render,this.render=function(){return a.disposed?!1:(s.apply(a,arguments),a.autoAttach&&a.attach.apply(a,arguments),a)},this.subviews=[],this.subviewsByName={},this.noWrap&&(this.region&&(o=u.execute("region:find",this.region),null!=o&&(this.el=null!=o.instance.container?null!=o.instance.region?i(o.instance.container).find(o.selector):o.instance.container:o.instance.$(o.selector))),this.container&&(this.el=this.container)),e.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(t){return t&&t!==a.collection?void 0:a.dispose()}),null!=this.regions&&u.execute("region:register",this),this.autoRender&&this.render()}return g(e,t),f.extend(e.prototype,s),e.prototype.autoRender=!1,e.prototype.autoAttach=!0,e.prototype.container=null,e.prototype.containerMethod=i?"append":"appendChild",e.prototype.regions=null,e.prototype.region=null,e.prototype.stale=!1,e.prototype.noWrap=!1,e.prototype.keepElement=!1,e.prototype.subviews=null,e.prototype.subviewsByName=null,e.prototype.optionNames=["autoAttach","autoRender","container","containerMethod","region","regions","noWrap"],e.prototype.delegate=function(t,r,n){var i,s,a,l,u,p;if(o.View.prototype.delegate)return e.__super__.delegate.apply(this,arguments);if("string"!=typeof t)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)l=r;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(p=r,"string"!=typeof p)throw new TypeError("View#delegate: second argument must be a string");l=n}if("function"!=typeof l)throw new TypeError("View#delegate: handler argument must be function");return u=function(){var e,r,n,i;for(n=t.split(" "),i=[],e=0,r=n.length;r>e;e++)s=n[e],i.push(""+s+".delegate"+this.cid);return i}.call(this),a=u.join(" "),i=c(l,this),this.$el.on(a,p||null,i),i},e.prototype._delegateEvents=function(t){var e,r,n,i,s,a,l;if(2===o.View.prototype.delegateEvents.length)return o.View.prototype.delegateEvents.call(this,t,!0);for(i in t){if(l=t[i],n="function"==typeof l?l:this[l],!n)throw new Error("Method '"+n+"' does not exist");s=i.match(/^(\S+)\s*(.*)$/),r=""+s[1]+".delegateEvents"+this.cid,a=s[2],e=c(n,this),this.$el.on(r,a||null,e)}},e.prototype.delegateEvents=function(t,e){var r,n,i,o;if(e||this.undelegateEvents(),t)return this._delegateEvents(t);for(o=h.getAllPropertyVersions(this,"events"),n=0,i=o.length;i>n;n++){if(r=o[n],"function"==typeof r)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(r)}},e.prototype.undelegate=function(t,r,n){var i,s,a,l,c;if(o.View.prototype.undelegate)return e.__super__.undelegate.apply(this,arguments);if(t){if("string"!=typeof t)throw new TypeError("View#undelegate: first argument must be a string");if(2===arguments.length)"string"==typeof r?c=r:a=r;else if(3===arguments.length){if(c=r,"string"!=typeof c)throw new TypeError("View#undelegate: second argument must be a string");a=n}return l=function(){var e,r,n,o;for(n=t.split(" "),o=[],e=0,r=n.length;r>e;e++)i=n[e],o.push(""+i+".delegate"+this.cid);return o}.call(this),s=l.join(" "),this.$el.off(s,c||null)}return this.$el.off(".delegate"+this.cid)},e.prototype.delegateListeners=function(){var t,e,r,n,i,o,s,a,l;if(this.listen)for(a=h.getAllPropertyVersions(this,"listen"),o=0,s=a.length;s>o;o++){i=a[o];for(e in i){if(r=i[e],"function"!=typeof r&&(r=this[r]),"function"!=typeof r)throw new Error("View#delegateListeners: "+(""+r+" must be function"));l=e.split(" "),t=l[0],n=l[1],this.delegateListener(t,n,r)}}},e.prototype.delegateListener=function(t,e,r){var n;"model"===e||"collection"===e?(n=this[e],n&&this.listenTo(n,t,r)):"mediator"===e?this.subscribeEvent(t,r):e||this.on(t,r,this)},e.prototype.registerRegion=function(t,e){return u.execute("region:register",this,t,e)},e.prototype.unregisterRegion=function(t){return u.execute("region:unregister",this,t)},e.prototype.unregisterAllRegions=function(){return u.execute({name:"region:unregister",silent:!0},this)},e.prototype.subview=function(t,e){var r,n;return n=this.subviews,r=this.subviewsByName,t&&e?(this.removeSubview(t),n.push(e),r[t]=e,e):t?r[t]:void 0},e.prototype.removeSubview=function(t){var e,r,n,i,o,s,a;if(t){if(s=this.subviews,e=this.subviewsByName,"string"==typeof t)n=t,a=e[n];else{a=t;for(i in e)if(o=e[i],o===a){n=i;break}}if(n&&a&&a.dispose)return a.dispose(),r=h.indexOf(s,a),-1!==r&&s.splice(r,1),delete e[n]}},e.prototype.getTemplateData=function(){var t,e;return t=this.model?h.serialize(this.model):this.collection?{items:h.serialize(this.collection),length:this.collection.length}:{},e=this.model||this.collection,e&&("function"!=typeof e.isSynced||"synced"in t||(t.synced=e.isSynced())),t},e.prototype.getTemplateFunction=function(){throw new Error("View#getTemplateFunction must be overridden")},e.prototype.render=function(){var t,e,r;if(this.disposed)return!1;if(r=this.getTemplateFunction(),"function"==typeof r)if(e=r(this.getTemplateData()),this.noWrap){if(t=document.createElement("div"),t.innerHTML=e,t.children.length>1)throw new Error("There must be a single top-level element when using `noWrap`.");this.undelegateEvents(),this.setElement(t.firstChild,!0)}else p(i?this.$el:this.el,e);return this},e.prototype.attach=function(){return null!=this.region&&u.execute("region:show",this.region,this),this.container&&!document.body.contains(this.el)?(l(this),this.trigger("addedToDOM")):void 0},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,r,n,i,o,s,a;if(!this.disposed){for(this.unregisterAllRegions(),a=this.subviews,n=0,o=a.length;o>n;n++)r=a[n],r.dispose();for(this.unsubscribeAllEvents(),this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),e=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],i=0,s=e.length;s>i;i++)t=e[i],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(o.View)}),t.register("chaplin/views/collection_view",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p,h,f,d,g,y=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,v=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};g=t("underscore"),o=t("backbone"),a=t("chaplin/views/view"),d=t("chaplin/lib/utils"),i=o.$,u=function(t,e){var r,n,i,s;if(!e)return t;for(s=[],n=0,i=t.length;i>n;n++)r=t[n],o.utils.matchesSelector(r,e)&&s.push(r);return s},f=function(){return i?function(t,e){return t.toggle(e)}:function(t,e){return t.style.display=e?"":"none"}}(),l=function(){return i?function(t,e){return t.addClass(e)}:function(t,e){return t.classList.add(e)}}(),h=function(){return i?function(t,e,r){return e?l(t,r):t.css("opacity",0)}:function(t,e,r){return e?l(t,r):t.style.opacity=0}}(),c=function(){return i?function(t,e){return t.animate({opacity:1},e)}:function(t,e){return t.style.transition="opacity "+e/1e3+"s",t.opacity=1}}(),p=function(){return i?function(t,e,r,n,i){var o,s,a,l,c;return a=r>0&&n>r,l=function(t){return 0===t||r===t},a||i?(o=t.children(i),s=o.length,o[r]!==e?l(s)?t.append(e):0===r?o.eq(r).before(e):o.eq(r-1).after(e):void 0):(c=l(n)?"append":"prepend",t[c](e))}:function(t,e,r,n,i){var o,s,a,l,c;return a=r>0&&n>r,l=function(t){return 0===t||r===t},a||i?(o=u(t.children,i),s=o.length,o[r]!==e?l(s)?t.appendChild(e):0===r?t.insertBefore(e,o[r]):(c=o[r-1],t.lastChild===c?t.appendChild(e):t.insertBefore(e,c.nextElementSibling)):void 0):l(n)?t.appendChild(e):t.insertBefore(e,t.firstChild)}}(),n.exports=s=function(t){function e(){this.renderAllItems=y(this.renderAllItems,this),this.toggleFallback=y(this.toggleFallback,this),this.itemsReset=y(this.itemsReset,this),this.itemRemoved=y(this.itemRemoved,this),this.itemAdded=y(this.itemAdded,this),this.visibleItems=[],e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.itemView=null,e.prototype.autoRender=!0,e.prototype.renderItems=!0,e.prototype.animationDuration=500,e.prototype.useCssAnimation=!1,e.prototype.animationStartClass="animated-item-view",e.prototype.animationEndClass="animated-item-view-end",e.prototype.listSelector=null,e.prototype.$list=null,e.prototype.fallbackSelector=null,e.prototype.$fallback=null,e.prototype.loadingSelector=null,e.prototype.$loading=null,e.prototype.itemSelector=void 0,e.prototype.filterer=null,e.prototype.filterCallback=function(t,e){return i&&t.$el.stop(!0,!0),f(i?t.$el:t.el,e)},e.prototype.visibleItems=null,e.prototype.optionNames=a.prototype.optionNames.concat(["renderItems","itemView"]),e.prototype.initialize=function(t){return null==t&&(t={}),this.addCollectionListeners(),null!=t.filterer?this.filter(t.filterer):void 0},e.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},e.prototype.getTemplateData=function(){var t;return t={length:this.collection.length},"function"==typeof this.collection.isSynced&&(t.synced=this.collection.isSynced()),t},e.prototype.getTemplateFunction=function(){},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),i?this.$list=this.listSelector?this.$(this.listSelector):this.$el:this.list=this.listSelector?this.find(this.listSelector):this.el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},e.prototype.itemAdded=function(t,e,r){return this.insertView(t,this.renderItem(t),r.at)},e.prototype.itemRemoved=function(t){return this.removeViewForItem(t)},e.prototype.itemsReset=function(){return this.renderAllItems()},e.prototype.initFallback=function(){return this.fallbackSelector?(i?this.$fallback=this.$(this.fallbackSelector):this.fallback=this.find(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},e.prototype.toggleFallback=function(){var t;return t=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),f(i?this.$fallback:this.fallback,t)},e.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(i?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},e.prototype.toggleLoadingIndicator=function(){var t;return t=0===this.collection.length&&this.collection.isSyncing(),f(i?this.$loading:this.loading,t)},e.prototype.getItemViews=function(){var t,e,r,n;if(t={},this.subviews.length>0){n=this.subviewsByName;for(e in n)r=n[e],"itemView:"===e.slice(0,9)&&(t[e.slice(9)]=r)}return t},e.prototype.filter=function(t,e){var r,n,i,o,s,a,l,c,u=this;if(this.filterer=t,e&&(this.filterCallback=e),null==e&&(e=this.filterCallback),r=function(){var t;if(u.subviews.length>0)for(t in u.subviewsByName)if("itemView:"===t.slice(0,9))return!0;return!1}())for(c=this.collection.models,i=a=0,l=c.length;l>a;i=++a){if(o=c[i],n="function"==typeof t?t(o,i):!0,s=this.subview("itemView:"+o.cid),!s)throw new Error("CollectionView#filter: no view found for "+o.cid);this.filterCallback(s,n),this.updateVisibleItems(s.model,n,!1)}return this.trigger("visibilityChange",this.visibleItems)},e.prototype.renderAllItems=function(){var t,e,r,n,i,o,s,a,l,c,u;for(n=this.collection.models,this.visibleItems=[],i={},s=0,l=n.length;l>s;s++)r=n[s],o=this.subview("itemView:"+r.cid),o&&(i[r.cid]=o);u=this.getItemViews();for(t in u)m.call(u,t)&&(o=u[t],t in i||this.removeSubview("itemView:"+t));for(e=a=0,c=n.length;c>a;e=++a)r=n[e],o=this.subview("itemView:"+r.cid),o?this.insertView(r,o,e,!1):this.insertView(r,this.renderItem(r),e);return 0===n.length?this.trigger("visibilityChange",this.visibleItems):void 0},e.prototype.renderItem=function(t){var e;return e=this.subview("itemView:"+t.cid),e||(e=this.initItemView(t),this.subview("itemView:"+t.cid,e)),e.render(),e},e.prototype.initItemView=function(t){if(this.itemView)return new this.itemView({autoRender:!1,model:t});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},e.prototype.insertView=function(t,e,r,n){var o,s,a,u,f=this;return null==n&&(n=!0),0===this.animationDuration&&(n=!1),"number"!=typeof r&&(r=this.collection.indexOf(t)),s="function"==typeof this.filterer?this.filterer(t,r):!0,o=i?e.$el:e.el,s&&n&&h(o,this.useCssAnimation,this.animationStartClass),this.filterer&&this.filterCallback(e,s),a=this.collection.length,u=i?this.$list:this.list,p(u,o,r,a,this.itemSelector),e.trigger("addedToParent"),this.updateVisibleItems(t,s),s&&n&&(this.useCssAnimation?setTimeout(function(){return l(o,f.animationEndClass)},0):c(o,this.animationDuration)),e},e.prototype.removeViewForItem=function(t){return this.updateVisibleItems(t,!1),this.removeSubview("itemView:"+t.cid)},e.prototype.updateVisibleItems=function(t,e,r){var n,i,o;return null==r&&(r=!0),i=!1,o=d.indexOf(this.visibleItems,t),n=-1!==o,e&&!n?(this.visibleItems.push(t),i=!0):!e&&n&&(this.visibleItems.splice(o,1),i=!0),i&&r&&this.trigger("visibilityChange",this.visibleItems),i},e.prototype.dispose=function(){var t,r,n,i;if(!this.disposed){for(r=["$list","$fallback","$loading","visibleItems"],n=0,i=r.length;i>n;n++)t=r[n],delete this[t];return e.__super__.dispose.apply(this,arguments)}},e}(a)}),t.register("chaplin/lib/route",function(e,r,n){"use strict";var i,o,s,a,l,c,u=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty;c=t("underscore"),i=t("backbone"),s=t("chaplin/lib/event_broker"),o=t("chaplin/controllers/controller"),l=t("chaplin/lib/utils"),n.exports=a=function(){function t(t,e,r,n){var i;if(this.pattern=t,this.controller=e,this.action=r,this.handler=u(this.handler,this),this.addParamName=u(this.addParamName,this),"string"!=typeof this.pattern)throw new Error("Route: RegExps are not supported.        Use strings with :names and `constraints` option of route");if(this.options=n?c.extend({},n):{},null!=this.options.name&&(this.name=this.options.name),this.name&&-1!==this.name.indexOf("#"))throw new Error('Route: "#" cannot be used in name');if(null==(i=this.name)&&(this.name=this.controller+"#"+this.action),this.paramNames=[],this.action in o.prototype)throw new Error("Route: You should not use existing controller properties as action names");
this.createRegExp(),"function"==typeof Object.freeze&&Object.freeze(this)}var e;return t.extend=i.Model.extend,c.extend(t.prototype,s),e=/[-[\]{}()+?.,\\^$|#\s]/g,t.prototype.matches=function(t){var e,r,n,i,o,s,a;if("string"==typeof t)return t===this.name;for(n=0,a=["name","action","controller"],o=0,s=a.length;s>o;o++)if(r=a[o],n++,i=t[r],i&&i!==this[r])return!1;return e=1===n&&("action"===r||"controller"===r),!e},t.prototype.reverse=function(t,e){var r,n,i,o,s,a,c;if(t=this.normalizeParams(t),t===!1)return!1;for(i=this.pattern,c=this.paramNames,s=0,a=c.length;a>s;s++)r=c[s],o=t[r],i=i.replace(RegExp("[:*]"+r,"g"),o);return e?"object"==typeof e?(n=l.queryParams.stringify(e),i+=n?"?"+n:""):i+=("?"===e[0]?"":"?")+e:i},t.prototype.normalizeParams=function(t){var e,r,n,i,o,s;if(l.isArray(t)){if(t.length<this.paramNames.length)return!1;for(n={},s=this.paramNames,e=i=0,o=s.length;o>i;e=++i)r=s[e],n[r]=t[e];if(!this.testConstraints(n))return!1;t=n}else if(null==t&&(t={}),!this.testParams(t))return!1;return t},t.prototype.testConstraints=function(t){var e,r,n;if(r=this.options.constraints)for(n in r)if(p.call(r,n)&&(e=r[n],!e.test(t[n])))return!1;return!0},t.prototype.testParams=function(t){var e,r,n,i;for(i=this.paramNames,r=0,n=i.length;n>r;r++)if(e=i[r],void 0===t[e])return!1;return this.testConstraints(t)},t.prototype.createRegExp=function(){var t;return t=this.pattern.replace(e,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+t+"(?=\\?|$)")},t.prototype.addParamName=function(t,e){return this.paramNames.push(e),":"===t.charAt(0)?"([^/?]+)":"(.*?)"},t.prototype.test=function(t){var e,r;return(r=this.regExp.test(t))?(e=this.options.constraints,e?this.testConstraints(this.extractParams(t)):!0):!1},t.prototype.handler=function(t,e){var r,n,i,o,s,a;return e=e?c.extend({},e):{},"object"==typeof t?(o=l.queryParams.stringify(e.query),n=t,i=this.reverse(n)):(a=t.split("?"),i=a[0],o=a[1],null==o?o="":e.query=l.queryParams.parse(o),n=this.extractParams(i)),r=c.extend({},n,this.options.params),s={path:i,action:this.action,controller:this.controller,name:this.name,query:o},this.publishEvent("router:match",s,r,e)},t.prototype.extractParams=function(t){var e,r,n,i,o,s,a,l;for(o={},n=this.regExp.exec(t),l=n.slice(1),e=s=0,a=l.length;a>s;e=++s)r=l[e],i=this.paramNames.length?this.paramNames[e]:e,o[i]=r;return o},t}()}),t.register("chaplin/lib/router",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p,h=function(t,e){return function(){return t.apply(e,arguments)}};p=t("underscore"),i=t("backbone"),c=t("chaplin/mediator"),o=t("chaplin/lib/event_broker"),s=t("chaplin/lib/history"),a=t("chaplin/lib/route"),u=t("chaplin/lib/utils"),n.exports=l=function(){function t(t){var e;this.options=null!=t?t:{},this.match=h(this.match,this),e="file:"!==window.location.protocol,p.defaults(this.options,{pushState:e,root:"/"}),this.removeRoot=new RegExp("^"+u.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.oldEventError),this.subscribeEvent("!router:routeByName",this.oldEventError),this.subscribeEvent("!router:changeURL",this.oldURLEventError),c.setHandler("router:route",this.route,this),c.setHandler("router:reverse",this.reverse,this),c.setHandler("router:changeURL",this.changeURL,this),this.createHistory()}return t.extend=i.Model.extend,p.extend(t.prototype,o),t.prototype.oldEventError=function(){throw new Error("!router:route and !router:routeByName events were removed.  Use `Chaplin.helpers.redirectTo`")},t.prototype.oldURLEventError=function(){throw new Error('!router:changeURL event was removed.  Use mediator.execute("router:changeURL")')},t.prototype.createHistory=function(){return i.history=new s},t.prototype.startHistory=function(){return i.history.start(this.options)},t.prototype.stopHistory=function(){return i.History.started?i.history.stop():void 0},t.prototype.findHandler=function(t){var e,r,n,o;for(o=i.history.handlers,r=0,n=o.length;n>r;r++)if(e=o[r],t(e))return e},t.prototype.match=function(t,e,r){var n,o,s,l;if(null==r&&(r={}),2===arguments.length&&"object"==typeof e){if(r=e,o=r.controller,n=r.action,!o||!n)throw new Error("Router#match must receive either target or options.controller & options.action")}else{if(o=r.controller,n=r.action,o||n)throw new Error("Router#match cannot use both target and options.controller / options.action");l=e.split("#"),o=l[0],n=l[1]}return s=new a(t,o,n,r),i.history.handlers.push({route:s,callback:s.handler}),s},t.prototype.route=function(t,e,r){var n,i;if(e=e?u.isArray(e)?e.slice():p.extend({},e):{},"object"==typeof t&&(i=t.url),null!=i?(i=i.replace(this.removeRoot,""),n=this.findHandler(function(t){return t.route.test(i)}),r=e,e=null):(r=r?p.extend({},r):{},n=this.findHandler(function(r){return r.route.matches(t)&&(e=r.route.normalizeParams(e))?!0:!1})),n)return p.defaults(r,{changeURL:!0}),n.callback(i||e,r),!0;throw new Error("Router#route: request was not routed")},t.prototype.reverse=function(t,e,r){var n,o,s,a,l,c,u;if(a=this.options.root,null!=e&&"object"!=typeof e)throw new TypeError("Router#reverse: params must be an array or an object");for(o=i.history.handlers,c=0,u=o.length;u>c;c++)if(n=o[c],n.route.matches(t)&&(s=n.route.reverse(e,r),s!==!1))return l=a?a+s:s;throw new Error("Router#reverse: invalid route specified")},t.prototype.changeURL=function(t,e){var r;return null==e&&(e={}),r={trigger:e.trigger===!0,replace:e.replace===!0},i.history.navigate(t,r)},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete i.history,this.unsubscribeAllEvents(),c.removeHandlers(this),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/lib/history",function(e,r,n){"use strict";var i,o,s,a,l,c,u,p={}.hasOwnProperty,h=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};u=t("underscore"),i=t("backbone"),l=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,s=/msie [\w.]+/,c=/\/$/,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.getFragment=function(t,e){var r;return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=this.location.pathname+this.location.search,r=this.root.replace(c,""),t.indexOf(r)||(t=t.substr(r.length))):t=this.getHash()),t.replace(l,"")},e.prototype.start=function(t){var e,r,n;if(i.History.started)throw new Error("Backbone.history has already been started");return i.History.started=!0,this.options=u.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=Boolean(this.options.pushState),this._hasPushState=Boolean(this.options.pushState&&this.history&&this.history.pushState),r=this.getFragment(),this.root=("/"+this.root+"/").replace(a,"/"),this._hasPushState?i.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window?i.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r,n=this.location,e=n.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&e&&n.hash&&(this.fragment=this.getHash().replace(l,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},e}(i.History),n.exports=i.$?o:i.History}),t.register("chaplin/lib/delayer",function(t,e,r){"use strict";var n;n={setTimeout:function(t,e,r){var n,i,o,s=this;return null==(o=this.timeouts)&&(this.timeouts={}),this.clearTimeout(t),i=function(){return delete s.timeouts[t],r()},n=setTimeout(i,e),this.timeouts[t]=n,n},clearTimeout:function(t){this.timeouts&&null!=this.timeouts[t]&&(clearTimeout(this.timeouts[t]),delete this.timeouts[t])},clearAllTimeouts:function(){var t,e,r;if(this.timeouts){r=this.timeouts;for(e in r)t=r[e],this.clearTimeout(e)}},setInterval:function(t,e,r){var n,i;return this.clearInterval(t),null==(i=this.intervals)&&(this.intervals={}),n=setInterval(r,e),this.intervals[t]=n,n},clearInterval:function(t){this.intervals&&this.intervals[t]&&(clearInterval(this.intervals[t]),delete this.intervals[t])},clearAllIntervals:function(){var t,e,r;if(this.intervals){r=this.intervals;for(e in r)t=r[e],this.clearInterval(e)}},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},"function"==typeof Object.freeze&&Object.freeze(n),r.exports=n}),t.register("chaplin/lib/event_broker",function(e,r,n){"use strict";var i,o,s=[].slice;o=t("chaplin/mediator"),i={subscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return o.unsubscribe(t,e,this),o.subscribe(t,e,this)},unsubscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return o.unsubscribe(t,e)},unsubscribeAllEvents:function(){return o.unsubscribe(null,null,this)},publishEvent:function(){var t,e;if(e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],"string"!=typeof e)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return o.publish.apply(o,[e].concat(s.call(t)))}},"function"==typeof Object.freeze&&Object.freeze(i),n.exports=i}),t.register("chaplin/lib/support",function(t,e,r){"use strict";var n;n={propertyDescriptors:function(){var t;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return t={},Object.defineProperty(t,"foo",{value:"bar"}),"bar"===t.foo}catch(e){return!1}}()},r.exports=n}),t.register("chaplin/lib/composition",function(e,r,n){"use strict";var i,o,s,a,l,c={}.hasOwnProperty;l=t("underscore"),i=t("backbone"),s=t("chaplin/lib/event_broker"),a=Object.prototype.hasOwnProperty,n.exports=o=function(){function t(t){null!=t&&(this.options=l.extend({},t)),this.item=this,this.initialize(this.options)}return t.extend=i.Model.extend,l.extend(t.prototype,i.Events),l.extend(t.prototype,s),t.prototype.item=null,t.prototype.options=null,t.prototype._stale=!1,t.prototype.initialize=function(){},t.prototype.compose=function(){},t.prototype.check=function(t){return l.isEqual(this.options,t)},t.prototype.stale=function(t){var e,r;if(null==t)return this._stale;this._stale=t;for(r in this)e=this[r],e&&e!==this&&"object"==typeof e&&a.call(e,"stale")&&(e.stale=t)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,r,n,i;if(!this.disposed){for(e in this)c.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&t!==this&&(t.dispose(),delete this[e]));for(this.unsubscribeAllEvents(),this.stopListening(),r=["redirected"],n=0,i=r.length;i>n;n++)e=r[n],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/lib/sync_machine",function(t,e,r){"use strict";var n,i,o,s,a,l,c,u,p,h;for(a="unsynced",o="syncing",i="synced",n="syncStateChange",s={_syncState:a,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===a},isSynced:function(){return this._syncState===i},isSyncing:function(){return this._syncState===o},unsync:function(){var t;((t=this._syncState)===o||t===i)&&(this._previousSync=this._syncState,this._syncState=a,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},beginSync:function(){var t;((t=this._syncState)===a||t===i)&&(this._previousSync=this._syncState,this._syncState=o,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},finishSync:function(){this._syncState===o&&(this._previousSync=this._syncState,this._syncState=i,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},abortSync:function(){this._syncState===o&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))}},h=[a,o,i,n],c=function(t){return s[t]=function(e,r){return null==r&&(r=this),this.on(t,e,r),this._syncState===t?e.call(r):void 0}},u=0,p=h.length;p>u;u++)l=h[u],c(l);"function"==typeof Object.freeze&&Object.freeze(s),r.exports=s}),t.register("chaplin/lib/utils",function(e,r,n){"use strict";var i,o,s,a=[].slice,l=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},c={}.hasOwnProperty;s=t("underscore"),i=t("chaplin/lib/support"),o={beget:function(){var t;return"function"==typeof Object.create?Object.create:(t=function(){},function(e){return t.prototype=e,new t})}(),indexOf:function(){return Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:s.indexOf?s.indexOf:void 0}(),isArray:Array.isArray||s.isArray,serialize:function(t){if("function"==typeof t.serialize)return t.serialize();if("function"==typeof t.toJSON)return t.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var t;return i.propertyDescriptors?(t={writable:!1,enumerable:!0,configurable:!1},function(){var e,r,n,i,o;for(e=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],i=0,o=n.length;o>i;i++)r=n[i],t.value=e[r],Object.defineProperty(e,r,t);return!0}):function(){return!1}}(),getPrototypeChain:function(t){var e,r,n,i;for(e=[t.constructor.prototype];t=null!=(r=null!=(n=t.constructor)?n.__super__:void 0)?r:null!=(i=t.constructor)?i.superclass:void 0;)e.push(t);return e.reverse()},getAllPropertyVersions:function(t,e){var r,n,i,s,a,c;for(n=[],c=o.getPrototypeChain(t),s=0,a=c.length;a>s;s++)r=c[s],i=r[e],i&&l.call(n,i)<0&&n.push(i);return n},upcase:function(t){return t.charAt(0).toUpperCase()+t.substring(1)},escapeRegExp:function(t){return String(t||"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(t){return t.shiftKey||t.altKey||t.ctrlKey||t.metaKey},queryParams:{stringify:function(t){var e,r,n,i,s,a,l,u;i="",s=function(t,e){return null!=e?"&"+t+"="+encodeURIComponent(e):""};for(n in t)if(c.call(t,n))if(a=t[n],r=encodeURIComponent(n),o.isArray(a))for(l=0,u=a.length;u>l;l++)e=a[l],i+=s(r,e);else i+=s(r,a);return i&&i.substring(1)},parse:function(t){var e,r,n,i,o,s,a,l,c;if(o={},!t)return o;for(i=t.split("&"),a=0,l=i.length;l>a;a++)n=i[a],n.length&&(c=n.split("="),r=c[0],s=c[1],r.length&&(r=decodeURIComponent(r),s=decodeURIComponent(s),e=o[r],e?e.push?e.push(s):o[r]=[e,s]:o[r]=s));return o}}},"function"==typeof Object.seal&&Object.seal(o),n.exports=o}),t.register("chaplin/lib/helpers",function(e,r,n){"use strict";var i,o;o=t("chaplin/mediator"),i={reverse:function(t,e,r){return o.execute("router:reverse",t,e,r)},redirectTo:function(t,e,r){return o.execute("router:route",t,e,r)}},n.exports=i}),t.register("chaplin",function(e,r,n){n.exports={Application:t("chaplin/application"),mediator:t("chaplin/mediator"),Dispatcher:t("chaplin/dispatcher"),Controller:t("chaplin/controllers/controller"),Composer:t("chaplin/composer"),Composition:t("chaplin/lib/composition"),Collection:t("chaplin/models/collection"),Model:t("chaplin/models/model"),Layout:t("chaplin/views/layout"),View:t("chaplin/views/view"),CollectionView:t("chaplin/views/collection_view"),Route:t("chaplin/lib/route"),Router:t("chaplin/lib/router"),Delayer:t("chaplin/lib/delayer"),EventBroker:t("chaplin/lib/event_broker"),helpers:t("chaplin/lib/helpers"),support:t("chaplin/lib/support"),SyncMachine:t("chaplin/lib/sync_machine"),utils:t("chaplin/lib/utils")}});var e=function(e,r){t.register("backbone",function(t,r,n){n.exports=e}),t.register("underscore",function(t,e,n){n.exports=r})};if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(r,n){return e(r,n),t("chaplin")});else if("object"==typeof module&&module&&module.exports)e(require("backbone"),require("underscore")),module.exports=t("chaplin");else{if("function"!=typeof require)throw new Error("Chaplin requires Common.js or AMD modules");e(window.Backbone,window._||window.Backbone.utils),window.Chaplin=t("chaplin")}}(),function(t,e){"object"==typeof exports&&"function"==typeof require?module.exports=e(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(r){return e(r||t.Backbone)}):e(Backbone)}(this,function(t){function e(){return(0|65536*(1+Math.random())).toString(16).substring(1)}function r(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function n(t){for(var e=t.length;e--;)if(t[e]===obj)return!0;return!1}function i(t,e){for(var r in e)t[r]=e[r];return t}return t.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},i(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=r(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t));var e=t.id.toString();return n(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){for(var t,e,r=[],n=0;n<this.records.length;n++)t=this.records[n],e=this.jsonData(this.localStorage().getItem(this.name+"-"+t)),null!=e&&r.push(e);return r},destroy:function(t){if(t.isNew())return!1;this.localStorage().removeItem(this.name+"-"+t.id);for(var e=t.id.toString(),r=0;r<this.records.length;r++)this.records[r]===e&&this.records.splice(r,1);return this.save(),t},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var r in t)e.test(r)&&t.removeItem(r);this.records.length=0},_storageSize:function(){return this.localStorage().length}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,r,n){var i,o,s=r.localStorage||r.collection.localStorage,a=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":i=void 0!=r.id?s.find(r):s.findAll();break;case"create":i=s.create(r);break;case"update":i=s.update(r);break;case"delete":i=s.destroy(r)}}catch(l){o=22===l.code&&0===s._storageSize()?"Private browsing is unsupported":l.message}return i?(n&&n.success&&("0.9.10"===t.VERSION?n.success(r,i,n):n.success(i)),a&&a.resolve(i)):(o=o?o:"Record Not Found",n&&n.error&&("0.9.10"===t.VERSION?n.error(r,o,n):n.error(o)),a&&a.reject(o)),n&&n.complete&&n.complete(i),a&&a.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,r,n){return t.getSyncMethod(r).apply(this,[e,r,n])},t.LocalStorage});var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var r=Object.prototype.toString,n="[object Function]",i="[object Object]";t.registerHelper=function(e,n,o){if(r.call(e)===i){if(o||n)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else o&&(n.not=o),this.helpers[e]=n},t.registerPartial=function(e,n){r.call(e)===i?t.Utils.extend(this.partials,e):this.partials[e]=n},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse||function(){},s=i.fn,a=r.call(e);return a===n&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?o(this):"[object Array]"===a?e.length>0?t.helpers.each(e,i):o(this):s(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var r=new t.K;return t.K.prototype=null,r},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,r){if(t.logger.level<=e){var n=t.logger.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,r)}}},t.log=function(e,r){t.logger.log(e,r)},t.registerHelper("each",function(e,i){var o,s=i.fn,a=i.inverse,l=0,c="",u=r.call(e);if(u===n&&(e=e.call(this)),i.data&&(o=t.createFrame(i.data)),e&&"object"==typeof e)if(e instanceof Array)for(var p=e.length;p>l;l++)o&&(o.index=l),c+=s(e[l],{data:o});else for(var h in e)e.hasOwnProperty(h)&&(o&&(o.key=h),c+=s(e[h],{data:o}),l++);return 0===l&&(c=a(this)),c}),t.registerHelper("if",function(e,i){var o=r.call(e);return o===n&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?i.inverse(this):i.fn(this)}),t.registerHelper("unless",function(e,r){return t.helpers["if"].call(this,e,{fn:r.inverse,inverse:r.fn})}),t.registerHelper("with",function(e,i){var o=r.call(e);return o===n&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:i.fn(e)}),t.registerHelper("log",function(e,r){var n=r.data&&null!=r.data.level?parseInt(r.data.level,10):1;t.log(n,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<o.length;e++)this[o[e]]=t[o[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,l=/[&<>"'`]/,c=function(t){return s[t]||"&amp;"};t.Utils={extend:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),l.test(e)?e.replace(a,c):e)},isEmpty:function(t){return t||0===t?"[object Array]"===r.call(t)&&0===t.length?!0:!1:!0}},t.VM={template:function(e){var r={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,r,n){var i=this.programs[e];return n?i=t.VM.program(e,r,n):i||(i=this.programs[e]=t.VM.program(e,r)),i},merge:function(e,r){var n=e||r;return e&&r&&(n={},t.Utils.extend(n,r),t.Utils.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var o=e.call(r,t,n,i.helpers,i.partials,i.data),s=r.compilerInfo||[],a=s[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var c=t.REVISION_CHANGES[l],u=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(t,e,r){var n=Array.prototype.slice.call(arguments,3),i=function(t,i){return i=i||{},e.apply(this,[t,i.data||r].concat(n))};return i.program=t,i.depth=n.length,i},program:function(t,e,r){var n=function(t,n){return n=n||{},e(t,n.data||r)};return n.program=t,n.depth=0,n},noop:function(){return""},invokePartial:function(r,n,i,o,s,a){var l={helpers:o,partials:s,data:a};if(r===e)throw new t.Exception("The partial "+n+" could not be found");if(r instanceof Function)return r(i,l);if(t.compile)return s[n]=t.compile(r,{data:a!==e}),s[n](i,l);throw new t.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars),require.register("application",function(t,e,r){var n,i,o,s,a={}.hasOwnProperty,l=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("mediator"),i=e("models/todos"),r.exports=n=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.title="Chaplin • TodoMVC",e.prototype.initMediator=function(){return o.todos=new i,e.__super__.initMediator.apply(this,arguments)},e.prototype.start=function(){return o.todos.fetch(),e.__super__.start.apply(this,arguments)},e}(Chaplin.Application)}),require.register("controllers/index-controller",function(t,e,r){var n,i,o,s,a,l,c={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("../views/header-view"),n=e("../views/footer-view"),s=e("../views/todos-view"),a=e("mediator"),r.exports=o=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.beforeAction=function(){return this.compose("structure",function(){var t;return t={collection:a.todos},this.header=new i(t),this.footer=new n(t)})},e.prototype.list=function(t){var e,r,n;return e=null!=(r=null!=(n=t.filterer)?n.trim():void 0)?r:"all",this.publishEvent("todos:filter",e),this.view=new s({collection:a.todos,filterer:function(t){switch(e){case"completed":return t.get("completed");case"active":return!t.get("completed");default:return!0}}})},e}(Chaplin.Controller)}),require.register("initialize",function(t,e){var r,n;r=e("application"),n=e("routes"),document.addEventListener("DOMContentLoaded",function(){return new r({controllerSuffix:"-controller",pushState:!1,routes:n})},!1)}),require.register("lib/utils",function(t,e,r){var n;n=Chaplin.utils.beget(Chaplin.utils),Backbone.utils.extend(n,{toggle:function(t,e){return t.style.display=e?"":"none"}}),"function"==typeof Object.seal&&Object.seal(n),r.exports=n}),require.register("mediator",function(t,e,r){r.exports=Chaplin.mediator}),require.register("models/todo",function(t,e,r){var n,i,o={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=n=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.defaults={title:"",completed:!1},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.isNew()?this.set("created",Date.now()):void 0},e.prototype.toggle=function(){return this.set({completed:!this.get("completed")})},e.prototype.isVisible=function(){var t;return t=this.get("completed")},e}(Chaplin.Model)}),require.register("models/todos",function(t,e,r){var n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("models/todo"),r.exports=i=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=n,e.prototype.localStorage=new Store("todos-chaplin"),e.prototype.allAreCompleted=function(){return this.getCompleted().length===this.length},e.prototype.getCompleted=function(){return this.where({completed:!0})},e.prototype.getActive=function(){return this.where({completed:!1})},e.prototype.comparator=function(t){return t.get("created")},e}(Chaplin.Collection)}),require.register("routes",function(t,e,r){r.exports=function(t){return t(":filterer","index#list"),t("","index#list")}}),require.register("views/base/collection-view",function(t,e,r){var n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("views/base/view"),r.exports=n=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getTemplateFunction=i.prototype.getTemplateFunction,e.prototype.useCssAnimation=!0,e}(Chaplin.CollectionView)}),require.register("views/base/view",function(t,e,r){var n,i,o={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r.exports=n=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.getTemplateFunction=function(){return this.template},e}(Chaplin.View)}),require.register("views/footer-view",function(t,e,r){var n,i,o,s,a={}.hasOwnProperty,l=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("./base/view"),o=e("lib/utils"),r.exports=n=function(t){function r(){return s=r.__super__.constructor.apply(this,arguments)}return l(r,t),r.prototype.autoRender=!0,r.prototype.el="#footer",r.prototype.events={"click #clear-completed":"clearCompleted"},r.prototype.listen={"todos:filter mediator":"updateFilterer","all collection":"renderCounter"},r.prototype.template=e("./templates/footer"),r.prototype.render=function(){return r.__super__.render.apply(this,arguments),this.renderCounter()},r.prototype.updateFilterer=function(t){var e,r;return"all"===t&&(t=""),r="[href='#/"+t+"']",e="selected",this.findAll("#filters a").forEach(function(t){return t.classList.remove(e),Backbone.utils.matchesSelector(t,r)?t.classList.add(e):void 0})},r.prototype.renderCounter=function(){var t,e,r,n;return n=this.collection.length,t=this.collection.getActive().length,e=this.collection.getCompleted().length,this.find("#todo-count > strong").textContent=t,r=1===t?"item":"items",this.find(".todo-count-title").textContent=r,this.find("#completed-count").textContent="("+e+")",o.toggle(this.find("#clear-completed"),e>0),o.toggle(this.el,n>0)},r.prototype.clearCompleted=function(){return this.publishEvent("todos:clear")},r}(i)}),require.register("views/header-view",function(t,e,r){var n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("./base/view"),r.exports=n=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.autoRender=!0,r.prototype.el="#header",r.prototype.events={"keypress #new-todo":"createOnEnter"},r.prototype.template=e("./templates/header"),r.prototype.createOnEnter=function(t){var e,r;return e=13,r=t.delegateTarget.value.trim(),t.keyCode===e&&r?(this.collection.create({title:r}),this.find("#new-todo").value=""):void 0},r}(i)}),require.register("views/templates/footer",function(t,e,r){var n=Handlebars.template(function(t,e,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,t.helpers),i=i||{},'<span id="todo-count">\n  <strong></strong>\n  <span class="todo-count-title">items</span>\n  left\n</span>\n<ul id="filters">\n  <li>\n    <a href="#/">All</a>\n  </li>\n  <li>\n    <a href="#/active">Active</a>\n  </li>\n  <li>\n    <a href="#/completed">Completed</a>\n  </li>\n</ul>\n<button id="clear-completed">\n  Clear completed\n  <span id="completed-count"></span>\n</button>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/templates/header",function(t,e,r){var n=Handlebars.template(function(t,e,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,t.helpers),i=i||{},'<h1>todos</h1>\n<input id="new-todo" placeholder="What needs to be done?" autofocus>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/templates/todo",function(t,e,r){var n=Handlebars.template(function(t,e,r,n,i){function o(){return" checked"}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,t.helpers),i=i||{};
var s,a="",l=this,c="function",u=this.escapeExpression;return a+='<div class="view">\n  <input class="toggle" type="checkbox"',s=r["if"].call(e,e.completed,{hash:{},inverse:l.noop,fn:l.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+=">\n  <label>",(s=r.title)?s=s.call(e,{hash:{},data:i}):(s=e.title,s=typeof s===c?s.apply(e):s),a+=u(s)+'</label>\n  <button class="destroy"></button>\n</div>\n<input class="edit" value="',(s=r.title)?s=s.call(e,{hash:{},data:i}):(s=e.title,s=typeof s===c?s.apply(e):s),a+=u(s)+'">\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/templates/todos",function(t,e,r){var n=Handlebars.template(function(t,e,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,t.helpers),i=i||{},'<input id="toggle-all" type="checkbox">\n<label for="toggle-all">Mark all as complete</label>\n<ul id="todo-list"></ul>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/todo-view",function(t,e,r){var n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("./base/view"),r.exports=n=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.events={"click .toggle":"toggle","dblclick label":"edit","keyup .edit":"save","focusout .edit":"save","click .destroy":"clear"},r.prototype.listen={"change model":"render"},r.prototype.template=e("./templates/todo"),r.prototype.tagName="li",r.prototype.clear=function(){return this.model.destroy()},r.prototype.toggle=function(){return this.model.toggle().save()},r.prototype.edit=function(){return this.el.classList.add("editing"),this.find(".edit").focus()},r.prototype.save=function(t){var e,r;return e=13,(r=t.delegateTarget.value.trim())?"keyup"!==t.type||t.keyCode===e?(this.model.save({title:r}),this.el.classList.remove("editing")):void 0:this.model.destroy()},r}(i)}),require.register("views/todos-view",function(t,e,r){var n,i,o,s,a,l={}.hasOwnProperty,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("./base/collection-view"),i=e("./todo-view"),s=e("lib/utils"),r.exports=o=function(t){function r(){return a=r.__super__.constructor.apply(this,arguments)}return c(r,t),r.prototype.container="#main",r.prototype.events={"click #toggle-all":"toggleCompleted"},r.prototype.itemView=i,r.prototype.listSelector="#todo-list",r.prototype.listen={"all collection":"renderCheckbox","todos:clear mediator":"clear"},r.prototype.template=e("./templates/todos"),r.prototype.render=function(){return r.__super__.render.apply(this,arguments),this.renderCheckbox()},r.prototype.renderCheckbox=function(){return this.find("#toggle-all").setAttribute("checked",this.collection.allAreCompleted()),s.toggle(this.el,0!==this.collection.length)},r.prototype.toggleCompleted=function(t){var e;return e=t.delegateTarget.checked,this.collection.each(function(t){return t.save({completed:e})})},r.prototype.clear=function(){return this.collection.getCompleted().forEach(function(t){return t.destroy()})},r}(n)}),//# sourceMappingURL=app.js.map
require("initialize");