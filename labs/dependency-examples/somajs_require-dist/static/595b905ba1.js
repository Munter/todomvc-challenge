!function(){"use strict";function e(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function t(){var e;return[/labs/,/\w*-examples/].forEach(function(t){var n=location.href.match(t);!e&&n&&(e=location.href.indexOf(n))}),location.href.substr(0,e)}function n(e,n){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var r=new XMLHttpRequest;r.open("GET",t()+e,!0),r.send(),r.onload=function(){200===r.status&&n&&n(r.responseText)}}function r(e,t){if(!(this instanceof r))return new r(e,t);var n,i;if("object"!=typeof e)try{e=JSON.parse(e)}catch(s){return}t&&(n=t.template,i=t.framework),!n&&e.templates&&(n=e.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").getAttribute("data-framework")),n&&e[i]&&(this.frameworkJSON=e[i],this.template=n,this.append())}var i=function(e){e.defaults=function(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var i in r)null==e[i]&&(e[i]=r[i])}return e},e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g;return e.template=function(i,s,o){var a;o=e.defaults({},o,e.templateSettings);var u=new RegExp([(o.escape||t).source,(o.interpolate||t).source,(o.evaluate||t).source].join("|")+"|$","g"),c=0,h="__p+='";i.replace(u,function(e,t,s,o,a){return h+=i.slice(c,a).replace(r,function(e){return"\\"+n[e]}),t&&(h+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),s&&(h+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(h+="';\n"+o+"\n__p+='"),c=a+e.length,e}),h+="';\n",o.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{a=new Function(o.variable||"obj","_",h)}catch(l){throw l.source=h,l}if(s)return a(s,e);var p=function(t){return a.call(this,t,e)};return p.source="function("+(o.variable||"obj")+"){\n"+h+"}",p},e}({});"todomvc.com"===location.hostname&&(window._gaq=[["_setAccount","UA-31081062-1"],["_trackPageview"]],function(e,t){var n=e.createElement(t),r=e.getElementsByTagName(t)[0];n.src="//www.google-analytics.com/ga.js",r.parentNode.insertBefore(n,r)}(document,"script")),r.prototype.append=function(){var e=document.createElement("aside");e.innerHTML=i.template(this.template,this.frameworkJSON),e.className="learn";var n=e.querySelectorAll(".demo-link");Array.prototype.forEach.call(n,function(e){e.setAttribute("href",t()+e.getAttribute("href"))}),document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",e.outerHTML)},e(),n("learn.json",r)}();/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(r&&"string"!=typeof t?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,s,o,a,u,c,h,l,p,f,d,m=n&&n.split("/"),v=m,g=A.map,y=g&&g["*"];if(e&&"."===e.charAt(0)&&(n?(v=getOwn(A.pkgs,n)?m=[n]:m.slice(0,m.length-1),e=v.concat(e.split("/")),t(e),s=getOwn(A.pkgs,i=e[0]),e=e.join("/"),s&&e===i+"/"+s.main&&(e=i)):0===e.indexOf("./")&&(e=e.substring(2))),r&&g&&(m||y)){for(a=e.split("/"),u=a.length;u>0;u-=1){if(h=a.slice(0,u).join("/"),m)for(c=m.length;c>0;c-=1)if(o=getOwn(g,m.slice(0,c).join("/")),o&&(o=getOwn(o,h))){l=o,p=u;break}if(l)break;!f&&y&&getOwn(y,h)&&(f=getOwn(y,h),d=u)}!l&&f&&(l=f,p=d),l&&(a.splice(0,p,l),e=a.join("/"))}return e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===E.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(A.paths,e);return t&&isArray(t)&&t.length>1?(r(e),t.shift(),E.require.undef(e),E.require([e]),!0):void 0}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,a,u,c,h=null,l=t?t.name:null,p=e,f=!0,d="";return e||(f=!1,e="_@r"+(k+=1)),c=s(e),h=c[0],e=c[1],h&&(h=n(h,l,i),a=getOwn(N,h)),e&&(h?d=a&&a.normalize?a.normalize(e,function(e){return n(e,l,i)}):n(e,l,i):(d=n(e,l,i),c=s(d),h=c[0],d=c[1],r=!0,o=E.nameToUrl(d))),u=!h||a||r?"":"_unnormalized"+(M+=1),{prefix:h,name:d,parentMap:t,unnormalized:!!u,url:o,originalName:p,isDefine:f,id:(h?h+"!"+d:d)+u}}function a(e){var t=e.id,n=getOwn(j,t);return n||(n=j[t]=new E.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(j,r);!hasProp(N,r)||i&&!i.defineEmitComplete?a(e).on(t,n):"defined"===t&&n(N[r])}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(j,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function h(){globalDefQueue.length&&(apsp.apply(I,[I.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(e){delete j[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(j,s);!o||e.depMatched[i]||n[s]||(getOwn(t,s)?(e.defineDep(i,N[s]),e.check()):p(o,t,n))}),n[r]=!0)}function f(){var e,t,n,s,o=1e3*A.waitSeconds,a=o&&E.startTime+o<(new Date).getTime(),u=[],h=[],l=!1,d=!0;if(!y){if(y=!0,eachProp(_,function(n){if(e=n.map,t=e.id,n.enabled&&(e.isDefine||h.push(n),!n.error))if(!n.inited&&a)i(t)?(s=!0,l=!0):(u.push(t),r(t));else if(!n.inited&&n.fetched&&e.isDefine&&(l=!0,!e.prefix))return d=!1}),a&&u.length)return n=makeError("timeout","Load timeout for modules: "+u,null,u),n.contextName=E.contextName,c(n);d&&each(h,function(e){p(e,{},{})}),a&&!s||!l||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,f()},50)),y=!1}}function d(e){hasProp(N,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return m(t,E.onScriptLoad,"load","onreadystatechange"),m(t,E.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;for(h();I.length;){if(e=I.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));d(e)}}var y,b,E,w,x,A={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},j={},_={},S={},I=[],N={},P={},k=1,M=1;return w={require:function(e){return e.require?e.require:e.require=E.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=N[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return A.config&&getOwn(A.config,e.map.id)||{}},exports:N[e.map.id]}}},b=function(e){this.events=getOwn(S,e.id)||{},this.map=e,this.shim=getOwn(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,E.startTime=(new Date).getTime();var e=this.map;return this.shim?(E.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,E.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error)try{i=E.execCb(n,s,r,i)}catch(o){e=o}else i=E.execCb(n,s,r,i);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?i=t.exports:void 0===i&&this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",c(this.error=e)}else i=s;this.exports=i,this.map.isDefine&&!this.ignore&&(N[n]=i,req.onResourceLoad&&req.onResourceLoad(E,this.map,this.depMaps)),l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=o(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,s,h,p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,d=E.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,f,!0)})||""),s=o(e.prefix+"!"+p,this.map.parentMap),u(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=getOwn(j,s.id),h&&(this.depMaps.push(s),this.events.error&&h.on("error",bind(this,function(e){this.emit("error",e)})),h.enable()),void 0):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(j,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&l(e.map.id)}),c(e)}),i.fromText=bind(this,function(n,r){var s=e.name,u=o(s),h=useInteractive;r&&(n=r),h&&(useInteractive=!1),a(u),hasProp(A.config,t)&&(A.config[s]=A.config[t]);try{req.exec(n)}catch(l){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}h&&(useInteractive=!0),this.depMaps.push(u),E.completeLoad(s),d([s],i)}),r.load(e.name,d,i,A),void 0)})),E.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){_[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(w,e.id))return this.depExports[t]=i(this),void 0;this.depCount+=1,u(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&u(e,"error",this.errback)}n=e.id,r=j[n],hasProp(w,n)||!r||r.enabled||E.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(j,e.id);t&&!t.enabled&&E.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},E={config:A,contextName:e,registry:j,defined:N,urlFetched:P,defQueue:I,Module:b,makeModuleMap:o,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.pkgs,n=A.shim,r={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?"map"===t?(A.map||(A.map={}),mixin(A[t],e,!0,!0)):mixin(A[t],e,!0):A[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=E.makeShimExports(e)),n[t]=e}),A.shim=n),e.packages&&(each(e.packages,function(e){var n;e="string"==typeof e?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),A.pkgs=t),eachProp(j,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t))}),(e.deps||e.callback)&&E.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function i(n,s,u){var h,l,p;return r.enableBuildCallback&&s&&isFunction(s)&&(s.__requireJsBuild=!0),"string"==typeof n?isFunction(s)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(w,n)?w[n](j[t.id]):req.get?req.get(E,n,t,i):(l=o(n,t,!1,!0),h=l.id,hasProp(N,h)?N[h]:c(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),E.nextTick(function(){g(),p=a(o(null,t)),p.skipMap=r.skipMap,p.init(n,s,u,{enabled:!0}),f()}),i)}return r=r||{},mixin(i,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0],o="."===s||".."===s;return-1!==i&&(!o||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),E.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(N,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(N,e)||hasProp(j,e)}}),t||(i.undef=function(e){h();var n=o(e,t,!0),r=getOwn(j,e);delete N[e],delete P[n.url],delete S[e],r&&(r.events.defined&&(S[e]=r.events),l(e))}),i},enable:function(e){var t=getOwn(j,e.id);t&&a(e).enable()},completeLoad:function(e){var t,n,r,s=getOwn(A.shim,e)||{},o=s.exports;for(h();I.length;){if(n=I.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);d(n)}if(r=getOwn(j,e),!t&&!hasProp(N,e)&&r&&!r.inited){if(!(!A.enforceDefine||o&&getGlobal(o)))return i(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));d([e,s.deps||[],s.exportsFn])}f()},nameToUrl:function(e,t,n){var r,i,s,o,a,u,c,h,l;if(req.jsExtRegExp.test(e))h=e+(t||"");else{for(r=A.paths,i=A.pkgs,a=e.split("/"),u=a.length;u>0;u-=1){if(c=a.slice(0,u).join("/"),s=getOwn(i,c),l=getOwn(r,c)){isArray(l)&&(l=l[0]),a.splice(0,u,l);break}if(s){o=e===s.name?s.location+"/"+s.main:s.location,a.splice(0,u,o);break}}h=a.join("/"),h+=t||(/\?/.test(h)||n?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+h}return A.urlArgs?h+((-1===h.indexOf("?")?"?":"&")+A.urlArgs):h},load:function(e,t){req.load(E,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);E.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);return i(t.id)?void 0:c(makeError("scripterror","Script error",e,[t.id]))}},E.require=E.makeRequire(),E}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.5",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return isArray(e)||"string"==typeof e||(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=i.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),r.type=i.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=[]),!t.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),function(e,t){"use strict";e.version="0.6.3";var n=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,r=/,/,i=/^\s*(_?)(\S+?)\1\s*$/,s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;Array.prototype.contains||(Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1}),e.InjectorError={MAPPING_BAD_PROP:"[Error infuse.Injector.mapClass/mapValue] the first parameter is invalid, a string is expected",MAPPING_BAD_VALUE:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, it can't null or undefined, with property: ",MAPPING_BAD_CLASS:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, a function is expected, with property: ",MAPPING_BAD_SINGLETON:"[Error infuse.Injector.mapClass] the third parameter is invalid, a boolean is expected, with property: ",MAPPING_ALREADY_EXISTS:"[Error infuse.Injector.mapClass/mapValue] this mapping already exists, with property: ",CREATE_INSTANCE_INVALID_PARAM:"[Error infuse.Injector.createInstance] invalid parameter, a function is expected",NO_MAPPING_FOUND:"[Error infuse.Injector.getInstance] no mapping found",INJECT_INSTANCE_IN_ITSELF_PROPERTY:"[Error infuse.Injector.getInjectedValue] A matching property has been found in the target, you can't inject an instance in itself",INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR:"[Error infuse.Injector.getInjectedValue] A matching constructor parameter has been found in the target, you can't inject an instance in itself"};var o=function(e,t,n,r){this.prop=e,this.value=t,this.cl=n,this.singleton=r||!1},a=function(t){if("string"!=typeof t)throw new Error(e.InjectorError.MAPPING_BAD_PROP)},u=function(n,r){if(r===t||null===r)throw new Error(e.InjectorError.MAPPING_BAD_VALUE+n)},c=function(t,n){if("function"!=typeof n)throw new Error(e.InjectorError.MAPPING_BAD_CLASS+t)},h=function(t,n){if("boolean"!=typeof n)throw new Error(e.InjectorError.MAPPING_BAD_SINGLETON+t)},l=function(t,n){var r=e.getConstructorParams(n);if(r.contains(t))throw new Error(e.InjectorError.INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR)},p=function(t,n){if(n.hasOwnProperty(t))throw new Error(e.InjectorError.INJECT_INSTANCE_IN_ITSELF_PROPERTY)};e.Injector=function(){this.mappings={},this.parent=null},e.getConstructorParams=function(e){for(var t=[],o=e.toString().replace(s,""),a=o.match(n),u=a[1].split(r),c=0;c<u.length;c++){var h=u[c];h.replace(i,function(e,n,r){t.push(r)})}return t},e.Injector.prototype={createChild:function(){var t=new e.Injector;return t.parent=this,t},getMappingVo:function(e){return this.mappings?this.mappings[e]?this.mappings[e]:this.parent?this.parent.getMappingVo(e):null:null},mapValue:function(t,n){if(this.mappings[t])throw new Error(e.InjectorError.MAPPING_ALREADY_EXISTS+t);return a(t),u(t,n),this.mappings[t]=new o(t,n),this},mapClass:function(t,n,r){if(this.mappings[t])throw new Error(e.InjectorError.MAPPING_ALREADY_EXISTS+t);return a(t),c(t,n),r&&h(t,r),this.mappings[t]=new o(t,null,n,r),this},removeMapping:function(e){return this.mappings[e]=null,delete this.mappings[e],this},hasMapping:function(e){return!!this.mappings[e]},hasInheritedMapping:function(e){return!!this.getMappingVo(e)},getMapping:function(e){for(var t in this.mappings){var n=this.mappings[t];if(n.value===e||n.cl===e)return n.prop}},getValue:function(t){var n=this.mappings[t];if(!n){if(this.parent)return this.parent.getValue.apply(this.parent,arguments);throw new Error(e.InjectorError.NO_MAPPING_FOUND)}return n.cl?(arguments[0]=n.cl,this.getValueFromClass.apply(this,arguments)):n.value},getClass:function(e){var n=this.mappings[e];return n?n.cl?n.cl:t:this.parent?this.parent.getClass(e):t},instantiate:function(n){if("function"!=typeof n)throw new Error(e.InjectorError.CREATE_INSTANCE_INVALID_PARAM);for(var n=arguments[0],r=[null],i=e.getConstructorParams(n,this.mappings),s=0;s<i.length;s++)if(arguments[s+1]!==t&&null!==arguments[s+1])r.push(arguments[s+1]);else{var o=i[s],a=this.getMappingVo(o);if(a){var u=this.getInjectedValue(a,o);r.push(u)}else r.push(t)}return new(Function.prototype.bind.apply(n,r))},inject:function(e,t){this.parent&&this.parent.inject(e,!0);for(var n in this.mappings){var r=this.getMappingVo(n);if(e.hasOwnProperty(r.prop)){var i=this.getInjectedValue(r,n);e[n]=i}}return"function"!=typeof e.postConstruct||t||e.postConstruct(),this},getInjectedValue:function(t,n){var r,i=t.value;return t.cl&&(e.getConstructorParams(t.cl),t.singleton?(t.value||(l(n,t.cl),t.value=this.instantiate(t.cl),r=t.value),i=t.value):(l(n,t.cl),i=this.instantiate(t.cl),r=i)),r&&(p(n,r),this.inject(r)),i},createInstance:function(){var e=this.instantiate.apply(this,arguments);return this.inject(e),e},getValueFromClass:function(t){for(var n in this.mappings){var r=this.mappings[n];if(r.cl==t)return r.singleton?(r.value||(r.value=this.createInstance.apply(this,arguments)),r.value):this.createInstance.apply(this,arguments)}if(this.parent)return this.parent.getValueFromClass.apply(this.parent,arguments);throw new Error(e.InjectorError.NO_MAPPING_FOUND)},dispose:function(){this.mappings={}}},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new Error("Error, you must bind a function.");var n=Array.prototype.slice.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(Array.prototype.slice.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r}),"function"==typeof define&&define.amd&&define("infuse",e),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports=e)}(this.infuse=this.infuse||{}),function(e,t){"use strict";e.events={},e.events.version="0.5.2",Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new Error("Error, you must bind a function.");var n=Array.prototype.slice.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(Array.prototype.slice.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r}),e.Event=function(n,r,i,s){var o=e.Event.createGenericEvent(n,i,s);return null!==r&&r!==t&&(o.params=r),o.isCloned=!1,o.clone=this.clone.bind(o),o.isIE9=this.isIE9,o.isDefaultPrevented=this.isDefaultPrevented,(this.isIE9()||!o.preventDefault||o.getDefaultPrevented===t&&o.defaultPrevented===t)&&(o.preventDefault=this.preventDefault.bind(o)),this.isIE9()&&(o.IE9PreventDefault=!1),o},e.Event.prototype.clone=function(){var t=e.Event.createGenericEvent(this.type,this.bubbles,this.cancelable);return t.params=this.params,t.isCloned=!0,t.clone=this.clone,t.isDefaultPrevented=this.isDefaultPrevented,t.isIE9=this.isIE9,this.isIE9()&&(t.IE9PreventDefault=this.IE9PreventDefault),t},e.Event.prototype.preventDefault=function(){return this.cancelable?(this.defaultPrevented=!0,this.isIE9()&&(this.IE9PreventDefault=!0),this):!1},e.Event.prototype.isDefaultPrevented=function(){return this.cancelable?this.isIE9()?this.IE9PreventDefault:this.defaultPrevented!==t?this.defaultPrevented:this.getDefaultPrevented!==t?this.getDefaultPrevented():!1:!1},e.Event.createGenericEvent=function(e,r,i){var s;return r=r!==t?r:!0,"object"==typeof document&&document.createEvent?(s=document.createEvent("Event"),s.initEvent(e,!!r,!!i)):"object"==typeof document&&document.createEventObject?(s=document.createEventObject(),s.type=e,s.bubbles=!!r,s.cancelable=!!i):s=new n(e,!!r,!!i),s},e.Event.prototype.isIE9=function(){return"object"!=typeof document?!1:document.body.style.scrollbar3dLightColor!==t&&document.body.style.opacity!==t},e.Event.prototype.toString=function(){return"[soma.Event]"};var n=function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.defaultPrevented=!1,this.currentTarget=null,this.target=null};e.EventDispatcher=function(){this.listeners=[]},e.EventDispatcher.prototype.addEventListener=function(e,t,n){if(this.listeners&&e&&t){isNaN(n)&&(n=0);for(var r=0;r<this.listeners.length;r++){var i=this.listeners[r];if(i.type===e&&i.listener===t)return}this.listeners.push({type:e,listener:t,priority:n,scope:this})}},e.EventDispatcher.prototype.removeEventListener=function(e,t){if(this.listeners&&e&&t)for(var n=this.listeners.length;n-->0;){var r=this.listeners[n];r.type===e&&r.listener===t&&this.listeners.splice(n,1)}},e.EventDispatcher.prototype.hasEventListener=function(e){if(!this.listeners||!e)return!1;for(var t=0,n=this.listeners.length;n>t;++t){var r=this.listeners[t];if(r.type===e)return!0}return!1},e.EventDispatcher.prototype.dispatchEvent=function(e){if(!this.listeners||!e)throw new Error("Error in EventDispatcher (dispatchEvent), one of the parameters is null or undefined.");var t,n=[];for(t=0;t<this.listeners.length;t++){var r=this.listeners[t];r.type===e.type&&n.push(r)}for(n.sort(function(e,t){return t.priority-e.priority}),t=0;t<n.length;t++)n[t].listener.apply(e.srcElement?e.srcElement:e.currentTarget,[e]);return!e.isDefaultPrevented()},e.EventDispatcher.prototype.dispatch=function(t,n,r,i){if(!this.listeners||!t||""===t)throw new Error("Error in EventDispatcher (dispatch), one of the parameters is null or undefined.");var s=new e.Event(t,n,r,i);return this.dispatchEvent(s),s},e.EventDispatcher.prototype.dispose=function(){this.listeners=null},e.EventDispatcher.prototype.toString=function(){return"[soma.EventDispatcher]"},"function"==typeof define&&define.amd&&define("soma-events",e),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports=e)}(this.soma=this.soma||{}),function(e,t,n){"use strict";e.version="2.0.0",e.applyProperties=function(e,t,r,i){if("[object Array]"===Object.prototype.toString.apply(i))for(var s=0,o=i.length;o>s;s++)(e[i[s]]===n||null===e[i[s]])&&(e[i[s]]=r&&"function"==typeof t[i[s]]?t[i[s]].bind(t):t[i[s]]);else for(var a in t)e[a]=r&&"function"==typeof t[a]?t[a].bind(t):t[a]},e.augment=function(e,t,n){if(t.prototype&&e.prototype)if("[object Array]"===Object.prototype.toString.apply(n))for(var r=0,i=n.length;i>r;r++)e.prototype[n[r]]||(e.prototype[n[r]]=t.prototype[n[r]]);else for(var s in t.prototype)e.prototype[s]||(e.prototype[s]=t.prototype[s])},e.inherit=function(t,n){var r;r=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return t.apply(this,arguments)};var i=function(){};return i.prototype=t.prototype,r.prototype=new i,n&&e.applyProperties(r.prototype,n),r.prototype.constructor=r,r.parent=t.prototype,r.extend=function(t){return e.inherit(r,t)},r},e.extend=function(t){return e.inherit(function(){},t)};var r=[];e.plugins=e.plugins||{},e.plugins.add=function(e){r.push(e)},e.plugins.remove=function(e){for(var t=r.length-1,n=0;t>=n;t--)e===r[t]&&r.splice(t,1)},e.Application=e.extend({constructor:function(){function n(){this.injector=new t.Injector(this.dispatcher),this.dispatcher=new e.EventDispatcher,this.injector.mapValue("injector",this.injector),this.injector.mapValue("instance",this),this.injector.mapValue("dispatcher",this.dispatcher),this.injector.mapClass("mediators",i,!0),this.mediators=this.injector.getValue("mediators"),this.injector.mapClass("commands",s,!0),this.commands=this.injector.getValue("commands");for(var n=0,o=r.length;o>n;n++)this.createPlugin(r[n])}n.bind(this)(),this.init(),this.start()},createPlugin:function(){if(0==arguments.length||!arguments[0])throw new Error("Error creating a plugin, plugin class is missing.");for(var e=t.getConstructorParams(arguments[0]),n=[arguments[0]],r=0;r<e.length;r++)(this.injector.hasMapping(e[r])||this.injector.hasInheritedMapping(e[r]))&&n.push(this.injector.getValue(e[r]));for(var i=1;i<arguments.length;i++)n.push(arguments[i]);return this.injector.createInstance.apply(this.injector,n)},init:function(){},start:function(){},dispose:function(){this.injector&&(this.injector.removeMapping("injector"),this.injector.removeMapping("dispatcher"),this.injector.removeMapping("mediators"),this.injector.removeMapping("commands"),this.injector.removeMapping("instance")),this.injector&&this.injector.dispose(),this.dispatcher&&this.dispatcher.dispose(),this.mediators&&this.mediators.dispose(),this.commands&&this.commands.dispose(),this.injector=n,this.dispatcher=n,this.mediators=n,this.commands=n,this.instance=n}});var i=e.extend({constructor:function(){this.injector=null,this.dispatcher=null},create:function(e,t){if(!e||"function"!=typeof e)throw new Error("Error creating a mediator, the first parameter must be a function.");if(t===n||null===t)throw new Error("Error creating a mediator, the second parameter cannot be undefined or null.");var r=[],i=[];t.length>0?r=t:r.push(t);for(var s=0,o=r.length;o>s;s++){var a=this.injector.createChild();a.mapValue("target",r[s]);var u=a.createInstance(e);if(1===r.length)return u;i.push(u)}return i},dispose:function(){this.injector=n,this.dispatcher=n}}),s=e.extend({constructor:function(){this.boundHandler=this.handler.bind(this),this.dispatcher=null,this.injector=null,this.list={}},has:function(e){return null!==this.list[e]&&this.list[e]!==n},get:function(e){return this.has(e)?this.list[e]:n},getAll:function(){var e={};for(var t in this.list)e[t]=this.list[t];return e},add:function(e,t){if("string"!=typeof e)throw new Error("Error adding a command, the first parameter must be a string.");if("function"!=typeof t)throw new Error('Error adding a command with the name "'+t+'", the second parameter must be a function, and must contain an "execute" public method.');if(this.has(e))throw new Error('Error adding a command with the name: "'+e+'", already registered.');this.list[e]=t,this.addInterceptor(e)},remove:function(e){this.has(e)&&(this.list[e]=n,delete this.list[e],this.removeInterceptor(e))},addInterceptor:function(e){this.dispatcher.addEventListener(e,this.boundHandler,-Number.MAX_VALUE)},removeInterceptor:function(e){this.dispatcher.removeEventListener(e,this.boundHandler)},handler:function(e){e.isDefaultPrevented&&!e.isDefaultPrevented()&&this.executeCommand(e)},executeCommand:function(e){var t=e.type;if(this.has(t)){var n=this.injector.createInstance(this.list[t]);if(!n.hasOwnProperty("execute")&&"function"===n.execute)throw new Error("Error in "+this+' Command "'+n+'" must contain an execute public method.');n.execute(e)}},dispose:function(){for(var e in this.list)this.remove(e);this.boundHandler=n,this.dispatcher=n,this.injector=n,this.list=n}});e.EventDispatcher.extend=function(t){return e.inherit(e.EventDispatcher,t)},e.Event.extend=function(t){return e.inherit(e.Event,t)},t.Injector.extend=function(n){return e.inherit(t.Injector,n)},"function"==typeof define&&define.amd&&define("soma",e),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports=e)}(this.soma=this.soma||{},this.infuse),define("soma",function(){}),function(e,t){"use strict";function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function r(e){return"object"==typeof e}function i(e){return"string"==typeof e}function s(e){return e?e.nodeType>0:!1}function o(e){return e&&e.nodeType&&3===e.nodeType}function a(e){return e&&"function"==typeof e}function u(e){return null!==e&&e!==t}function c(e){return""===e||e===!0||"true"===e||!u(e)}function h(e){return e&&a(e.toString)&&"[object Expression]"===e.toString()}function l(e){return i(e)?!!e.match(yt.func):!1}function p(e){return e&&e.parent&&St.get(e.element)}function f(e){return e.replace(yt.escape,"\\$&")}function d(e,t){var n=ht.start().replace(/\\/g,""),r="",i=t?e:n;i.length>1&&(r="|\\"+i.substr(0,1)+"(?!\\"+i.substr(1,1)+")[^"+i.substr(0,1)+"]*"),yt.sequence=new RegExp(ht.start()+".+?"+ht.end()+"|[^"+ht.start()+"]+"+r,"g"),yt.token=new RegExp(ht.start()+".*?"+ht.end(),"g"),yt.expression=new RegExp(ht.start()+"|"+ht.end(),"gm")
}function m(e){return e.replace(yt.trim,"")}function v(e){return yt.string.test(e)?e.substr(1,e.length-2):e}function g(e){return""===e[0]&&e.shift(),""===e[e.length-1]&&e.pop(),e}function y(e){return e.replace(yt.expression,"")}function b(e){return e.replace(yt.depth,"")}function E(e,t){e.parentNode&&e.parentNode.insertBefore(t,e)}function w(e,t){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}function x(e,t){x=document.documentElement.classList?function(e,t){e.classList.remove(t)}:function(e,t){if(!e||!e.className)return!1;var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n,"$2")},x(e,t)}function A(){function e(){return++r}function t(t){if(t){if("object"!=typeof t)return t;var n;try{n=t.hashkey?t.hashkey:t.hashkey=e()}catch(r){}return n}}var n={},r=1;this.remove=function(e){delete n[t(e)]},this.get=function(e){return n[t(e)]},this.put=function(e,r){n[t(e)]=r},this.has=function(e){return"undefined"!=typeof n[t(e)]},this.getData=function(){return n},this.dispose=function(){for(var e in n)delete n[e];this.length=0}}function j(e,t){var n=e.match(yt.repeat);if(n){var r=n[2],i=new _t(r);return i.getValue(t)}}function _(e,t,n){var r=e.match(yt.repeat);if(r){var i=r[1];t[i]=n}}function S(e,t){var n=e.node||e.attribute.node,r=n.template.watchers,i=n.element;if(!r)return t;var s=r.get(i);!s&&o(n.element)&&n.parent&&(s=r.get(n.parent.element));var c=s?s:r.get(e.pattern);if(a(c)){var h=c(e.value,t,e.pattern,n.scope,n,e.attribute);if(u(h))return h}return t}function I(e,t){for(var n=T(t),r=e;n>0;)r=r._parent?r._parent:r,n--;return r}function N(e,t){var n=new _t(t);return P(e,n.pattern,n.path,n.params)}function P(e,n,r,i,s,o,c){if(yt.string.test(n))return v(n);var h=[];if(!c&&i)for(var l=0,p=i.length;p>l;l++)h.push(N(e,i[l]));else h=c;if(o)return h;var f=I(e,n);if(n=n.replace(/..\//g,""),r=r.replace(/..\//g,""),!f)return t;var d=f,m=r.split(/\.|\[|\]/g);if(m.length>0)for(var g=0,y=m.length;y>g;g++)if(""!==m[g]&&(d=d[m[g]]),!u(d))return f._parent?P(f._parent,n,r,i,s,o,h):t;return a(d)?s?d:d.apply(null,h):d}function k(e){var t=e.split("(")[0];return t=b(t)}function M(e){return g(e.split(yt.params))}function T(e){var t=e.split("(")[0],n=t.match(yt.depth);return n?n.length:0}function q(e,t,n){var r=new xt(e,t);r.previousSibling=e.previousSibling,r.nextSibling=e.nextSibling;for(var i,s,o,a=[],u=[],c=e.attributes,h=0,l=c&&c.length;l>h;h++)i=c[h],i.specified&&(s=i.name,o=i.value,s===ct.attributes.skip&&(r.skip=""===o||"true"===o),s===ct.attributes.html&&(r.html=""===o||"true"===o),s!==ct.attributes.repeat||n||(r.repeater=o),(O(s+":"+o)||s===ct.attributes.repeat||s===ct.attributes.skip||s===ct.attributes.html||s===ct.attributes.show||s===ct.attributes.hide||s===ct.attributes.href||s===ct.attributes.checked||s===ct.attributes.disabled||s===ct.attributes.multiple||s===ct.attributes.readonly||s===ct.attributes.selected||-1!==o.indexOf(ct.attributes.cloak))&&a.push(new At(s,o,r)),ft[s]&&!n&&(u.push({name:ft[s],value:o}),a.push(new At(s,o,r))));r.attributes=a;for(var p=0,f=u.length;f>p;p++)r.addEvent(u[p].name,u[p].value);return r}function O(e){var t=e.match(yt.token);return t&&t.length>0}function R(e){return yt.content.test(e)}function C(e){if(e){var t=e.nodeType;return e&&t?8===t?!1:3!==t||R(e.nodeValue)||O(e.nodeValue)?!0:!1:!1}}function D(e,t,n,r){if(C(t)){var i;if(r?(i=r,i.parent=n):i=q(t,n?n.scope:new wt(ut)._createChild(),n&&(n.repeater||n.isRepeaterDescendant)),n&&(n.repeater||n.isRepeaterDescendant)&&(i.isRepeaterDescendant=!0),i.template=e,!i.skip){for(var s=t.firstChild;s;){var o=D(e,s,i);o&&(o.parent=i,i.children.push(o)),s=s.nextSibling}return i}}}function L(e,t){V(e);for(var n in t)e[n]=t[n]}function V(e){for(var t in e)"_"!==t.substr(0,1)&&(e[t]=null,delete e[t])}function B(e){if(!e.repeater&&e.children&&!p(e))for(var t=0,n=e.children.length;n>t;t++)e.children[t].update()}function F(e){if(e.children&&!p(e))for(var t=0,n=e.children.length;n>t;t++)e.children[t].render()}function H(e){var t,r=j(e.repeater,e.scope);if(n(r)){for(var i=0,s=r.length,o=e.childrenRepeater.length,a=s>o?s:o;a>i;i++)s>i?t=U(e,i,r[i],pt.index,i,t):(e.parent.element.removeChild(e.childrenRepeater[i].element),e.childrenRepeater[i].dispose());e.childrenRepeater.length>r.length&&(e.childrenRepeater.length=r.length)}else{var u=-1;for(var c in r)u++,t=U(e,u,r[c],pt.key,c,t);for(var h=u;u++<e.childrenRepeater.length-1;)e.parent.element.removeChild(e.childrenRepeater[u].element),e.childrenRepeater[u].dispose();e.childrenRepeater.length=h+1}e.element.parentNode&&e.element.parentNode.removeChild(e.element)}function $(e,t){var n=new xt(e,t.scope._createChild());if(t.attributes){for(var r=[],i=0,s=t.attributes.length;s>i;i++){if(n.renderAsHtml=t.renderAsHtml,t.attributes[i].name===ct.attributes.skip&&(n.skip=""===t.attributes[i].value||"true"===t.attributes[i].value),t.attributes[i].name===ct.attributes.html&&(n.html=""===t.attributes[i].value||"true"===t.attributes[i].value),t.attributes[i].name!==lt.repeat){var o=new At(t.attributes[i].name,t.attributes[i].value,n);r.push(o)}ft[t.attributes[i].name]&&n.addEvent(ft[t.attributes[i].name],t.attributes[i].value)}n.attributes=r}return n}function U(e,t,n,r,i,s){var o=e.childrenRepeater[t];if(o)return _(e.repeater,o.scope,n),o.scope[r]=i,o.update(),o.render(),o.element;var a=e.element.cloneNode(!0),u=$(a,e);return u.isRepeaterChild=!0,u.parent=e.parent,u.template=e.template,e.childrenRepeater[t]=u,_(e.repeater,u.scope,n),u.scope[r]=i,D(e.template,a,e.parent,u),u.update(),u.render(),s?w(s,a):e.previousSibling?w(e.previousSibling,a):e.nextSibling?E(e.nextSibling,a):e.parent.element.appendChild(a),a}function G(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=G.guid++),e.events||(e.events={});var r=e.events[t];r||(r=e.events[t]={},e["on"+t]&&(r[0]=e["on"+t])),r[n.$$guid]=n,e["on"+t]=J}}function z(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.events&&e.events[t]&&delete e.events[t][n.$$guid]}function J(e){var t=!0;e=e||W(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var r in n)this.$$handleEvent=n[r],this.$$handleEvent(e)===!1&&(t=!1);return t}function W(e){return e.preventDefault=W.preventDefault,e.stopPropagation=W.stopPropagation,e}function Q(e,n,r){Nt=r===t?Number.MAX_VALUE:r,X(e,n,0,!0)}function X(e,t,n,r){if(!s(e))throw new Error("Error in soma.template.parseEvents, only a DOM Element can be parsed.");if(r&&Y(e,t),0!==Nt)for(var i=e.firstChild;i;)1===i.nodeType&&Nt>n&&(X(i,t,++n),Y(i,t)),i=i.nextSibling}function Y(e,t){for(var n,r,i,s=e.attributes,o=0,u=s&&s.length;u>o;o++)if(n=s[o],n.specified&&(r=n.name,i=n.value,ft[r])){var c=Z(t,i,e);c&&a(c)&&(G(e,ft[r],c),Pt.push({element:e,type:ft[r],handler:c}))}}function Z(e,t){var n=t.match(yt.func);if(n){var r=n[1];if(a(e[r]))return e[r]}}function K(e){for(var t=Pt.length,n=0;--t>=n;){var r=Pt[t];(e===r.element||Et(e,r.element))&&(z(r.element,r.type,r.handler),Pt.splice(t,1))}}function et(e,t,n){var r=tt(t);n(r,r.scope,r.element,r.node)}function tt(t,n){var r;if(i(t)){if(!s(n))throw new Error(e.template.errors.TEMPLATE_STRING_NO_ELEMENT);n.innerHTML=t,r=n}else{if(!s(t))throw new Error(e.template.errors.TEMPLATE_NO_PARAM);s(n)?(n.innerHTML=t.innerHTML,r=n):r=t}nt(r)&&(nt(r).dispose(),St.remove(r));var o=new It(r);return St.put(r,o),o}function nt(e){return St.get(e)}function rt(){for(var e in St.getData())St.get(e).render()}function it(e){if(null===e&&(at={},ut={}),u(e)&&r(e))for(var t in e)e.hasOwnProperty(t)&&(at[t]=ut[t]=e[t]);return at}e.template=e.template||{},e.template.version="0.1.8",e.template.errors={TEMPLATE_STRING_NO_ELEMENT:"Error in soma.template, a string template requirement a second parameter: an element target - soma.template.create('string', element)",TEMPLATE_NO_PARAM:"Error in soma.template, a template requires at least 1 parameter - soma.template.create(element)"};var st="{{",ot="}}",at={},ut={},ct=e.template.settings=e.template.settings||{};ct.autocreate=!0;var ht=ct.tokens={start:function(e){return u(e)&&""!==e&&(st=f(e),d(e,!0)),st},end:function(e){return u(e)&&""!==e&&(ot=f(e),d(e,!1)),ot}},lt=ct.attributes={skip:"data-skip",repeat:"data-repeat",src:"data-src",href:"data-href",show:"data-show",hide:"data-hide",cloak:"data-cloak",checked:"data-checked",disabled:"data-disabled",multiple:"data-multiple",readonly:"data-readonly",selected:"data-selected",template:"data-template",html:"data-html"},pt=ct.vars={index:"$index",key:"$key"},ft=ct.events={};ct.eventsPrefix="data-";var dt="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup focus blur change select selectstart scroll copy cut paste mousewheel keypress error contextmenu input textinput drag dragenter dragleave dragover dragend dragstart dragover drop load submit reset search resize beforepaste beforecut beforecopy";dt+=" touchstart touchend touchmove touchenter touchleave touchcancel gesturestart gesturechange gestureend";for(var mt=dt.split(" "),vt=-1,gt=mt.length;++vt<gt;)ft[ct.eventsPrefix+mt[vt]]=mt[vt];var yt={sequence:null,token:null,expression:null,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,trim:/^[\s+]+|[\s+]+$/g,repeat:/(.*)\s+in\s+(.*)/,func:/(.*)\((.*)\)/,params:/,\s+|,|\s+,\s+/,quote:/\"|\'/g,content:/[^.|^\s]/gm,depth:/..\//g,string:/^(\"|\')(.*)(\"|\')$/},bt=function(){if("object"!=typeof document)return t;for(var e,n=3,r=document.createElement("div"),i=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",i[0];);return n>4?n:e}(),Et="object"!=typeof document?function(){}:document.documentElement.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:document.documentElement.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},wt=function(e){function t(e){var t=n(e);return t._parent=this,this._children.push(t),t}function n(e){var n=e||{};return n._parent=null,n._children=[],n._createChild=function(){return t.apply(n,arguments)},n}return n(e)},xt=function(e,n){this.element=e,this.scope=n,this.attributes=null,this.value=null,this.interpolation=null,this.invalidate=!1,this.skip=!1,this.repeater=null,this.isRepeaterDescendant=!1,this.isRepeaterChild=!1,this.parent=null,this.children=[],this.childrenRepeater=[],this.previousSibling=null,this.nextSibling=null,this.template=null,this.eventHandlers={},this.html=!1,o(this.element)&&(this.value=this.element.nodeValue,this.interpolation=new jt(this.value,this,t))};xt.prototype={toString:function(){return"[object Node]"},dispose:function(){this.clearEvents();var e,t;if(this.children)for(e=0,t=this.children.length;t>e;e++)this.children[e].dispose();if(this.childrenRepeater)for(e=0,t=this.childrenRepeater.length;t>e;e++)this.childrenRepeater[e].dispose();if(this.attributes)for(e=0,t=this.attributes.length;t>e;e++)this.attributes[e].dispose();this.interpolation&&this.interpolation.dispose(),this.element=null,this.scope=null,this.attributes=null,this.attributesHashMap=null,this.value=null,this.interpolation=null,this.repeater=null,this.parent=null,this.children=null,this.childrenRepeater=null,this.previousSibling=null,this.nextSibling=null,this.template=null,this.eventHandlers=null},getNode:function(e){var t;if(e===this.element)return this;if(this.childrenRepeater.length>0){for(var n=0,r=this.childrenRepeater.length;r>n;n++)if(t=this.childrenRepeater[n].getNode(e))return t}else for(var i=0,s=this.children.length;s>i;i++)if(t=this.children[i].getNode(e))return t;return null},getAttribute:function(e){if(this.attributes)for(var t=0,n=this.attributes.length;n>t;t++){var r=this.attributes[t];if(r.interpolationName&&r.interpolationName.value===e)return r}},update:function(){if(!p(this)){if(u(this.interpolation)&&this.interpolation.update(),u(this.attributes))for(var e=0,t=this.attributes.length;t>e;e++)this.attributes[e].update();B(this)}},invalidateData:function(){if(!p(this)){this.invalidate=!0;var e,t;if(this.attributes)for(e=0,t=this.attributes.length;t>e;e++)this.attributes[e].invalidate=!0;for(e=0,t=this.childrenRepeater.length;t>e;e++)this.childrenRepeater[e].invalidateData();for(e=0,t=this.children.length;t>e;e++)this.children[e].invalidateData()}},addEvent:function(e,t){if(!this.repeater){this.eventHandlers[e]&&this.removeEvent(e);var n=this.scope,r=function(e){var r=new _t(t,this.node),i=r.getValue(n,!0),s=r.getValue(n,!1,!0);s.unshift(e),i&&i.apply(null,s)};this.eventHandlers[e]=r,G(this.element,e,r)}},removeEvent:function(e){z(this.element,e,this.eventHandlers[e]),this.eventHandlers[e]=null,delete this.eventHandlers[e]},clearEvents:function(){if(this.eventHandlers)for(var e in this.eventHandlers)this.removeEvent(e,this.eventHandlers[e]);if(this.children)for(var t=0,n=this.children.length;n>t;t++)this.children[t].clearEvents();if(this.childrenRepeater)for(var r=0,i=this.childrenRepeater.length;i>r;r++)this.childrenRepeater[r].clearEvents()},render:function(){if(!p(this)){if(this.invalidate&&(this.invalidate=!1,o(this.element)&&(this.value=this.parent&&this.parent.html?this.parent.element.innerHTML=this.interpolation.render():this.element.nodeValue=this.interpolation.render())),this.attributes)for(var e=0,t=this.attributes.length;t>e;e++)this.attributes[e].render();this.repeater?H(this):F(this)}}};var At=function(e,t,n){this.name=e,this.value=t,this.node=n,this.interpolationName=new jt(this.name,null,this),this.interpolationValue=new jt(this.value,null,this),this.invalidate=!1};At.prototype={toString:function(){return"[object Attribute]"},dispose:function(){this.interpolationName&&this.interpolationName.dispose(),this.interpolationValue&&this.interpolationValue.dispose(),this.interpolationName=null,this.interpolationValue=null,this.node=null,this.name=null,this.value=null,this.previousName=null},update:function(){this.interpolationName.update(),this.interpolationValue.update()},render:function(){function e(e,t){7===bt&&"class"===e?i.className=t:i.setAttribute(e,t)}function t(e,t,n){c(t)?i.setAttribute(n,n):i.removeAttribute(n)}function n(e,t){i.setAttribute("src",t)}function r(e,t){i.setAttribute("href",t)}if(!this.node.repeater){var i=this.node.element;this.invalidate&&(this.invalidate=!1,this.previousName=this.name,this.name=u(this.interpolationName.render())?this.interpolationName.render():this.name,this.value=u(this.interpolationValue.render())?this.interpolationValue.render():this.value,this.name===lt.src?n(this.name,this.value):this.name===lt.href?r(this.name,this.value):(this.node.isRepeaterChild&&7===bt||this.node.element.removeAttribute(this.interpolationName.value),this.previousName&&(7===bt&&"class"===this.previousName?this.node.element.className="":this.node.isRepeaterChild&&7===bt||this.node.element.removeAttribute(this.previousName)),e(this.name,this.value,this.previousName))),"class"===this.name&&-1!==this.value.indexOf(ct.attributes.cloak)&&x(this.node.element,ct.attributes.cloak),this.name===lt.hide&&(i.style.display=c(this.value)?"none":"block"),this.name===lt.show&&(i.style.display=c(this.value)?"block":"none"),this.name===lt.checked&&(t(this.name,this.value,"checked"),i.checked=c(this.value)?!0:!1),this.name===lt.disabled&&t(this.name,this.value,"disabled"),this.name===lt.multiple&&t(this.name,this.value,"multiple"),this.name===lt.readonly&&(7===bt?i.readOnly=c(this.value)?!0:!1:t(this.name,this.value,"readonly")),this.name===lt.selected&&t(this.name,this.value,"selected")}}};var jt=function(e,t,n){this.value=t&&!o(t.element)?m(e):e,this.node=t,this.attribute=n,this.sequence=[],this.expressions=[];var r=this.value.match(yt.sequence);if(r){for(var i=0,s=r.length;s>i;i++)if(r[i].match(yt.token)){var a=new _t(y(r[i]),this.node,this.attribute);this.sequence.push(a),this.expressions.push(a)}else this.sequence.push(r[i]);g(this.sequence)}};jt.prototype={toString:function(){return"[object Interpolation]"},dispose:function(){if(this.expressions)for(var e=0,t=this.expressions.length;t>e;e++)this.expressions[e].dispose();this.value=null,this.node=null,this.attribute=null,this.sequence=null,this.expressions=null},update:function(){for(var e=-1,t=this.expressions.length;++e<t;)this.expressions[e].update()},render:function(){var e="";if(this.sequence)for(var t=0,n=this.sequence.length;n>t;t++){var r="";r=h(this.sequence[t])?this.sequence[t].value:this.sequence[t],u(r)||(r=""),e+=r}return e}};var _t=function(e,n,r){u(e)&&(this.pattern=e,this.isString=yt.string.test(e),this.node=n,this.attribute=r,this.value=this.isString?this.pattern:t,this.isString?(this.isFunction=!1,this.depth=null,this.path=null,this.params=null):(this.isFunction=l(this.pattern),this.depth=T(this.pattern),this.path=k(this.pattern),this.params=this.isFunction?M(this.pattern.match(yt.func)[2]):null))};_t.prototype={toString:function(){return"[object Expression]"},dispose:function(){this.pattern=null,this.node=null,this.attribute=null,this.path=null,this.params=null,this.value=null},update:function(){var e=this.node;if(!e&&this.attribute&&(e=this.attribute.node),e||!e.scope){var t=this.getValue(e.scope);t=S(this,t),this.value!==t&&(this.value=t,(this.node||this.attribute).invalidate=!0)}},getValue:function(e,t,n){return P(e,this.pattern,this.path,this.params,t,n)}};var St=new A,It=function(e){this.watchers=new A,this.node=null,this.scope=null,this.compile(e)};It.prototype={toString:function(){return"[object Template]"},compile:function(e){e&&(this.element=e),this.node&&this.node.dispose(),this.node=D(this,this.element),this.node.root=!0,this.scope=this.node.scope},update:function(e){u(e)&&L(this.node.scope,e),this.node&&this.node.update()},render:function(e){this.update(e),this.node&&this.node.render()},invalidate:function(){this.node&&this.node.invalidateData()},watch:function(e,t){(i(e)||s(e))&&a(t)&&this.watchers.put(e,t)},unwatch:function(e){this.watchers.remove(e)},clearWatchers:function(){this.watchers.dispose()},clearEvents:function(){this.node.clearEvents()},getNode:function(e){return this.node.getNode(e)},dispose:function(){St.remove(this.element),this.watchers&&this.watchers.dispose(),this.node&&this.node.dispose(),this.element=null,this.watchers=null,this.node=null}},G.guid=1,W.preventDefault=function(){this.returnValue=!1},W.stopPropagation=function(){this.cancelBubble=!0};var Nt,Pt=[];if(ct.autocreate&&"object"==typeof document){var kt=function(){function e(e){for(l=1;e=n.shift();)e()}var t,n=[],r=!1,i=document,s=i.documentElement,o=s.doScroll,a="DOMContentLoaded",u="addEventListener",c="onreadystatechange",h="readyState",l=/^loade|c/.test(i[h]);return i[u]&&i[u](a,t=function(){i.removeEventListener(a,t,r),e()},r),o&&i.attachEvent(c,t=function(){/^c/.test(i[h])&&(i.detachEvent(c,t),e())}),o?function(e){self!=top?l?e():n.push(e):function(){try{s.doScroll("left")}catch(t){return setTimeout(function(){kt(e)},50)}e()}()}:function(e){l?e():n.push(e)}}(),Mt=function(t){for(var n=t?t.firstChild:document.body;n;){if(1===n.nodeType){Mt(n);var r=n.getAttribute(lt.template);if(r){var i=new Function("return "+r+";");try{var s=i();a(s)&&e.template.bootstrap(r,n,s)}catch(o){}}}n=n.nextSibling}};kt(Mt)}ht.start(st),ht.end(ot),e.plugins=e.plugins||{};var Tt=function(t,n){t.constructor.prototype.createTemplate=function(t,r){if(!t||"function"!=typeof t)throw new Error("Error creating a template, the first parameter must be a function.");if(r&&s(r)){var i=e.template.create(r);for(var o in i)"function"==typeof i[o]&&(t.prototype[o]=i[o].bind(i));t.prototype.render=i.render.bind(i);var a=n.createChild();return a.mapValue("template",i),a.mapValue("scope",i.scope),a.mapValue("element",i.element),a.createInstance(t)}return null},e.template.bootstrap=function(e,n,r){t.createTemplate(r,n)}};e.plugins&&e.plugins.add&&e.plugins.add(Tt),e.template.Plugin=Tt,e.template.create=tt,e.template.get=nt,e.template.renderAll=rt,e.template.helpers=it,e.template.bootstrap=et,e.template.addEvent=G,e.template.removeEvent=z,e.template.parseEvents=Q,e.template.clearEvents=K,e.template.ready=kt,"function"==typeof define&&define.amd&&define("template",e.template),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=e.template),exports=e.template)}(this.soma=this.soma||{}),function(){"use strict";define("models/todos",[],function(){var e=function(){var e="todos-somajs";return{get:function(){return JSON.parse(localStorage.getItem(e)||"[]")},set:function(t){localStorage.setItem(e,JSON.stringify(t))},getActive:function(){return this.get().filter(function(e){return!e.completed}).length}}};return e})}(),function(e){function t(){return""===c.hash||"#"===c.hash}function n(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n,e)===!1)return}function r(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t}function i(e,t,n){if(!e.length)return n();var r=0;!function i(){t(e[r],function(t){t||t===!1?(n(t),n=function(){}):(r+=1,r===e.length?n():i())})}()}function o(e,t,n){n=e;for(var r in t)if(t.hasOwnProperty(r)&&(n=t[r](e),n!==e))break;return n===e?"([._a-zA-Z0-9-]+)":n}function a(e,t){for(var n,r=0,i="";n=e.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=e.substr(0,n.index)+n[0];e=i+=e.substr(r);var s,a=e.match(/:([^\/]+)/gi);if(a){s=a.length;for(var u=0;s>u;u++)e=e.replace(a[u],o(a[u],t))}return e}function u(e,t,n,r){var i,s=0,o=0,a=0,n=(n||"(").toString(),r=(r||")").toString();for(i=0;i<e.length;i++){var u=e[i];if(u.indexOf(n,s)>u.indexOf(r,s)||~u.indexOf(n,s)&&!~u.indexOf(r,s)||!~u.indexOf(n,s)&&~u.indexOf(r,s)){if(o=u.indexOf(n,s),a=u.indexOf(r,s),~o&&!~a||!~o&&~a){var c=e.slice(0,(i||1)+1).join(t);e=[c].concat(e.slice((i||1)+1))}s=(a>o?a:o)+1,i=0}else s=0}return e}Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n,r=[],i=0,s=this.length;s>i;i++)i in this&&e.call(t,n=this[i],i,this)&&r.push(n);return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=document.location,h={mode:"modern",hash:c.hash,history:!1,check:function(){var e=c.hash;e!=this.hash&&(this.hash=e,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(e,t){function n(e){for(var t=0,n=l.listeners.length;n>t;t++)l.listeners[t](e)}var r=this;if(this.history=t,l.listeners||(l.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&r.check()}),window.setInterval(function(){r.check()},50),this.onHashChanged=n,this.mode="legacy"}return l.listeners.push(e),this.mode},destroy:function(e){if(l&&l.listeners)for(var t=l.listeners,n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},setHash:function(e){return"legacy"===this.mode&&this.writeFrame(e),this.history===!0?(window.history.pushState({},document.title,e),this.fire()):c.hash="/"===e[0]?e:"/"+e,this},writeFrame:function(e){var t=document.getElementById("state-frame"),n=t.contentDocument||t.contentWindow.document;n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var e=this._hash;return e!=c.hash&&(c.hash=e),this},onHashChanged:function(){}},l=e.Router=function(e){return this instanceof l?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(e||{}),void 0):new l(e)};l.prototype.init=function(e){var n=this;if(this.handler=function(e){var t=e&&e.newURL||window.location.hash,r=n.history===!0?n.getPath():t.replace(/.*#/,"");n.dispatch("on",r)},h.init(this.handler,this.history),this.history===!1)t()&&e?c.hash=e:t()||n.dispatch("on",c.hash.replace(/^#/,""));else{var r=t()&&e?e:t()?null:c.hash.replace(/^#/,"");r&&window.history.replaceState({},document.title,r),(r||this.run_in_init===!0)&&this.handler()}return this},l.prototype.explode=function(){var e=this.history===!0?this.getPath():c.hash;return"/"===e.charAt(1)&&(e=e.slice(1)),e.slice(1,e.length).split("/")},l.prototype.setRoute=function(e,t,n){var r=this.explode();return"number"==typeof e&&"string"==typeof t?r[e]=t:"string"==typeof n?r.splice(e,t,s):r=[e],h.setHash(r.join("/")),r},l.prototype.insertEx=function(e,t,n,r){return"once"===e&&(e="on",n=function(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}(n)),this._insert(e,t,n,r)},l.prototype.getRoute=function(e){var t=e;if("number"==typeof e)t=this.explode()[e];else if("string"==typeof e){var n=this.explode();t=n.indexOf(e)}else t=this.explode();return t},l.prototype.destroy=function(){return h.destroy(this.handler),this},l.prototype.getPath=function(){var e=window.location.pathname;return"/"!==e.substr(0,1)&&(e="/"+e),e},l.prototype.configure=function(e){e=e||{};for(var t=0;t<this.methods.length;t++)this._methods[this.methods[t]]=!0;return this.recurse=e.recurse||this.recurse||!1,this.async=e.async||!1,this.delimiter=e.delimiter||"/",this.strict="undefined"==typeof e.strict?!0:e.strict,this.notfound=e.notfound,this.resource=e.resource,this.history=e.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&e.run_handler_in_init!==!1,this.every={after:e.after||null,before:e.before||null,on:e.on||null},this},l.prototype.param=function(e,t){":"!==e[0]&&(e=":"+e);var n=new RegExp(e,"g");this.params[e]=function(e){return e.replace(n,t.source||t)}},l.prototype.on=l.prototype.route=function(e,t,n){var r=this;return n||"function"!=typeof t||(n=t,t=e,e="on"),Array.isArray(t)?t.forEach(function(t){r.on(e,t,n)}):(t.source&&(t=t.source.replace(/\\\//gi,"/")),Array.isArray(e)?e.forEach(function(e){r.on(e.toLowerCase(),t,n)}):(t=t.split(new RegExp(this.delimiter)),t=u(t,this.delimiter),this.insert(e,this.scope.concat(t),n),void 0))},l.prototype.dispatch=function(e,t,n){function r(){s.last=o.after,s.invoke(s.runlist(o),s,n)}var i,s=this,o=this.traverse(e,t,this.routes,""),a=this._invoked;return this._invoked=!0,o&&0!==o.length?("forward"===this.recurse&&(o=o.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&a?(this.async?this.invoke(i,this,r):(this.invoke(i,this),r()),!0):(r(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:e,path:t},n),!1)},l.prototype.invoke=function(e,t,r){var s=this;this.async?i(e,function o(n,r){return Array.isArray(n)?i(n,o,r):("function"==typeof n&&n.apply(t,e.captures.concat(r)),void 0)},function(){r&&r.apply(t,arguments)}):n(e,function a(r){return Array.isArray(r)?n(r,a):"function"==typeof r?r.apply(t,e.captures||[]):("string"==typeof r&&s.resource&&s.resource[r].apply(t,e.captures||[]),void 0)})},l.prototype.traverse=function(e,t,n,r,i){function s(e){function t(e){for(var n=[],r=0;r<e.length;r++)n[r]=Array.isArray(e[r])?t(e[r]):e[r];return n}function n(e){for(var t=e.length-1;t>=0;t--)Array.isArray(e[t])?(n(e[t]),0===e[t].length&&e.splice(t,1)):i(e[t])||e.splice(t,1)}if(!i)return e;var r=t(e);return r.matched=e.matched,r.captures=e.captures,r.after=e.after.filter(i),n(r),r}var o,a,u,c,h=[];if(t===this.delimiter&&n[e])return c=[[n.before,n[e]].filter(Boolean)],c.after=[n.after].filter(Boolean),c.matched=!0,c.captures=[],s(c);for(var l in n)if(n.hasOwnProperty(l)&&(!this._methods[l]||this._methods[l]&&"object"==typeof n[l]&&!Array.isArray(n[l]))){if(o=a=r+this.delimiter+l,this.strict||(a+="["+this.delimiter+"]?"),u=t.match(new RegExp("^"+a)),!u)continue;if(u[0]&&u[0]==t&&n[l][e])return c=[[n[l].before,n[l][e]].filter(Boolean)],c.after=[n[l].after].filter(Boolean),c.matched=!0,c.captures=u.slice(1),this.recurse&&n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean))),s(c);if(c=this.traverse(e,t,n[l],o),c.matched)return c.length>0&&(h=h.concat(c)),this.recurse&&(h.push([n[l].before,n[l].on].filter(Boolean)),c.after=c.after.concat([n[l].after].filter(Boolean)),n===this.routes&&(h.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean)))),h.matched=!0,h.captures=c.captures,h.after=c.after,s(h)}return!1},l.prototype.insert=function(e,t,n,r){var i,s,o,u,c;if(t=t.filter(function(e){return e&&e.length>0}),r=r||this.routes,c=t.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=a(c,this.params)),t.length>0)return r[c]=r[c]||{},this.insert(e,t,n,r[c]);if(c||t.length||r!==this.routes){if(s=typeof r[c],o=Array.isArray(r[c]),r[c]&&!o&&"object"==s)switch(i=typeof r[c][e]){case"function":return r[c][e]=[r[c][e],n],void 0;case"object":return r[c][e].push(n),void 0;case"undefined":return r[c][e]=n,void 0}else if("undefined"==s)return u={},u[e]=n,r[c]=u,void 0;throw new Error("Invalid route context: "+s)}switch(i=typeof r[e]){case"function":return r[e]=[r[e],n],void 0;case"object":return r[e].push(n),void 0;case"undefined":return r[e]=n,void 0}},l.prototype.extend=function(e){function t(e){r._methods[e]=!0,r[e]=function(){var t=1===arguments.length?[e,""]:[e];r.on.apply(r,t.concat(Array.prototype.slice.call(arguments)))}}var n,r=this,i=e.length;for(n=0;i>n;n++)t(e[n])},l.prototype.runlist=function(e){var t=this.every&&this.every.before?[this.every.before].concat(r(e)):r(e);return this.every&&this.every.on&&t.push(this.every.on),t.captures=e.captures,t.source=e.source,t},l.prototype.mount=function(e,t){function n(t,n){var i=t,s=t.split(r.delimiter),o=typeof e[t],a=""===s[0]||!r._methods[s[0]],c=a?"on":i;return a&&(i=i.slice((i.match(new RegExp(r.delimiter))||[""])[0].length),s.shift()),a&&"object"===o&&!Array.isArray(e[t])?(n=n.concat(s),r.mount(e[t],n),void 0):(a&&(n=n.concat(i.split(r.delimiter)),n=u(n,r.delimiter)),r.insert(c,n,e[t]),void 0)}if(e&&"object"==typeof e&&!Array.isArray(e)){var r=this;t=t||[],Array.isArray(t)||(t=t.split(r.delimiter));for(var i in e)e.hasOwnProperty(i)&&n(i,t.slice(0))}}}("object"==typeof exports?exports:window),define("director",function(){return Router}),function(){"use strict";define("models/router",["director"],function(e){var t=function(t){var n=(new e).init();return n.on(/.*/,function(){t.dispatch("render")}),{getRoute:function(){return n.getRoute()[0]}}};return t})}(),function(){"use strict";define("views/header",[],function(){var e=13,t=function(t,n,r,i){function s(){r.set(o),i.dispatch("render")}var o=r.get();t.add=function(t){var n=t.currentTarget.value.trim();t.which===e&&""!==n&&(o.push({title:n,completed:!1}),t.currentTarget.value="",s())},t.clear=function(e){e.currentTarget.value=""},i.addEventListener("render",function(){o=r.get(),n.render()})};return t})}(),function(){"use strict";define("views/main",[],function(){var e=13,t=function(t,n,r,i,s){function o(){r.set(a),s.dispatch("render")}var a=r.get();t.items=function(){var e=i.getRoute();return""===e?a:a.filter(function(t){return"active"===e?!t.completed:t.completed})},t.toggleAll=function(e){a.forEach(function(t){t.completed=e.currentTarget.checked}),o()},t.toggle=function(e,t){t.completed=!t.completed,o()},t.completedClass=function(e){return e?"completed":""},t.remove=function(e,t){t&&(a.splice(a.indexOf(t),1),o())},t.edit=function(e,t){t.editing="editing",n.render()},t.update=function(t,n){var r=t.currentTarget.value.trim();(t.which===e||"blur"===t.type)&&(r?n.title=r:a.splice(a.indexOf(n),1),n.editing="",t.currentTarget.value=r,o())},s.addEventListener("render",function(){a=r.get(),t.active=r.getActive(),t.isVisible=t.items().length>0?!0:!1,t.allCompleted=a.length>0&&0===t.active?!0:!1,n.render()
})};return t})}(),function(){"use strict";define("views/footer",[],function(){var e=function(e,t,n,r,i){function s(){n.set(o),i.dispatch("render")}var o=n.get();e.highlightFilter=function(e){var t=r.getRoute();return t===e?"selected":""},e.clearCompleted=function(){o=o.filter(function(e){return!e.completed}),s()},i.addEventListener("render",function(){o=n.get(),e.active=n.getActive(),e.completed=o.length-e.active,e.itemLabel=1===e.active?"item":"items",e.footerVisible=o.length>0?!0:!1,e.clearCompletedVisible=e.completed>0?!0:!1,t.render()})};return e})}(),function(e){"use strict";e.config({baseUrl:"./js",paths:{soma:"../bower_components/soma.js/build/soma",template:"../bower_components/soma-template/build/soma-template",director:"../bower_components/director/build/director",views:"./views",models:"./models"},shim:{template:{deps:["soma"]},director:{exports:"Router"}}}),e(["soma","template","models/todos","models/router","views/header","views/main","views/footer"],function(e,t,n,r,i,s,o){var a=e.Application.extend({init:function(){this.injector.mapClass("model",n,!0),this.injector.mapClass("router",r,!0),this.createTemplate(i,document.getElementById("header")),this.createTemplate(s,document.getElementById("main")),this.createTemplate(o,document.getElementById("footer"))},start:function(){this.dispatcher.dispatch("render")}});new a})}(requirejs),define("app",function(){});