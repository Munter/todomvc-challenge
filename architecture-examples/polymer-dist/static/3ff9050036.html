<polymer-element name="td-model" attributes="filter items storageId"><script>Polymer("td-model",{filtered:null,completedCount:0,activeCount:0,allCompleted:!1,ready:function(){this.asyncMethod(function(){this.items=this.items||[]})},filterChanged:function(){this.filterItems()},itemsChanged:function(){this.completedCount=this.items.filter(this.filters.completed).length,this.activeCount=this.items.length-this.completedCount,this.allCompleted=this.completedCount&&!this.activeCount,this.filterItems(),this.storage&&(this.storage.value=this.items,this.storage.save())},storageIdChanged:function(){this.storage=document.querySelector("#"+this.storageId),this.storage&&(this.items=this.storage.value)},filterItems:function(){var t=this.filters[this.filter];this.filtered=t?this.items.filter(t):this.items},newItem:function(t){if(t=String(t).trim()){var e={title:t,completed:!1};this.items.push(e),this.itemsChanged()}},destroyItem:function(t){var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1),this.itemsChanged()},clearItems:function(){this.items=this.items.filter(this.filters.active)},setItemsCompleted:function(t){this.items.forEach(function(e){e.completed=t}),this.itemsChanged()},filters:{active:function(t){return!t.completed},completed:function(t){return t.completed}}});</script></polymer-element>