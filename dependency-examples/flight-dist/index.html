<!doctype html>
<html lang="en" data-framework="flight" data-version="dev"><head><meta charset="utf-8" /><title>Flight â€¢ Todo</title><!--[if lt IE 8]><link rel="stylesheet" href="static/base.9f676b3087.css" /><![endif]--><!--[if gte IE 8]><!--><link rel="stylesheet" href="static/180.7842eb1a97.css" /><!--<![endif]--></head><body><section id="todoapp"><header id="header"><h1>todos</h1><input id="new-todo" placeholder="What needs to be done?" autofocus="" /></header> <section id="main"><input id="toggle-all" type="checkbox" /> <label for="toggle-all">Mark all as complete</label><ul id="todo-list"></ul></section><footer id="footer"></footer></section> <footer id="info"><p>Double-click to edit a todo</p><p>Created by <a href="http://github.com/mkuklis">Michal Kuklis</a></p><p>Part of <a href="http://todomvc.com">TodoMVC</a></p></footer><script src="static/bundle-169.6b3f3cf139.js"></script><script>"use strict";define("app/js/store",["depot"],function(e){return e("todos",{idAttribute:"id"})}),define("app/js/data/todos",["flight/lib/component","../store"],function(e,t){function n(){var e;this.defaultAttrs({dataStore:t}),this.add=function(t,n){var r=this.attr.dataStore.save({title:n.title,completed:!1});this.trigger("dataTodoAdded",{todo:r,filter:e})},this.remove=function(e,t){var n=this.attr.dataStore.destroy(t.id);this.trigger("dataTodoRemoved",n)},this.load=function(){var t;e=localStorage.getItem("filter"),t=this.find(),this.trigger("dataTodosLoaded",{todos:t})},this.update=function(e,t){this.attr.dataStore.save(t)},this.toggleCompleted=function(t,n){var r,i=this.attr.dataStore.get(n.id);i.completed=!i.completed,this.attr.dataStore.save(i),r=e?"dataTodoRemoved":"dataTodoToggled",this.trigger(r,i)},this.toggleAllCompleted=function(t,n){this.attr.dataStore.updateAll({completed:n.completed}),this.trigger("dataTodoToggledAll",{todos:this.find(e)})},this.filter=function(t,n){var r;localStorage.setItem("filter",n.filter),e=n.filter,r=this.find(),this.trigger("dataTodosFiltered",{todos:r})},this.find=function(){var t;return t=e?this.attr.dataStore.find(function(t){return"undefined"!=typeof t[e]?t.completed:!t.completed}):this.attr.dataStore.all()},this.clearCompleted=function(){this.attr.dataStore.destroyAll({completed:!0}),this.trigger("uiFilterRequested",{filter:e}),this.trigger("dataClearedCompleted")},this.after("initialize",function(){this.on(document,"uiAddRequested",this.add),this.on(document,"uiUpdateRequested",this.update),this.on(document,"uiRemoveRequested",this.remove),this.on(document,"uiLoadRequested",this.load),this.on(document,"uiToggleRequested",this.toggleCompleted),this.on(document,"uiToggleAllRequested",this.toggleAllCompleted),this.on(document,"uiClearRequested",this.clearCompleted),this.on(document,"uiFilterRequested",this.filter)})}return e(n)}),define("app/js/data/stats",["flight/lib/component","../store"],function(e,t){function n(){this.defaultAttrs({dataStore:t}),this.recount=function(){var e=this.attr.dataStore.all(),t=e.length,n=e.reduce(function(e,t){return e+=t.completed?0:1},0);this.trigger("dataStatsCounted",{all:t,remaining:n,completed:t-n,filter:localStorage.getItem("filter")||""})},this.after("initialize",function(){this.on(document,"dataTodosLoaded",this.recount),this.on(document,"dataTodoAdded",this.recount),this.on(document,"dataTodoRemoved",this.recount),this.on(document,"dataTodoToggled",this.recount),this.on(document,"dataClearedCompleted",this.recount),this.on(document,"dataTodoToggledAll",this.recount)})}return e(n)}),define("app/js/ui/new_item",["flight/lib/component"],function(e){function t(){var e=13;this.createOnEnter=function(t){t.which===e&&this.$node.val().trim()&&(this.trigger("uiAddRequested",{title:this.$node.val().trim()}),this.$node.val(""))},this.after("initialize",function(){this.on("keydown",this.createOnEnter)})}return e(t)}),define("app/js/utils",function(){var e={},t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}},n="&<>\"'/",r="&amp;|&lt;|&gt;|&quot;|&#x27;|&#x2F;",i={escape:new RegExp("["+n+"]","g"),unescape:new RegExp("("+r+")","g")};["escape","unescape"].forEach(function(n){e[n]=function(e){return null===e||void 0===e?"":(""+e).replace(i[n],function(e){return t[n][e]})}});var o={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},a=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},u=/\\|'|\r|\n|\t|\u2028|\u2029/g,c=function(t,n){var r,i=new RegExp([(o.escape||a).source,(o.interpolate||a).source,(o.evaluate||a).source].join("|")+"|$","g"),c=0,l="__p+='";t.replace(i,function(e,n,r,i,o){return l+=t.slice(c,o).replace(u,function(e){return"\\"+s[e]}),n&&(l+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(l+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(l+="';\n"+i+"\n__p+='"),c=o+e.length,e}),l+="';\n",o.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{r=new Function(o.variable||"obj","_",l)}catch(f){throw f.source=l,f}if(n)return r(n,e);var p=function(t){return r.call(this,t,e)};return p.source="function("+(o.variable||"obj")+"){\n"+l+"}",p};return{tmpl:c}});</script><script>define("app/templates/todo.html",'<li id="<%= id %>" class="<%= completed ? \'completed\' : \'\' %>"><div class="view"><input class="toggle" type="checkbox" <%= completed ? \'checked\' : \'\' %>="" /> <label><%- title %></label> <button id="destroy_<%= id %>" class="destroy"></button></div><input class="edit" value="<%- title %>" /></li>');</script><script>"use strict";define("app/js/ui/todo_list",["flight/lib/component","app/templates/todo.html","../utils"],function(e,t,n){function r(){var e=13,r=n.tmpl(t);this.defaultAttrs({destroySelector:"button.destroy",toggleSelector:"input.toggle",labelSelector:"label",editSelector:".edit"}),this.renderAll=function(e,t){this.$node.html(""),t.todos.forEach(function(t){this.render(e,{todo:t})},this)},this.render=function(e,t){("dataTodoAdded"!==e.type||"completed"!==t.filter)&&this.$node.append(r(t.todo))},this.edit=function(e,t){var n=$(t.el).parents("li");n.addClass("editing"),this.select("editSelector").focus()},this.requestUpdate=function(e){var t=$(e.currentTarget),n=t.parents("li"),r=t.val().trim(),i=n.attr("id");n.hasClass("editing")&&(n.removeClass("editing"),r?(n.find("label").html(r),this.trigger("uiUpdateRequested",{id:i,title:r})):this.trigger("uiRemoveRequested",{id:i}))},this.requestUpdateOnEnter=function(t,n){t.which===e&&this.requestUpdate(t,n)},this.requestRemove=function(e,t){var n=$(t.el).attr("id").split("_")[1];this.trigger("uiRemoveRequested",{id:n})},this.remove=function(e,t){var n=this.$node.find("#"+t.id);n.remove()},this.toggle=function(e,t){var n=$(t.el).parents("li");n.toggleClass("completed"),this.trigger("uiToggleRequested",{id:n.attr("id")})},this.after("initialize",function(){this.on(document,"dataTodoAdded",this.render),this.on(document,"dataTodosLoaded",this.renderAll),this.on(document,"dataTodosFiltered",this.renderAll),this.on(document,"dataTodoToggledAll",this.renderAll),this.on(document,"dataTodoRemoved",this.remove),this.on("click",{destroySelector:this.requestRemove}),this.on("click",{toggleSelector:this.toggle}),this.on("dblclick",{labelSelector:this.edit}),this.$node.on("blur",".edit",this.requestUpdate.bind(this)),this.$node.on("keydown",".edit",this.requestUpdateOnEnter.bind(this)),this.trigger("uiLoadRequested")})}return e(r)}),define("app/js/ui/with_filters",function(){return function(){this.defaultAttrs({filterSelector:"#filters a"}),this.chooseFilter=function(e,t){var n=t.el.hash.slice(2);this.select("filterSelector").removeClass("selected"),$(t.el).addClass("selected"),this.trigger("uiFilterRequested",{filter:n})},this.markSelected=function(e){this.$node.find('[href="#/'+e+'"]').addClass("selected")},this.after("initialize",function(){this.on("click",{filterSelector:this.chooseFilter})})}});</script><script>define("app/templates/stats.html",'<span id="todo-count"><strong><%= remaining %></strong> <%= remaining == 1 ? \'item\' : \'items\' %> left</span><ul id="filters"> <li><a href="#/">All</a></li> <li><a href="#/active">Active</a></li> <li><a href="#/completed">Completed</a></li></ul><% if (completed) { %>\n<button id="clear-completed">Clear completed (<%= completed %>)</button>\n<% } %>');</script><script>"use strict";define("app/js/ui/stats",["flight/lib/component","./with_filters","app/templates/stats.html","../utils"],function(e,t,n,r){function i(){var e=r.tmpl(n);this.defaultAttrs({clearCompletedSelector:"#clear-completed"}),this.render=function(t,n){var r=n.all>0;this.$node.html(e(n)),this.$node.toggle(r),this.markSelected(n.filter)},this.clearCompleted=function(){this.trigger("uiClearRequested")},this.after("initialize",function(){this.$node.hide(),this.on(document,"dataStatsCounted",this.render),this.on("click",{clearCompletedSelector:this.clearCompleted})})}return e(i,t)}),define("app/js/ui/main_selector",["flight/lib/component"],function(e){function t(){this.toggle=function(e,t){var n=t.all>0;this.$node.toggle(n)},this.after("initialize",function(){this.$node.hide(),this.on(document,"dataStatsCounted",this.toggle)})}return e(t)}),define("app/js/ui/toggle_all",["flight/lib/component"],function(e){function t(){this.toggleAllComplete=function(){this.trigger("uiToggleAllRequested",{completed:this.$node.is(":checked")})},this.toggleCheckbox=function(e,t){this.node.checked=!t.remaining},this.after("initialize",function(){this.on("click",this.toggleAllComplete),this.on(document,"dataStatsCounted",this.toggleCheckbox)})}return e(t)}),define("app/js/app",["./data/todos","./data/stats","./ui/new_item","./ui/todo_list","./ui/stats","./ui/main_selector","./ui/toggle_all"],function(e,t,n,r,i,o,a){var s=function(){t.attachTo(document),e.attachTo(document),n.attachTo("#new-todo"),o.attachTo("#main"),i.attachTo("#footer"),a.attachTo("#toggle-all"),r.attachTo("#todo-list")};return{initialize:s}}),require.config({baseUrl:"./",paths:{jquery:"bower_components/jquery/jquery",es5shim:"bower_components/es5-shim/es5-shim",es5sham:"bower_components/es5-shim/es5-sham",text:"bower_components/requirejs-text/text",flight:"bower_components/flight",depot:"bower_components/depot/depot"},shim:{"app/js/app":{deps:["jquery","es5shim","es5sham"]}}}),require(["app/js/app"],function(e){e.initialize()}),define("app/js/main",function(){});</script></body></html>